import{J as M,i as h,t as f,m as u,k as y,ac as D,al as p,d as b,G as S,j as e,am as w,an as v,T as s,ap as z,aP as F,F as T,az as d,aq as L,B as c,r as A,aZ as U,s as E,q as N,av as j,D as B,a_ as H,aj as C,L as P,aw as Q,ax as K,bF as R}from"./client-DtfdVV77.js";import{A as V}from"./admin-config-DXsixO44.js";import{c as x}from"./main-BGmGAxtx.js";import{D as W}from"./settings-links-CRsxvJIZ.js";import{u as $,a as G}from"./update-localization-Cq9n07eo.js";import{G as _}from"./global-loading-progress-DVC8NxPo.js";import{D as J}from"./data-table-header-CdCZHch7.js";import{D as O}from"./data-table-pagination-footer-B4yyc06A.js";import{u as Z}from"./use-datatable-search-params-dzq5X78n.js";import{a as X,D as Y,b as ee,c as ae}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as se}from"./use-datatable-query-v3pOHYke.js";import{T as te}from"./table-CynOKbaN.js";import{F as oe}from"./file-upload-provider-B4w-VsYu.js";import{M as ie}from"./MoreVert-BVDYtk4z.js";import{T as re}from"./Translate-DPB2wdvD.js";import{C as ne}from"./confirmation-dialog-BzXs9ksK.js";import{d as le}from"./download-file-from-url-hJ3EUwXO.js";import{F as me}from"./file-input-config-DrcTpI3-.js";import{o as de}from"./open-upload-window-DE9Q8gNs.js";import{D as ce}from"./data-table-add-item-button-B_2m2pad.js";import{D as ue}from"./data-table-emty-state-message-DsPxSC6g.js";import{F as I}from"./select-D9niWe2H.js";import{o as ge}from"./custom-menu-Dvq-fOnC.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./TextFields-CM1xUWDR.js";import"./external-link-Cxcw6nc_.js";import"./book-open-D91H26Dq.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./normalized-model-field-D3Ui05eZ.js";import"./Edit-BaEHOLuK.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./uploaded-file-DOXWsty7.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./Add-B1HfWgJf.js";import"./combobox-end-adornment-CWQ4Xgal.js";const pe=""+new URL("around-the-world-DwONd8Eq.svg",import.meta.url).href;function xe(a){return y.post("localizations",a).then(o=>o.data)}function je(a){const o=M();return h({mutationFn:t=>xe(t),onSuccess:()=>{f(u("Localization created")),o.invalidateQueries({queryKey:x.localizations.invalidateKey})},onError:t=>ge(t,a)})}function he(){const{trans:a}=D(),{formId:o,close:t}=p(),i=b({defaultValues:{language:"en"}}),r=S(),m=je(i);return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx(s,{message:"Create localization"})}),e.jsx(z,{children:e.jsxs(F,{form:i,id:o,onSubmit:n=>{m.mutate(n,{onSuccess:t})},children:[e.jsx(T,{autoFocus:!0,name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(I,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:a(u("Search languages")),children:r.map(n=>e.jsx(d,{value:n.code,children:n.name},n.code))})]})}),e.jsxs(L,{children:[e.jsx(c,{onClick:t,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:o,disabled:m.isPending,children:e.jsx(s,{message:"Save"})})]})]})}function fe({localization:a}){const{trans:o}=D(),{formId:t,close:i}=p(),r=b({defaultValues:{id:a.id,name:a.name,language:a.language}}),m=S(),n=$(r);return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx(s,{message:"Update localization"})}),e.jsx(z,{children:e.jsxs(F,{form:r,id:t,onSubmit:l=>{n.mutate(l,{onSuccess:i})},children:[e.jsx(T,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(I,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:o(u("Search languages")),children:m.map(l=>e.jsx(d,{value:l.code,children:l.name},l.code))})]})}),e.jsxs(L,{children:[e.jsx(c,{onClick:i,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:t,disabled:n.isPending,children:e.jsx(s,{message:"Save"})})]})]})}const ye=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(s,{message:"Name"}),body:a=>a.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(s,{message:"Language code"}),body:a=>a.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(s,{message:"Last updated"}),body:a=>e.jsx(B,{date:a.updated_at})},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:a=>e.jsxs("div",{className:"text-muted",children:[e.jsx(H,{label:e.jsx(s,{message:"Translate"}),children:e.jsx(C,{size:"md",elementType:P,to:`${a.id}/translate`,children:e.jsx(re,{})})}),e.jsx(oe,{children:e.jsx(De,{locale:a})})]})}];function wa(){const[a,o]=A.useState([]),{searchParams:t,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:m,isFiltering:n}=Z(U),l=se(x.localizations.index(t)),q=e.jsxs(j,{type:"modal",children:[e.jsx(c,{variant:"flat",color:"danger",children:e.jsx(s,{message:"Delete"})}),e.jsx(be,{selectedIds:a,onDelete:()=>o([])})]}),k=e.jsxs(j,{type:"modal",children:[e.jsx(ce,{children:e.jsx(s,{message:"Add new localization"})}),e.jsx(he,{})]});return e.jsxs(X,{children:[e.jsx(_,{query:l}),e.jsx(Y,{title:e.jsx(s,{message:"Localizations"}),showSidebarToggleButton:!0,rightContent:e.jsx(W,{variant:"button",link:V.pages.translations,size:"xs"})}),e.jsxs(ee,{children:[e.jsx(J,{searchValue:t.query,onSearchChange:m,actions:k,selectedItems:a,selectedActions:q}),e.jsxs(ae,{children:[e.jsx(te,{columns:ye,data:l.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:a,onSelectionChange:o,cellHeight:"h-60"}),l.isEmpty&&e.jsx(ue,{isFiltering:n,image:pe,title:e.jsx(s,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching localizations"})}),e.jsx(O,{query:l,onPageChange:g=>r({page:g}),onPerPageChange:g=>r({perPage:g})})]})]})]})}function De({locale:a}){const o=G();return e.jsxs(Q,{children:[e.jsx(C,{disabled:o.isPending,children:e.jsx(ie,{})}),e.jsxs(K,{children:[e.jsx(d,{value:"translate",elementType:P,to:`${a.id}/translate`,children:e.jsx(s,{message:"Translate"})}),e.jsx(d,{value:"rename",onSelected:()=>R(fe,{localization:a}),children:e.jsx(s,{message:"Rename"})}),e.jsx(d,{value:"download",onSelected:()=>le(`api/v1/localizations/${a.id}/download`),children:e.jsx(s,{message:"Download"})}),e.jsx(d,{value:"upload",onSelected:async()=>{const t=await de({types:[me.json]});t.length==1&&o.mutate({localeId:a.id,file:t[0]})},children:e.jsx(s,{message:"Upload"})})]})]})}function be({selectedIds:a,onDelete:o}){const{close:t}=p(),i=h({mutationFn:()=>y.delete(`localizations/${a.join(",")}`),onSuccess:async()=>{await N.invalidateQueries({queryKey:x.localizations.invalidateKey}),f(u("Localizations deleted")),o(),t()},onError:r=>E(r)});return e.jsx(ne,{isDanger:!0,isLoading:i.isPending,title:e.jsx(s,{message:"Delete localizations"}),body:e.jsx(s,{message:"Are you sure you want to delete selected localizations?",values:{count:a.length}}),confirm:e.jsx(s,{message:"Delete"}),onConfirm:()=>i.mutate()})}export{wa as Component,be as DeleteLocalizationsDialog};
