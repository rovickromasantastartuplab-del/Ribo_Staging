import{j as e,T as n,E as N,r as g,a as M,i as H,s as R,q as c,k as T,ai as C,aj as v,aw as E,ax as P,az as d,Y as S,c as k,L as B}from"./client-DtfdVV77.js";import{B as Q,a as u}from"./breadcrumb-CaNBY_Ut.js";import{I as q,h as x}from"./custom-menu-Dvq-fOnC.js";import{A as z}from"./admin-config-DXsixO44.js";import{D as K}from"./settings-links-CRsxvJIZ.js";import{D as L}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{h as A}from"./main-BGmGAxtx.js";import{m as O,u as V}from"./use-sortable-CsHM4tcn.js";import{D as F}from"./DragIndicator-CvftiD3i.js";import{M as _}from"./MoreVert-BVDYtk4z.js";import{u as $,D as U}from"./is-touch-device-vJjKU1l2.js";import{O as Y}from"./OpenInNew-C06CZDpe.js";function me({category:a,section:s}){return e.jsxs(Q,{size:"xl",children:[e.jsx(u,{to:"..",children:e.jsx(n,{message:"Help center"})}),a&&e.jsx(u,{to:`../categories/${a.id}`,children:a.name}),s&&e.jsx(u,{children:s.name})]})}function de({title:a,description:s}){return e.jsx(q,{className:"mx-auto mt-40 max-w-450",image:e.jsx("div",{children:e.jsx(N,{size:"lg"})}),size:"sm",imageHeight:"h-auto",imageMargin:"mb-12",title:a,description:s})}function ue({actionButton:a,children:s,breadcrumb:r}){return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(A,{children:e.jsx(n,{message:"Help center"})}),e.jsx(L,{title:r,showSidebarToggleButton:!0,rightContent:e.jsxs(g.Fragment,{children:[e.jsx(K,{variant:"button",link:z.pages.helpCenter,size:"xs"}),a]})}),e.jsxs("main",{className:"dashboard-stable-scrollbar flex-auto overflow-auto p-12 md:p-24",children:[e.jsx("p",{className:"mb-20 text-sm text-muted",children:e.jsx(n,{message:"Arrange help center categories, sections and articles."})}),s]})]})}function G(){const{categoryId:a}=M(),s=a?x.manager.sections(a).queryKey:x.manager.categories().queryKey;return H({mutationFn:r=>{const o=c.getQueryData(s).categories.map(t=>t.id);return J({parentId:r.parentId,ids:o})},onMutate:async({oldIndex:r,newIndex:o})=>{await c.cancelQueries({queryKey:s});const t=c.getQueryData(s);return c.setQueryData(s,i=>{const l={...i,categories:[...(i==null?void 0:i.categories)??[]]};return l.categories=O(l.categories,r,o),l}),{previousResponse:t}},onSuccess:async()=>{await c.invalidateQueries({queryKey:x.manager.invalidateKey})},onError:(r,o,t)=>{R(r),c.setQueryData(s,t==null?void 0:t.previousResponse)}})}function J(a){return T.post("hc/manager/categories/reorder",a).then(s=>s.data)}function xe({item:a,items:s,onSortEnd:r,onClick:o,onView:t,onEdit:i,onDelete:l,children:p,description:h,icon:w}){const f=g.useRef(null),j=g.useRef(null),b=$(),y=G(),{sortableProps:D,dragHandleRef:I}=V({ref:f,disabled:b??!1,item:a,items:s,type:"hcManagerSort",preview:j,onSortEnd:r});return e.jsxs("div",{className:"cursor:pointer mb-12 flex items-center gap-6 rounded-panel border p-12 transition-colors hover:border-primary",onClick:C(()=>o()),ref:f,...D,children:[!b&&e.jsx(v,{className:"text-muted",ref:I,disabled:y.isPending,onClick:m=>{m.preventDefault(),m.stopPropagation()},children:e.jsx(F,{})}),e.jsxs("div",{className:"flex items-center gap-12",children:[w,e.jsxs("div",{className:"flex-auto",children:[e.jsx("h3",{className:"text-sm font-semibold",children:p}),h&&e.jsx("div",{className:"text-sm text-muted",children:h})]})]}),e.jsxs(E,{children:[e.jsx(v,{className:"ml-auto text-muted",onClick:m=>{m.preventDefault(),m.stopPropagation()},children:e.jsx(_,{})}),e.jsxs(P,{children:[e.jsx(d,{value:"edit",onSelected:()=>i(),children:e.jsx(n,{message:"Edit"})}),e.jsx(d,{value:"sendToTop",onSelected:()=>{r(s.indexOf(a),0),document.documentElement.scrollTop=0},children:e.jsx(n,{message:"Send to top"})}),e.jsx(d,{value:"viewInHc",onSelected:()=>t(),children:e.jsx(n,{message:"View in help center"})}),e.jsx(d,{value:"delete",onSelected:()=>l(),children:e.jsx(n,{message:"Delete"})})]})]}),e.jsx(W,{name:p,ref:j})]})}const W=S.forwardRef(({name:a},s)=>e.jsx(U,{ref:s,children:()=>e.jsx("div",{className:"rounded bg-chip p-6 text-sm shadow",children:a})}));function ge({children:a}){const s=k();return e.jsxs("div",{className:"mb-10 flex items-center justify-between gap-12",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted",children:a}),e.jsxs(B,{to:`${s.pathname.includes("admin")?"/admin":"/dashboard"}/hc/articles`,className:"flex items-center gap-4 text-sm font-medium hover:underline",target:"_blank",children:[e.jsx(Y,{size:"xs"}),e.jsx(n,{message:"View all articles"})]})]})}export{ue as H,ge as a,xe as b,de as c,me as d,G as u};
