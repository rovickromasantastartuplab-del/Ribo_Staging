import{j as e,aP as S,B as x,T as s,aQ as N,t as T,m as c,ac as y,d,F as f,aG as h,az as v,y as P,aR as A,r as C,L as V}from"./client-DtfdVV77.js";import{P as G}from"./toggle-preview-button-BfqVe6Bw.js";import{a as z,A as k}from"./accordion-Dmxnze9z.js";import{u as E,A as B}from"./ai-agent-page-header-B8HWeYwY.js";import{F as H,B as w,S as I,a as L,b as M}from"./SentimentVerySatisfied-DzHFj715.js";import{u as p}from"./useSuspenseQuery-Bmt2-NKx.js";import{g as u,S as q}from"./main-BGmGAxtx.js";import{F as R}from"./form-chip-field-C7l8nGPv.js";import{F as j}from"./radio-DP8xYP6t.js";import{F as U}from"./select-D9niWe2H.js";import{F as W}from"./image-selector-fVyS7PG4.js";import{F as Q}from"./file-upload-provider-B4w-VsYu.js";import{A as K}from"./ArrowForward-DlUghUiH.js";import"./preview-messages-B_u8VttT.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./RestartAlt-DTi82oFC.js";import"./use-is-module-installed-CDjratdW.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./accordtion-animation-BGCK95Hj.js";import"./custom-menu-Dvq-fOnC.js";import"./admin-config-DXsixO44.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./use-url-backed-tabs-BirCk8wN.js";import"./tabs-spjnXvK6.js";import"./book-open-D91H26Dq.js";import"./chip-list-DHXDGW6X.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./use-active-upload-CGOT7g6R.js";import"./open-upload-window-DE9Q8gNs.js";import"./uploaded-file-DOXWsty7.js";import"./shallow-BH2jDtXM.js";import"./AddAPhoto-Bl3FQpaJ.js";import"./progress-bar-BMzArYUQ.js";import"./file-input-config-DrcTpI3-.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";function g({label:n,description:a,icon:i,children:l,form:t,...o}){const m=E(t);return e.jsx(z,{label:n,description:a,startIcon:i,buttonPadding:"p-20",bodyPadding:"p-20",labelClassName:"text-sm font-medium",descriptionClassName:"text-sm text-muted",startIconColor:"text-main",...o,children:e.jsxs(S,{form:t,onSubmit:r=>m.mutate(r,{onSuccess:()=>{T(c("Changes saved"))}}),onBeforeSubmit:()=>t.clearErrors(),children:[l,e.jsxs("div",{className:"mt-24",children:[e.jsx(x,{variant:"flat",color:"primary",type:"submit",startIcon:e.jsx(N,{}),className:"mr-8",size:"xs",disabled:m.isPending,children:e.jsx(s,{message:"Save"})}),e.jsx(x,{variant:"outline",type:"button",size:"xs",disabled:m.isPending,onClick:()=>{t.reset(),o.expandedValues&&o.setExpandedValues&&o.setExpandedValues(o.expandedValues.filter(r=>r!==o.value))},children:e.jsx(s,{message:"Cancel"})})]})]})})}function D(n){var t;const{trans:a}=y(),{data:i}=p(u.settings.index()),l=d({defaultValues:{cantAssist:{instruction:((t=i.settings.cantAssist)==null?void 0:t.instruction)??""}}});return e.jsx(g,{...n,label:e.jsx(s,{message:"If AI agent is unable to assist user"}),description:e.jsx(s,{message:"Choose what happens when AI agent is unable to help the customer"}),icon:e.jsx(H,{}),form:l,children:e.jsx(f,{name:"cantAssist.instruction",label:e.jsx(s,{message:"Instruction (optional)"}),inputElementType:"textarea",rows:2,className:"mb-16",placeholder:a({message:"say why you are unable to help and ask if you can help with something else."})})})}function J(n){var t,o,m;const{data:a}=p(u.settings.index()),i=d({defaultValues:{greetingType:a.settings.greetingType??"basicGreeting",initialFlowId:a.settings.initialFlowId??((t=a.flows[0])==null?void 0:t.id)??"",basicGreeting:{message:((o=a.settings.basicGreeting)==null?void 0:o.message)??"",flowIds:((m=a.settings.basicGreeting)==null?void 0:m.flowIds)??[]}}}),l=h({control:i.control,name:"greetingType"});return e.jsxs(g,{...n,label:e.jsx(s,{message:"Start of the conversation"}),description:e.jsx(s,{message:"Show a greeting and buttons or start with a flow"}),icon:e.jsx(O,{}),form:i,children:[e.jsxs("div",{className:"mb-28",children:[e.jsx(j,{name:"greetingType",value:"basicGreeting",size:"sm",children:e.jsx(s,{message:"Send a greeting message and show buttons"})}),l==="basicGreeting"&&e.jsxs("div",{className:"pl-24 pt-16",children:[e.jsx(f,{name:"basicGreeting.message",label:e.jsx(s,{message:"Message"}),inputElementType:"textarea",rows:4,className:"mb-16"}),e.jsx(R,{name:"basicGreeting.flowIds",label:e.jsx(s,{message:"Flows (up to 10)"}),allowCustomValue:!1,maxItems:10,valueKey:"id",displayWith:r=>{var b;return((b=a.flows.find(F=>F.id===r.id))==null?void 0:b.name)??""},suggestions:a.flows,children:r=>e.jsx(v,{value:r.id,children:r.name},r.id)})]})]}),e.jsxs("div",{children:[e.jsx(j,{name:"greetingType",value:"flow",size:"sm",children:e.jsx(s,{message:"Start with a specific flow"})}),l==="flow"&&e.jsx("div",{className:"pl-24 pt-16",children:e.jsx(U,{name:"initialFlowId",selectionMode:"single",label:e.jsx(s,{message:"Select a flow"}),required:!0,children:a.flows.map(r=>e.jsx(v,{value:r.id,children:r.name},r.id))})})]})]})}const O=P(e.jsx("path",{d:"M7.03,4.95L3.49,8.49c-3.32,3.32-3.32,8.7,0,12.02s8.7,3.32,12.02,0l6.01-6.01c0.97-0.97,0.97-2.56,0-3.54 c-0.12-0.12-0.25-0.23-0.39-0.32l0.39-0.39c0.97-0.97,0.97-2.56,0-3.54c-0.16-0.16-0.35-0.3-0.54-0.41c0.4-0.92,0.23-2.02-0.52-2.77 c-0.87-0.87-2.22-0.96-3.2-0.28c-0.1-0.15-0.21-0.29-0.34-0.42c-0.97-0.97-2.56-0.97-3.54,0l-2.51,2.51 c-0.09-0.14-0.2-0.27-0.32-0.39C9.58,3.98,8,3.98,7.03,4.95z M8.44,6.37c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71 l-3.18,3.18c1.17,1.17,1.17,3.07,0,4.24l1.41,1.41c1.45-1.45,1.82-3.57,1.12-5.36l6.3-6.3c0.2-0.2,0.51-0.2,0.71,0s0.2,0.51,0,0.71 l-4.6,4.6l1.41,1.41l6.01-6.01c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71l-6.01,6.01l1.41,1.41l4.95-4.95 c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71l-5.66,5.66l1.41,1.41l3.54-3.54c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71 L14.1,19.1c-2.54,2.54-6.65,2.54-9.19,0s-2.54-6.65,0-9.19L8.44,6.37z M23,17c0,3.31-2.69,6-6,6v-1.5c2.48,0,4.5-2.02,4.5-4.5H23z M1,7c0-3.31,2.69-6,6-6v1.5C4.52,2.5,2.5,4.52,2.5,7H1z"}),"WavingHand");function X(n){const{data:a}=p(u.settings.index()),i=d({defaultValues:{name:a.settings.name,image:a.settings.image}});return e.jsxs(g,{...n,label:e.jsx(s,{message:"Identity"}),description:e.jsx(s,{message:"Name and avatar"}),icon:e.jsx(w,{}),form:i,children:[e.jsx(f,{name:"name",label:e.jsx(s,{message:"Name"}),description:e.jsx(s,{message:"The name your customers will see."}),required:!0,className:"mb-16"}),e.jsx(Q,{children:e.jsx(W,{name:"image",uploadType:A.brandingImages,label:e.jsx(s,{message:"Avatar"}),className:"max-w-400",showRemoveButton:!0,descriptionPosition:"bottom",description:e.jsx(s,{message:"Use a JPG, PNG, or GIF smaller than 100KB. 50px by 50px works best."})})})]})}const Y=[{name:"friendly",label:c("Friendly"),icon:I},{name:"neutral",label:c("Neutral"),icon:L},{name:"professional",label:c("Professional"),icon:w},{name:"humorous",label:c("Humorous"),icon:M}];function Z(n){const{data:a}=p(u.settings.index()),i=d({defaultValues:{personality:a.settings.personality??"neutral"}}),l=h({control:i.control,name:"personality"});return e.jsx(g,{...n,label:e.jsx(s,{message:"Personality"}),description:e.jsx(s,{message:"Determines tone of voice for AI generated messages"}),icon:e.jsx(I,{}),form:i,children:e.jsx("div",{className:"flex items-center gap-12",children:Y.map(t=>e.jsx(x,{value:t.name,startIcon:e.jsx(t.icon,{}),variant:"outline",color:l===t.name?"primary":void 0,onClick:()=>i.setValue("personality",t.name),size:"sm",className:"min-h-46 min-w-208",children:e.jsx(s,{...t.label})},t.name))})})}function _(n){var o,m;const{trans:a}=y(),{data:i}=p(u.settings.index()),l=d({defaultValues:{transfer:{type:((o=i.settings.transfer)==null?void 0:o.type)??"basicTransfer",instruction:((m=i.settings.transfer)==null?void 0:m.instruction)??""}}}),t=h({control:l.control,name:"transfer.type"});return e.jsxs(g,{...n,label:e.jsx(s,{message:"Transfer to human"}),description:e.jsx(s,{message:"If customer asks to speak to human agent"}),icon:e.jsx(q,{}),form:l,children:[e.jsx("div",{className:"mb-28",children:e.jsx(j,{name:"transfer.type",value:"basicTransfer",size:"sm",children:e.jsx(s,{message:"Transfer customer to first available agent or put into queue"})})}),e.jsxs("div",{children:[e.jsx(j,{name:"transfer.type",value:"instruction",size:"sm",children:e.jsx(s,{message:"Custom instruction"})}),t==="instruction"&&e.jsx("div",{className:"pl-24 pt-16",children:e.jsx(f,{required:!0,name:"transfer.instruction",inputElementType:"textarea",rows:2,className:"mb-16",placeholder:a({message:"say that there are no available agents right now and ask if you can help instead"})})})]})]})}function We(){const[n,a]=C.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col",children:[e.jsx(B,{previewVisible:n,onTogglePreview:()=>a(!n)}),e.jsx("div",{className:"flex-auto overflow-y-auto p-24",children:e.jsxs("div",{children:[e.jsxs(k,{variant:"outline",gap:"space-y-24",children:[e.jsx(X,{}),e.jsx(Z,{}),e.jsx(J,{}),e.jsx(D,{}),e.jsx(_,{})]}),e.jsx("div",{className:"mt-24 pl-8",children:e.jsx(x,{elementType:V,to:"/admin/settings/ai",variant:"link",color:"primary",startIcon:e.jsx(K,{}),children:e.jsx(s,{message:"Additional AI settings"})})})]})})]}),n&&e.jsx(G,{onClose:()=>a(!1)})]})}export{We as Component};
