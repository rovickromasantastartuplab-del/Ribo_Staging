import{h as x,aZ as j,l as h,j as e,T as a,av as g,aX as f,b7 as b,r as p,aw as v,aj as D,ax as S,az as m,L as u}from"./client-DtfdVV77.js";import{A as y}from"./admin-config-DXsixO44.js";import{T}from"./team-index-page-tabs-DGkSG6mK.js";import{I as A}from"./invite-agents-dialog-DWgrpC1c.js";import{c as C,u as I}from"./use-agent-permissions-Cu2wkS4o.js";import{a as O,u as P}from"./use-compact-agents-BbfR0BTv.js";import{u as w}from"./use-is-module-installed-CDjratdW.js";import{t as N}from"./team-DYmDDGxN.js";import{D as k}from"./settings-links-CRsxvJIZ.js";import{u as E,B as M}from"./use-unban-users-B2eSKHQ6.js";import{D as B}from"./update-user-page-actions-CCAKW1qY.js";import{G as H}from"./global-loading-progress-DVC8NxPo.js";import{a as L}from"./name-with-avatar-D8NZSkGp.js";import{D as _}from"./data-table-add-item-button-B_2m2pad.js";import{D as z}from"./data-table-header-CdCZHch7.js";import{D as R}from"./data-table-pagination-footer-B4yyc06A.js";import{u as U}from"./use-datatable-search-params-dzq5X78n.js";import{D as F}from"./data-table-emty-state-message-DsPxSC6g.js";import{a as W,D as Q,b as $,c as q}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as G}from"./use-datatable-query-v3pOHYke.js";import{h as V}from"./main-BGmGAxtx.js";import{T as K}from"./table-CynOKbaN.js";import{O as X}from"./online-status-circle-Nb704kAK.js";import{M as Z}from"./MoreHoriz-Df3_bV9s.js";import{S as J}from"./skeleton-D178v0-U.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./tabs-spjnXvK6.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./helpdesk-channel-CQKSbeKg.js";import"./external-link-Cxcw6nc_.js";import"./book-open-D91H26Dq.js";import"./custom-menu-Dvq-fOnC.js";import"./date-picker-BGiTN72q.js";import"./paginated-resources-DUi9UwyN.js";import"./confirmation-dialog-BzXs9ksK.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./filter-operator-names-BbrFb9i0.js";import"./normalized-model-field-D3Ui05eZ.js";import"./Edit-BaEHOLuK.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./HourglassEmpty-T3VQEBmq.js";const Y=[{key:"name",allowsSorting:!0,visibleInMode:"all",sortingKey:"email",header:()=>e.jsx(a,{message:"Teammate"}),body:(s,t)=>e.jsx(L,{label:s.name,alwaysShowAvatar:!0,description:s.email,avatarCircle:!0})},{key:"role",header:()=>e.jsx(a,{message:"Role"}),body:s=>e.jsx(f,{className:"w-max capitalize",radius:"rounded-panel",size:"sm",children:s.role})},{key:"last_active_at",header:()=>e.jsx(a,{message:"Status"}),allowsSorting:!0,body:s=>e.jsx(ee,{agent:s})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(se,{agent:s})}];function ee({agent:s}){const t=w("livechat"),{isLoading:n}=O(),r=P(s.id);if(n)return e.jsx(J,{className:"max-w-100"});if(s.banned_at)return e.jsx(l,{color:"bg-danger",children:e.jsx(a,{message:"Suspended"})});if(r){if(!t)return e.jsx(l,{color:"bg-positive",children:e.jsx(a,{message:"Online"})})}else return e.jsx(l,{color:"bg-chip",children:e.jsx(a,{message:"Last seen: :date",values:{date:e.jsx(b,{date:s.last_active_at})}})});return s.accepts_conversations?e.jsx(l,{color:"bg-positive",children:e.jsx(a,{message:"Accepting conversations"})}):e.jsx(l,{color:"bg-danger",children:e.jsx(a,{message:"Not accepting conversations"})})}const l=({color:s,children:t})=>e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(X,{color:s}),t]});function se({agent:s}){const t=E([s.id]),[n,r]=p.useState(!1),[c,d]=p.useState(!1),i=I(s.id);return e.jsxs(p.Fragment,{children:[e.jsx(g,{type:"modal",isOpen:n,onOpenChange:r,children:e.jsx(B,{userId:s.id})}),e.jsx(g,{type:"modal",isOpen:c,onOpenChange:d,children:e.jsx(M,{userIds:[s.id]})}),e.jsxs(v,{children:[e.jsx(D,{size:"md",className:"text-muted",children:e.jsx(Z,{})}),e.jsxs(S,{children:[i&&e.jsx(m,{value:"edit",elementType:u,to:`${s.id}/details`,children:e.jsx(a,{message:"Edit"})}),e.jsx(m,{value:"reports",elementType:u,to:`/dashboard/reports/agents/${s.id}`,children:e.jsx(a,{message:"View reports"})}),i&&(s.banned_at?e.jsx(m,{value:"suspend",onSelected:()=>t.mutate(),children:e.jsx(a,{message:"Reactivate"})}):e.jsx(m,{value:"suspend",onSelected:()=>d(!0),children:e.jsx(a,{message:"Suspend"})})),i&&e.jsx(m,{value:"delete",className:"text-danger",onSelected:()=>r(!0),children:e.jsx(a,{message:"Delete"})})]})]})]})}function cs(){const s=x(),{searchParams:t,sortDescriptor:n,mergeIntoSearchParams:r,setSearchQuery:c,isFiltering:d}=U(j),i=G(h.agents.index(t));return e.jsxs(W,{children:[e.jsx(H,{query:i}),e.jsx(V,{children:e.jsx(a,{message:"Team - Agents"})}),e.jsx(Q,{title:e.jsx(a,{message:"Team"}),showSidebarToggleButton:!0,border:"border-none",rightContent:e.jsx(k,{variant:"button",link:y.pages.team,size:"xs"})}),e.jsx(T,{}),e.jsxs($,{children:[e.jsx(z,{searchValue:t.query,onSearchChange:c,actions:e.jsx(ae,{})}),e.jsxs(q,{children:[e.jsx(K,{columns:Y,data:i.items,sortDescriptor:n,onSortChange:r,enableSelection:!1,cellHeight:"h-70",onAction:o=>{C(o.id)&&s(`${o.id}/details`)}}),i.isEmpty&&e.jsx(F,{isFiltering:d,className:"mt-44",image:N,title:e.jsx(a,{message:"No agents have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching agents"})}),e.jsx(R,{hideIfOnlyOnePage:!0,query:i,onPageChange:o=>r({page:o}),onPerPageChange:o=>r({perPage:o})})]})]})]})}function ae(){return e.jsxs(g,{type:"modal",children:[e.jsx(_,{children:e.jsx(a,{message:"Invite teammates"})}),e.jsx(A,{})]})}export{cs as Component};
