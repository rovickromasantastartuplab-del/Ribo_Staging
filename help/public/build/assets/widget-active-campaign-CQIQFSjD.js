import{h as g,r as d,t as l,u as f,bg as u,j as m,bK as h,z as C,bL as b}from"./client-DtfdVV77.js";import{C as x}from"./campaign-renderer-D82hYDpC.js";import{l as W,w as p,u as v,a as S,b as w}from"./widget-entry-D_Ec2L-P.js";import"./css-props-from-bg-config-CgypBlFP.js";import"./use-compact-agents-BbfR0BTv.js";import"./helpdesk-channel-CQKSbeKg.js";import"./online-status-circle-Nb704kAK.js";import"./HourglassEmpty-T3VQEBmq.js";import"./agent-avatar-zWPNofnN.js";import"./Send-BbKd9OAw.js";import"./preview-messages-B_u8VttT.js";import"./feed-attachments-Dbj_-UUy.js";import"./animating-messages-DuT2CR0j.js";import"./file-thumbnail-DlIWt16b.js";import"./file-type-icon-CNIGAaMG.js";import"./formatted-bytes-CFeeP1Iy.js";import"./pretty-bytes-bO14ePu9.js";import"./AttachFile-D1Gtc63k.js";import"./reverse-conversation-messages-D589XwPM.js";import"./infinite-scroll-sentinel-Dx_uGmDU.js";import"./isScrollable-BSEN4xi5.js";import"./customer-avatar-ul3Z1Bt5.js";import"./file-upload-provider-B4w-VsYu.js";import"./uploaded-file-DOXWsty7.js";import"./with-selector-DPNnjGhI.js";import"./attribute-renderer-C6KvryoI.js";import"./ThumbDown-BB-li-Gi.js";import"./ThumbUp-CTCneb2T.js";import"./attribute-input-renderer-BEkqCl5D.js";import"./button-group-DAgYjIi8.js";import"./date-picker-BGiTN72q.js";import"./radio-DP8xYP6t.js";import"./radio-group-C_T7jNq6.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./get-default-values-for-form-with-attributes-htMbgWW2.js";import"./HelpOutline-DkAeNvPf.js";import"./stream-BOYAfkJs.js";import"./useMutationState-Bmyxea6H.js";import"./formatted-message-body-N3ejX0-V.js";import"./useInfiniteQuery-CRfa2XSO.js";import"./infiniteQueryObserver-JD1WF4OJ.js";import"./emoji-picker-button-Cm_kBrZ5.js";import"./tiptap-editor-context-CeN7pXcf.js";import"./check-circle-filled-B4oRGH_i.js";import"./Add-B1HfWgJf.js";import"./open-upload-window-DE9Q8gNs.js";import"./play-conversation-sound-OdSdmIQ4.js";import"./websocket-updates-notifier-3Xk6dITh.js";import"./ChatBubbleOutline-D_zVnkWb.js";import"./index.module-BtHqevI0.js";function P(){const t=g(),{sendMessageHandler:e,isPending:r}=A();return{handleCampaignAction:d.useCallback((s,a,i,o)=>{W(s,!0),i==="dismiss"&&p().hideCampaign(),o&&(i==="openUrl"?window.open(o,"_blank"):i==="copyToClipboard"?(navigator.clipboard.writeText(o),l("Copied to clipboard!")):i==="openEmbed"?(t("/embed",{state:{embedUrl:o}}),p().setWidgetState("open")):i==="sendMessage"&&e(o))},[e,t]),isPending:r}}function A(){var a,i;const t=f(),e=((i=(a=t.chatWidget)==null?void 0:a.forms)==null?void 0:i.preChat)&&!t.chatWidget.forms.preChat.disabled,r=g(),n=v();return{sendMessageHandler:d.useCallback(o=>{e?(r("/conversations/new",{replace:!0,state:{messageBody:o}}),p().setWidgetState("open")):n.mutate({message:{uuid:u(),body:o,attachments:[]}},{onSuccess:()=>{p().setWidgetState("open")}})},[n,r,e]),isPending:n.isPending}}function Et(){const t=S(e=>e.activeCampaign);return t?m.jsx(j,{campaign:t}):null}function j({campaign:t}){var s;const{paddingSide:e}=w(),{isPending:r,handleCampaignAction:n}=P();return d.useEffect(()=>{var i,o;(i=t.appearance)!=null&&i.fontConfig&&h([(o=t.appearance)==null?void 0:o.fontConfig],{id:"campaign-fonts"})},[(s=t.appearance)==null?void 0:s.fontConfig]),m.jsx(C.div,{...b,style:{width:`${E(t)+e*2}px`,height:`${t.height+28}px`,paddingLeft:`${e}px`,paddingRight:`${e}px`},children:m.jsx(x,{onClose:()=>p().hideCampaign(),campaign:t,actionIsPending:r,onAction:(a,i,o,c)=>n(t,i,o,c)})})}function E(t){var e;switch(((e=t.appearance)==null?void 0:e.size)??"sm"){case"md":return 300;case"lg":return 375;default:return 240}}export{Et as default};
