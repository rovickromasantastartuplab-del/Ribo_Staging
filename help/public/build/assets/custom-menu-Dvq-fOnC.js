import{cp as $,cq as A,cr as k,af as S,o as D,aZ as I,k as M,cs as z,j as x,p as w,ct as N,s as B,t as R,r as F,bV as L,u as Q,b4 as V,T as J,b6 as U,ba as Z,a_ as G}from"./client-DtfdVV77.js";const H=r=>{var a;return $({perPage:r.perPage||"",query:r.query||"",categoryIds:((a=r.categoryIds)==null?void 0:a.join(","))||""})},W=r=>$({page:r.page||"1",orderBy:r.orderBy||"",orderDir:r.orderDir||"",query:r.query||"",statusId:r.statusId||""}),ce={articles:{invalidateKey:["articles"],index:r=>{const a=I(r);return A({queryKey:["articles",a],placeholderData:D,queryFn:({signal:c})=>k("hc/articles",a,c)})},getForArticlePage:r=>_(r,"articlePage"),getForUpdateArticlePage:r=>_(r,"updateArticle"),search:(r,a)=>{const c=H(r);return A({queryKey:["articles","search",c],placeholderData:D,enabled:!!c.query,queryFn:async({signal:u})=>{const l=await k("search/articles",c,u);return a==null||a(l),l},initialData:()=>{var l;const u=(l=S().loaders)==null?void 0:l.searchArticles;if((u==null?void 0:u.query)===r.query)return u}})}},categories:{invalidateKey:["articles"],landingPageData:()=>{var r;return A({queryKey:["articles","landing-page"],queryFn:()=>k("hc"),initialData:(r=S().loaders)==null?void 0:r.hcLandingPage})},get:r=>A({queryKey:["articles","categories",`${r}`],queryFn:()=>k(`hc/categories/${r}`),initialData:()=>{var c,u;const a=(c=S().loaders)==null?void 0:c.categoryPage;if(((u=a==null?void 0:a.category)==null?void 0:u.id)==r)return a}}),normalizedList:()=>A({queryKey:["articles","categories","normalized"],queryFn:()=>k("helpdesk/normalized-models/hc-categories")})},manager:{invalidateKey:["articles"],categories:()=>A({queryKey:["articles","categories","manager"],queryFn:()=>k("hc/manager/categories")}),sections:r=>A({queryKey:["articles","sections","manager",r],queryFn:()=>k(`hc/manager/categories/${r}/sections`)}),articles:r=>A({queryKey:["articles","manager",r],queryFn:()=>k(`hc/manager/sections/${r}/articles`)})},customerConversations:{invalidateKey:["conversations"],index:r=>{const a=W(r);return A({placeholderData:D,queryKey:["conversations","customer","me",a],queryFn:()=>k("helpdesk/customer/tickets",a)})},get:r=>A({queryKey:["conversations","customer","me",r],queryFn:()=>k(`helpdesk/customer/tickets/${r}`)}),newTicketPageData:()=>{const{isInsideSettingsPreview:r}=z(),a={loadAllAttributes:r?"true":""};return A({queryKey:["customer-new-ticket-page-data",a],staleTime:r?1/0:6e5,queryFn:()=>k("helpdesk/customer-new-ticket-page-config",a)})}}};function _({articleId:r,categoryId:a,sectionId:c},u){return A({queryKey:["articles",r,a,c,u],staleTime:1/0,queryFn:()=>{const l=a&&c?`hc/articles/${a}/${c}/${r}`:`hc/articles/${r}`;return M.get(l,{params:{loader:u}}).then(p=>p.data)},initialData:()=>{var y;const l=(y=S().loaders)==null?void 0:y[u];if(!l)return;const[p,d]="path"in l.article?l.article.path:[];if(l.article.id==r&&(p==null?void 0:p.id)==a&&(d==null?void 0:d.id)==c)return l}})}function oe({image:r,title:a,description:c,action:u,className:l,size:p="md",imageHeight:d,imageMargin:y="mb-24"}){const g=X(p,d);return x.jsxs("div",{className:w("mx-auto w-max max-w-full text-center",l),children:[r&&x.jsx("div",{className:w(g.image,y),children:r}),a&&x.jsx("div",{className:w(g.title,"mb-2 text-main"),children:a}),c&&x.jsx("div",{className:w(g.description,"text-muted"),children:c}),u&&x.jsx("div",{className:"mt-20",children:u})]})}function X(r,a){switch(r){case"xs":return{image:a||"h-60",title:"text-sm",description:"text-xs"};case"sm":return{image:a||"h-80",title:"text-base",description:"text-sm"};default:return{image:a||"h-128",title:"text-lg",description:"text-base"}}}function ue(r,a,c=[],u=!1){const l=(p,d,y)=>{c.includes(p)||p==="captcha_token"||u&&!(p in a.getValues())?R.danger(d):a.setError(p,{message:d},{shouldFocus:y})};if(a&&N.isAxiosError(r)&&r.response){const p=r.response.data;Y(p.errors)?B(r):Object.entries(p.errors||{}).forEach(([d,y],g)=>{typeof y=="string"?l(d,y,g===0):y.forEach((q,o)=>{l(d,q,g===0&&o===0)})})}}function Y(r){return!r||Array.isArray(r)&&r.length===0||Object.keys(r).length===0}const le=F.memo(({src:r,className:a,height:c="h-full"})=>{const u=b(r);return x.jsx("div",{className:w("svg-image-container inline-block bg-no-repeat",c,a),dangerouslySetInnerHTML:u?{__html:u}:void 0})}),K=new Map;function b(r){const[a,c]=F.useState(null);return F.useEffect(()=>{const u=K.get(r);if(u)typeof u=="string"?c(u):u.then(c);else{const l=j(r);K.set(r,l),l.then(p=>{K.set(r,p),c(p)})}},[r]),a}function j(r){return fetch(r).then(a=>a.text())}var P,T;function ee(){if(T)return P;T=1;function r(t,e){var i,s;if(typeof e=="function")s=e(t),s!==void 0&&(t=s);else if(Array.isArray(e))for(i=0;i<e.length;i++)s=e[i](t),s!==void 0&&(t=s);return t}function a(t,e){return t[0]==="-"&&Array.isArray(e)&&/^-\d+$/.test(t)?e.length+parseInt(t,10):t}function c(t){return/^\d+$/.test(t)}function u(t){return Object.prototype.toString.call(t)==="[object Object]"}function l(t){return Object(t)===t}function p(t){return Object.keys(t).length===0}var d=["__proto__","prototype","constructor"],y=function(t){return d.indexOf(t)===-1};function g(t,e){t.indexOf("[")>=0&&(t=t.replace(/\[/g,e).replace(/]/g,""));var i=t.split(e),s=i.filter(y);if(s.length!==i.length)throw Error("Refusing to update blacklisted property "+t);return i}var q=Object.prototype.hasOwnProperty;function o(t,e,i,s){if(!(this instanceof o))return new o(t,e,i,s);typeof e>"u"&&(e=!1),typeof i>"u"&&(i=!0),typeof s>"u"&&(s=!0),this.separator=t||".",this.override=e,this.useArray=i,this.useBrackets=s,this.keepArray=!1,this.cleanup=[]}var m=new o(".",!1,!0,!0);function h(t){return function(){return m[t].apply(m,arguments)}}return o.prototype._fill=function(t,e,i,s){var n=t.shift();if(t.length>0){if(e[n]=e[n]||(this.useArray&&c(t[0])?[]:{}),!l(e[n]))if(this.override)e[n]={};else{if(!(l(i)&&p(i)))throw new Error("Trying to redefine `"+n+"` which is a "+typeof e[n]);return}this._fill(t,e[n],i,s)}else{if(!this.override&&l(e[n])&&!p(e[n])){if(!(l(i)&&p(i)))throw new Error("Trying to redefine non-empty obj['"+n+"']");return}e[n]=r(i,s)}},o.prototype.object=function(t,e){var i=this;return Object.keys(t).forEach(function(s){var n=e===void 0?null:e[s],f=g(s,i.separator).join(i.separator);f.indexOf(i.separator)!==-1?(i._fill(f.split(i.separator),t,t[s],n),delete t[s]):t[s]=r(t[s],n)}),t},o.prototype.str=function(t,e,i,s){var n=g(t,this.separator).join(this.separator);return t.indexOf(this.separator)!==-1?this._fill(n.split(this.separator),i,e,s):i[t]=r(e,s),i},o.prototype.pick=function(t,e,i,s){var n,f,O,v,E;for(f=g(t,this.separator),n=0;n<f.length;n++)if(v=a(f[n],e),e&&typeof e=="object"&&v in e){if(n===f.length-1)return i?(O=e[v],s&&Array.isArray(e)?e.splice(v,1):delete e[v],Array.isArray(e)&&(E=f.slice(0,-1).join("."),this.cleanup.indexOf(E)===-1&&this.cleanup.push(E)),O):e[v];e=e[v]}else return;return i&&Array.isArray(e)&&(e=e.filter(function(C){return C!==void 0})),e},o.prototype.delete=function(t,e){return this.remove(t,e,!0)},o.prototype.remove=function(t,e,i){var s;if(this.cleanup=[],Array.isArray(t)){for(s=0;s<t.length;s++)this.pick(t[s],e,!0,i);return i||this._cleanup(e),e}else return this.pick(t,e,!0,i)},o.prototype._cleanup=function(t){var e,i,s,n;if(this.cleanup.length){for(i=0;i<this.cleanup.length;i++)s=this.cleanup[i].split("."),n=s.splice(0,-1).join("."),e=n?this.pick(n,t):t,e=e[s[0]].filter(function(f){return f!==void 0}),this.set(this.cleanup[i],e,t);this.cleanup=[]}},o.prototype.del=o.prototype.remove,o.prototype.move=function(t,e,i,s,n){return typeof s=="function"||Array.isArray(s)?this.set(e,r(this.pick(t,i,!0),s),i,n):(n=s,this.set(e,this.pick(t,i,!0),i,n)),i},o.prototype.transfer=function(t,e,i,s,n,f){return typeof n=="function"||Array.isArray(n)?this.set(e,r(this.pick(t,i,!0),n),s,f):(f=n,this.set(e,this.pick(t,i,!0),s,f)),s},o.prototype.copy=function(t,e,i,s,n,f){return typeof n=="function"||Array.isArray(n)?this.set(e,r(JSON.parse(JSON.stringify(this.pick(t,i,!1))),n),s,f):(f=n,this.set(e,this.pick(t,i,!1),s,f)),s},o.prototype.set=function(t,e,i,s){var n,f,O,v;if(typeof e>"u")return i;for(O=g(t,this.separator),n=0;n<O.length;n++){if(v=O[n],n===O.length-1)if(s&&u(e)&&u(i[v]))for(f in e)q.call(e,f)&&(i[v][f]=e[f]);else if(s&&Array.isArray(i[v])&&Array.isArray(e))for(var E=0;E<e.length;E++)i[O[n]].push(e[E]);else i[v]=e;else(!q.call(i,v)||!u(i[v])&&!Array.isArray(i[v]))&&(/^\d+$/.test(O[n+1])?i[v]=[]:i[v]={});i=i[v]}return i},o.prototype.transform=function(t,e,i){return e=e||{},i=i||{},Object.keys(t).forEach((function(s){this.set(t[s],this.pick(s,e),i)}).bind(this)),i},o.prototype.dot=function(t,e,i){e=e||{},i=i||[];var s=Array.isArray(t);return Object.keys(t).forEach((function(n){var f=s&&this.useBrackets?"["+n+"]":n;if(l(t[n])&&(u(t[n])&&!p(t[n])||Array.isArray(t[n])&&!this.keepArray&&t[n].length!==0))if(s&&this.useBrackets){var O=i[i.length-1]||"";return this.dot(t[n],e,i.slice(0,-1).concat(O+f))}else return this.dot(t[n],e,i.concat(f));else s&&this.useBrackets?e[i.join(this.separator).concat("["+n+"]")]=t[n]:e[i.concat(f).join(this.separator)]=t[n]}).bind(this)),e},o.pick=h("pick"),o.move=h("move"),o.transfer=h("transfer"),o.transform=h("transform"),o.copy=h("copy"),o.object=h("object"),o.str=h("str"),o.set=h("set"),o.delete=h("delete"),o.del=o.remove=h("remove"),o.dot=h("dot"),["override","overwrite"].forEach(function(t){Object.defineProperty(o,t,{get:function(){return m.override},set:function(e){m.override=!!e}})}),["useArray","keepArray","useBrackets"].forEach(function(t){Object.defineProperty(o,t,{get:function(){return m[t]},set:function(e){m[t]=e}})}),o._process=r,P=o,P}var te=ee();const re=L(te);function ie(r){const a=Q(),{user:c,hasPermission:u}=V();return F.useMemo(()=>{var d;if(!r)return null;const l=typeof r=="string"?(d=a.menus)==null?void 0:d.find(y=>{var g;return(g=y.positions)==null?void 0:g.includes(r)}):r,p=[];if(l){for(const y of l.items){const g=(y.roles||[]).every(m=>{var h;return(h=c==null?void 0:c.roles)==null?void 0:h.find(t=>t.id===m)}),q=(y.permissions||[]).every(m=>u(m)),o=!y.settings||Object.entries(y.settings).every(([m,h])=>re.pick(m,a)==h);!y.action||!g||!q||!o||!ne(y,c)||(c!=null&&c.id&&(y.action=y.action.replace(/{currentUser}/g,`${c.id}`)),p.push(y))}l.items=p}return l},[u,a,r,c])}function ne(r,a){var u;if(!r.subscriptionStatus)return!0;const c=!!((u=a==null?void 0:a.subscriptions)!=null&&u.find(l=>l.active));return r.subscriptionStatus==="subscribed"?c:!c}function fe({className:r,iconClassName:a,itemClassName:c,gap:u="gap-30",menu:l,orientation:p="horizontal",children:d,matchDescendants:y,onlyShowIcons:g,iconSize:q,unstyled:o=!1,defaultIcons:m}){const h=ie(l);return h?x.jsx("div",{className:w("flex",u,p==="vertical"?"flex-col items-start":"items-center",r),"data-menu-id":h.id,children:h.items.map(t=>{const e={item:t,unstyled:o,onlyShowIcon:g,matchDescendants:y,iconClassName:a,iconSize:q,defaultIcons:m,className:i=>typeof c=="function"?c({...i,item:t}):c};return d?d(t,e):x.jsx(se,{...e},t.id)})}):null}const se=F.forwardRef(({item:r,className:a,matchDescendants:c,unstyled:u,onlyShowIcon:l,iconClassName:p,iconSize:d="sm",extraContent:y,position:g="relative",defaultIcons:q,icon:o,...m},h)=>{const t=x.jsx(J,{message:r.label});let e=null;if(o)e=o;else if(r.icon){const f=U(r.icon);e=f&&x.jsx(f,{size:d,className:p})}else if(q){const f=q[r.action.split("?")[0]];e=f&&x.jsx(f,{size:d,className:p})}e&&l&&t&&(e=x.jsx(G,{label:t,placement:"right",children:e}));const i=x.jsxs(F.Fragment,{children:[e,(!e||!l)&&t]}),s=!u&&"whitespace-nowrap flex items-center justify-start gap-10",n=!u&&"outline-none focus-visible:ring-2";return r.type==="link"?x.jsxs("a",{className:w(s,a==null?void 0:a({isActive:!1}),n,g),href:r.action,target:r.target,"data-menu-item-id":r.id,ref:h,...m,children:[y,i]}):x.jsxs(Z,{end:typeof c=="function"?c(r.action):c,className:f=>w(s,a==null?void 0:a(f),n,g),to:r.action,target:r.target,"data-menu-item-id":r.id,ref:h,...m,children:[y,i]})});export{fe as C,oe as I,le as S,se as a,re as d,ce as h,ue as o,ie as u,W as v};
