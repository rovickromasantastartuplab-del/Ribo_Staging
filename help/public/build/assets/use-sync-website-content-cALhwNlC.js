import{al as h,r as b,d as v,j as e,am as S,an as C,T as s,ap as w,aP as A,F as o,bB as F,aK as D,ae as E,A as I,t as l,m as d,aq as T,B as c,i as m,s as u,q as p,k as g,z as W}from"./client-DtfdVV77.js";import{g as x}from"./main-BGmGAxtx.js";import{A as q}from"./accordtion-animation-BGCK95Hj.js";import{F as i}from"./radio-DP8xYP6t.js";import{F as z}from"./radio-group-C_T7jNq6.js";function L(){const{formId:a,close:t}=h(),r=k(),[n,f]=b.useState(!1),j=v({defaultValues:{scanType:"nested",scrapeConfig:{contentCssSelector:""}}});return e.jsxs(S,{size:"lg",children:[e.jsx(C,{showDivider:!0,children:e.jsx(s,{message:"Add website"})}),e.jsx(w,{children:e.jsxs(A,{form:j,id:a,onSubmit:y=>{r.mutate(y,{onSuccess:()=>{l(d("Website queued for ingestion")),t()}})},children:[e.jsx(o,{name:"url",autoFocus:!0,label:e.jsx(s,{message:"Enter the URL of the site you want to sync"}),placeholder:"https://myhelpcenter.com",type:"url",description:e.jsx(s,{message:"Only publicly accessible URLs are supported."})}),e.jsxs(z,{name:"scanType",size:"sm",orientation:"vertical",className:"mt-24",children:[e.jsx(i,{value:"nested",children:e.jsx(s,{message:"Scan only child pages of specified url."})}),e.jsx(i,{value:"full",children:e.jsx(s,{message:"Scan all pages of specified domain."})}),e.jsx(i,{value:"single",children:e.jsx(s,{message:"Scan only specified url"})})]}),e.jsxs(F,{onClick:()=>f(!n),className:"mt-16 gap-4 font-semibold",children:[e.jsx(s,{message:"Advanced options"}),n?e.jsx(E,{size:"sm"}):e.jsx(D,{size:"sm"})]}),e.jsx(I,{initial:!1,children:e.jsx(K,{isExpanded:n})})]})}),e.jsxs(T,{dividerTop:!0,children:[e.jsx(c,{onClick:()=>t(),children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{type:"submit",form:a,variant:"flat",color:"primary",disabled:r.isPending,children:e.jsx(s,{message:"Sync"})})]})]})}function K({isExpanded:a}){return e.jsxs(W.div,{className:"pt-16",variants:q.variants,transition:{type:"tween",duration:.1},initial:!1,animate:a?"open":"closed",children:[e.jsx(o,{name:"scrapeConfig.contentCssSelector",label:e.jsx(s,{message:"Content CSS selector"}),placeholder:".main-content",size:"sm",className:"mb-16",description:e.jsx(s,{message:"When specified, only content inside this selector will be extracted. Leave empty to extract content from the entire page. Must be a valid CSS selector as accepted by the document.querySelectorAll() function."})}),e.jsx(o,{name:"scrapeConfig.cssSelectorsToExclude",label:e.jsx(s,{message:"CSS selectors to exclude"}),placeholder:"footer, navbar, .sidebar",size:"sm",description:e.jsx(s,{message:"Add a list of CSS selectors you want to ignore when scraping content. We already exclude some elements like navigation, scripts, footer, inline images etc. "})})]})}function k(){return m({mutationFn:a=>g.post("lc/ai-agent/ingest/website",a).then(t=>t.data),onSuccess:()=>{p.invalidateQueries({queryKey:x.knowledge.invalidateKey})},onError:a=>u(a)})}function Q(){return m({mutationFn:async({websiteId:a})=>g.post(`lc/ai-agent/websites/${a}/sync`),onSuccess:()=>(l(d("Website sync started")),p.invalidateQueries({queryKey:x.knowledge.invalidateKey})),onError:a=>u(a)})}export{L as I,Q as u};
