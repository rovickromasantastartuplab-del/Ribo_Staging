import{j as e,T as n,L as d,r,b7 as x,B as g,aw as p,aj as w,ax as u,az as c,ak as A,i as I,s as k,t as D,m as P,q as z,k as C,av as f,b3 as M,al as N}from"./client-DtfdVV77.js";import{P as R}from"./toggle-preview-button-BfqVe6Bw.js";import{u as a}from"./useSuspenseQuery-Bmt2-NKx.js";import{A as T}from"./ai-agent-page-header-B8HWeYwY.js";import{g as o,A as W,b as _}from"./main-BGmGAxtx.js";import{K as j,a as m,D as K}from"./documents-knowledge-section-VwAOzQz5.js";import{u as F,a as L}from"./use-uningest-articles-Dh8nNRJx.js";import{L as E}from"./library-icon-h4d3s9Ef.js";import{A as b}from"./Article-CQpfLMan.js";import{C as h}from"./UploadFile-DLR78p2b.js";import{M as v}from"./MoreVert-BVDYtk4z.js";import{u as O,a as U}from"./use-ingest-snippets-BKJYuAiA.js";import{A as V}from"./Add-B1HfWgJf.js";import{D as $}from"./Delete-DWP7kvj0.js";import{P as S}from"./Public-BJppe_Yn.js";import{S as q}from"./Sync-8LVFzqtm.js";import{C as Q}from"./confirmation-dialog-BzXs9ksK.js";import{I as B,u as H}from"./use-sync-website-content-cALhwNlC.js";import"./preview-messages-B_u8VttT.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./RestartAlt-DTi82oFC.js";import"./use-is-module-installed-CDjratdW.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./messages-square-icon-D_3IR-rK.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./custom-menu-Dvq-fOnC.js";import"./admin-config-DXsixO44.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./use-url-backed-tabs-BirCk8wN.js";import"./tabs-spjnXvK6.js";import"./book-open-D91H26Dq.js";import"./file-upload-provider-B4w-VsYu.js";import"./uploaded-file-DOXWsty7.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./file-type-icon-CNIGAaMG.js";import"./shallow-BH2jDtXM.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./use-droppable-CpvjuNXE.js";import"./open-upload-window-DE9Q8gNs.js";import"./index.module-BtHqevI0.js";import"./PriorityHigh-BG38_UZP.js";import"./knowledge-preview-layout-BaDxG9wp.js";import"./Visibility-BlnkCOzB.js";import"./accordtion-animation-BGCK95Hj.js";import"./radio-DP8xYP6t.js";import"./radio-group-C_T7jNq6.js";function Y(){const{data:s}=a(o.knowledge.index());return e.jsxs(j,{icon:e.jsx(E,{size:"md"}),title:e.jsx(d,{to:"../knowledge/articles",className:"hover:underline",children:e.jsx(n,{message:"Articles"})}),description:e.jsx(n,{message:"Use content from the articles in your help center"}),action:e.jsx(G,{}),children:[s.articles.items.map(t=>e.jsx(X,{article:t},t.id)),e.jsx(J,{})]})}function G(){const{data:s}=a(o.knowledge.index()),t=F(),i=L(),l=t.isPending||i.isPending||(s==null?void 0:s.articles.ingesting);return e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(g,{elementType:d,to:"../knowledge/articles",size:"xs",variant:"outline",children:e.jsx(n,{message:"Manage articles"})}),e.jsxs(p,{children:[e.jsx(w,{size:"xs",variant:"outline",disabled:l,children:e.jsx(v,{})}),e.jsxs(u,{children:[e.jsx(c,{value:"enable",onSelected:()=>t.mutate({all:!0}),children:e.jsx(n,{message:"Enable all articles for AI agent"})}),e.jsx(c,{value:"disable",onSelected:()=>i.mutate({all:!0}),children:e.jsx(n,{message:"Disable all articles for AI agent"})})]})]})]})}function J(){const{data:s}=a(o.knowledge.index());return s!=null&&s.articles.more.count?e.jsx(m,{scanPending:s.articles.more.ingesting,to:"../knowledge/articles",name:e.jsx(n,{message:"And :count more articles",values:{count:s.articles.more.count}}),icon:e.jsx(h,{size:"sm"})}):null}function X({article:s}){return e.jsx(m,{name:s.title,to:`../knowledge/articles/${s.id}/edit`,icon:e.jsx(b,{}),scanPending:s.scan_pending,description:e.jsx(r.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Updated: :date",values:{date:e.jsx(x,{date:s.updated_at})}})})})}const Z=r.forwardRef((s,t)=>e.jsxs(A,{...s,ref:t,children:[e.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"2"}),e.jsx("circle",{cx:"8",cy:"8",r:"2"}),e.jsx("path",{d:"M9.414 9.414 12 12"}),e.jsx("path",{d:"M14.8 14.8 18 18"}),e.jsx("circle",{cx:"8",cy:"16",r:"2"}),e.jsx("path",{d:"m18 6-8.586 8.586"})]}));function ee(){const{data:s}=a(o.knowledge.index());return e.jsxs(j,{icon:e.jsx(Z,{size:"md"}),title:e.jsx(d,{to:"../knowledge/snippets",className:"hover:underline",children:e.jsx(n,{message:"Snippets"})}),description:e.jsx(n,{message:"Add custom FAQs, answers or other snippets."}),action:e.jsx("div",{children:e.jsx(se,{})}),children:[s==null?void 0:s.snippets.items.map(t=>e.jsx(te,{snippet:t},t.id)),e.jsx(ne,{})]})}function se(){const{data:s}=a(o.knowledge.index()),t=O(),i=U(),l=t.isPending||i.isPending||(s==null?void 0:s.snippets.ingesting);return e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(g,{elementType:d,to:"../knowledge/snippets",size:"xs",variant:"outline",children:e.jsx(n,{message:"Manage snippets"})}),e.jsxs(p,{children:[e.jsx(w,{size:"xs",variant:"outline",disabled:l,children:e.jsx(v,{})}),e.jsxs(u,{children:[e.jsx(c,{value:"enable",onSelected:()=>t.mutate({all:!0}),children:e.jsx(n,{message:"Enable all snippets for AI agent"})}),e.jsx(c,{value:"disable",onSelected:()=>i.mutate({all:!0}),children:e.jsx(n,{message:"Disable all snippets for AI agent"})})]})]})]})}function ne(){const{data:s}=a(o.knowledge.index());return s!=null&&s.snippets.more.count?e.jsx(m,{scanPending:s.snippets.more.ingesting,to:"../knowledge/snippets",name:e.jsx(n,{message:"And :count more snippets",values:{count:s.snippets.more.count}}),icon:e.jsx(h,{size:"sm"})}):null}function te({snippet:s}){return e.jsx(m,{name:s.title,to:`../knowledge/snippets/${s.id}/edit`,icon:e.jsx(b,{}),scanPending:s.scan_pending,description:e.jsx(r.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Updated: :date",values:{date:e.jsx(x,{date:s.updated_at})}})})})}function ie(){return I({mutationFn:async({websiteId:s})=>C.delete(`lc/ai-agent/websites/${s}`),onSuccess:()=>{D(P("Website deleted")),z.invalidateQueries({queryKey:o.knowledge.invalidateKey})},onError:s=>k(s)})}function oe(){const{data:s}=a(o.knowledge.index());return e.jsxs(j,{icon:e.jsx(S,{size:"md"}),title:e.jsx(d,{to:"../knowledge/websites",className:"hover:underline",children:e.jsx(n,{message:"Websites"})}),description:e.jsx(n,{message:"Sync content from a public website"}),action:e.jsxs(f,{type:"modal",children:[e.jsx(g,{startIcon:e.jsx(V,{}),variant:"outline",size:"xs",children:e.jsx(n,{message:"Add website"})}),e.jsx(B,{})]}),children:[s==null?void 0:s.websites.items.map(t=>e.jsx(re,{website:t},t.id)),e.jsx(ae,{})]})}function ae(){const{data:s}=a(o.knowledge.index());if(!(s!=null&&s.websites.more.count))return null;const t="../knowledge/websites";return e.jsx(m,{scanPending:s.websites.more.ingesting,to:t,name:e.jsx(n,{message:"And :count more websites",values:{count:s.websites.more.count}}),icon:e.jsx(h,{size:"sm"}),actions:e.jsx(g,{variant:"outline",size:"xs",className:"min-w-96",elementType:d,to:t,children:e.jsx(n,{message:"View all"})})})}function re({website:s}){return e.jsx(m,{name:s.url,icon:e.jsx(S,{}),scanPending:s.scan_pending,description:e.jsx(r.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Last synced: :date",values:{date:e.jsx(x,{date:s.updated_at})}})}),to:`../knowledge/websites/${s.id}/pages`,actions:e.jsx(ce,{website:s})})}function ce({website:s}){const t=H(),[i,l]=r.useState(!1),y=M();return e.jsxs(r.Fragment,{children:[e.jsxs(p,{children:[e.jsx(g,{variant:"outline",size:"xs",endIcon:e.jsx(W,{}),children:e.jsx(n,{message:"Manage"})}),e.jsxs(u,{children:[e.jsx(c,{value:"resync",startIcon:e.jsx(q,{size:"sm"}),isDisabled:t.isPending||s.scan_pending,onSelected:()=>t.mutate({websiteId:s.id}),children:e.jsx(n,{message:"Re-sync"})}),e.jsx(c,{value:"view",startIcon:e.jsx(_,{size:"sm"}),onSelected:()=>{y(`../knowledge/websites/${s.id}/pages`)},children:e.jsx(n,{message:"View pages"})}),e.jsx(c,{value:"delete",startIcon:e.jsx($,{size:"sm"}),className:"text-danger",onSelected:()=>l(!0),children:e.jsx(n,{message:"Delete website"})})]})]}),i&&e.jsx(f,{type:"modal",isOpen:i,onOpenChange:l,children:e.jsx(le,{websiteId:s.id})})]})}function le({websiteId:s}){const t=ie(),{close:i}=N();return e.jsx(Q,{isLoading:t.isPending,isDanger:!0,title:e.jsx(n,{message:"Remove website"}),body:e.jsx(n,{message:"Are you sure you want to delete this website? This action cannot be undone."}),confirm:e.jsx(n,{message:"Delete"}),onConfirm:()=>{t.mutate({websiteId:s},{onSuccess:()=>i()})}})}function cs(){const{data:s}=a(o.knowledge.index()),[t,i]=r.useState(!1);return e.jsxs(r.Fragment,{children:[e.jsxs("div",{className:"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col",children:[e.jsx(T,{previewVisible:t,onTogglePreview:()=>i(!t)}),e.jsxs("div",{className:"flex-auto overflow-y-auto p-24",children:[s.ingesting&&e.jsx("div",{className:"mb-24 rounded-panel bg-[#feecaf] p-12 text-center text-sm font-medium dark:text-on-primary",children:e.jsx(n,{message:"Your content is currently being ingested. You will be notified once the ingestion is complete. In the meantime, AI agent may not have your latest content."})}),e.jsxs("div",{className:"space-y-24",children:[e.jsx(oe,{}),e.jsx(Y,{}),e.jsx(K,{}),e.jsx(ee,{})]})]})]}),t&&e.jsx(R,{onClose:()=>i(!1)})]})}export{cs as Component};
