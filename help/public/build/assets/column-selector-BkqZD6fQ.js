import{bf as g,r as x,j as s,ak as v,av as I,aj as c,am as y,ap as S,T as r,B as k,as as A}from"./client-DtfdVV77.js";import{d as u,u as j}from"./use-all-available-columns-CB_-a0g_.js";import{A as z}from"./Add-B1HfWgJf.js";import{D as R}from"./DragIndicator-CvftiD3i.js";import{u as D,m as L}from"./use-sortable-CsHM4tcn.js";import{d as p,e as h}from"./main-BGmGAxtx.js";function f(a,n){const[o,l]=g(`${a}-columns`,n??u),t=x.useCallback(()=>{l(n??u)},[a,n]);return[o??[],l,t]}const T=x.forwardRef((a,n)=>s.jsxs(v,{...a,ref:n,children:[s.jsx("path",{d:"M10.5 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v5.5"}),s.jsx("path",{d:"m14.3 19.6 1-.4"}),s.jsx("path",{d:"M15 3v7.5"}),s.jsx("path",{d:"m15.2 16.9-.9-.3"}),s.jsx("path",{d:"m16.6 21.7.3-.9"}),s.jsx("path",{d:"m16.8 15.3-.4-1"}),s.jsx("path",{d:"m19.1 15.2.3-.9"}),s.jsx("path",{d:"m19.6 21.7-.4-1"}),s.jsx("path",{d:"m20.7 16.8 1-.4"}),s.jsx("path",{d:"m21.7 19.4-.9-.3"}),s.jsx("path",{d:"M9 3v18"})]}));function P({tableName:a,defaultColumns:n,size:o="sm",...l}){const[t,m,d]=f(a,n),i=j().filter(e=>!t.includes(e.key));return s.jsxs(I,{type:"popover",children:[s.jsx(c,{size:o,...l,children:s.jsx(T,{})}),s.jsx(y,{size:"xs",children:s.jsxs(S,{padding:"px-8 py-16",children:[s.jsx("div",{className:"mb-4 px-18 text-sm font-semibold",children:s.jsx(r,{message:"Visible columns"})}),s.jsx(p,{children:t.map(e=>s.jsx(B,{columnKey:e,tableName:a},e))}),!!i.length&&s.jsxs("div",{className:"mt-24",children:[s.jsx("div",{className:"mb-4 px-18 text-sm font-semibold",children:s.jsx(r,{message:"Available columns"})}),s.jsx(p,{children:i.map(e=>s.jsx(h,{padding:"py-8 pr-12 pl-18",radius:"rounded-button",onSelected:()=>{m([...t,e.key])},endIcon:s.jsx(z,{className:"text-muted",size:"sm"}),children:s.jsx(r,{...e.label})},e.key))})]}),s.jsx(k,{className:"ml-16 mt-12",size:"xs",variant:"outline",color:"primary",onClick:()=>{d()},children:s.jsx(r,{message:"Reset to default"})})]})})]})}function B({columnKey:a,tableName:n}){const[o,l]=f(n),t=x.useRef(null),{sortableProps:m,dragHandleRef:d}=D({item:a,items:o,type:"conversationsTableSortable",ref:t,onSortEnd:(e,b)=>{l(L(o,e,b))}}),i=j().find(e=>e.key===a);return i?s.jsx(h,{padding:"py-4 px-8",radius:"rounded-button",ref:t,...m,startIcon:s.jsx(c,{ref:d,size:"xs",children:s.jsx(R,{})}),endSection:s.jsx(c,{size:"xs",iconSize:"sm",disabled:o.length===1,onClick:()=>{l(o.filter(e=>e!==a))},children:s.jsx(A,{})}),children:s.jsx(r,{...i.label})}):null}export{P as C,f as u};
