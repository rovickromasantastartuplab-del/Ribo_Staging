import{j as e,L as c,T as a,D as f,aj as w,b2 as u,m as r,b1 as x,r as n,aZ as C,av as S,B as P,al as T,i as k,s as v,k as F,q as E,t as L}from"./client-DtfdVV77.js";import{A}from"./admin-config-DXsixO44.js";import{I,i as B,j as q,l as M,c as y}from"./main-BGmGAxtx.js";import{a as H}from"./name-with-avatar-D8NZSkGp.js";import{L as N}from"./external-link-Cxcw6nc_.js";import{E as _}from"./Edit-BaEHOLuK.js";import{D as O}from"./settings-links-CRsxvJIZ.js";import{G as R}from"./global-loading-progress-DVC8NxPo.js";import{D as U}from"./data-table-add-item-button-B_2m2pad.js";import{D as Q}from"./data-table-header-CdCZHch7.js";import{D as W}from"./data-table-pagination-footer-B4yyc06A.js";import{u as V}from"./use-datatable-search-params-dzq5X78n.js";import{D as $}from"./data-table-emty-state-message-DsPxSC6g.js";import{D as z}from"./datatable-filters-KJfH8nG0.js";import{a as G,D as K,b as Z,c as J}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as X}from"./use-datatable-query-v3pOHYke.js";import{T as Y}from"./table-CynOKbaN.js";import{C as ee}from"./confirmation-dialog-BzXs9ksK.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./custom-menu-Dvq-fOnC.js";import"./skeleton-D178v0-U.js";import"./book-open-D91H26Dq.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./formatted-number-CIAFur2S.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";const te=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(a,{message:"Slug"}),body:t=>e.jsx(c,{target:"_blank",to:`/pages/${t.slug}`,className:N,children:t.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(a,{message:"Owner"}),body:t=>t.user&&e.jsx(H,{image:t.user.image,label:t.user.name,description:t.user.email,avatarCircle:!0})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(a,{message:"Type"}),body:t=>e.jsx(a,{message:t.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(f,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:t=>e.jsx(w,{size:"md",className:"text-muted",elementType:c,to:`${t.id}/edit`,children:e.jsx(_,{})})}],ae=""+new URL("articles-sEigaVBk.svg",import.meta.url).href,se=t=>{const o=t.customPages.types.length>1?[{control:{type:x.Select,defaultValue:"default",options:t.customPages.types.map(s=>({value:s.type,label:s.label,key:s.type}))},key:"type",label:r("Type"),description:r("Type of the page"),defaultOperator:u.eq}]:[];return[{key:"user_id",label:r("User"),description:r("User page was created by"),defaultOperator:u.eq,control:{type:x.SelectModel,model:I}},...o,B({description:r("Date page was created")}),q({description:r("Date page was last updated")})]};function et(){const t=n.useContext(M),[o,s]=n.useState([]),{searchParams:i,sortDescriptor:m,mergeIntoSearchParams:d,setSearchQuery:h,isFiltering:j}=V(C),g=n.useMemo(()=>se(t),[t]),l=X({...y.customPages.index({...i})}),b=e.jsxs(S,{type:"modal",children:[e.jsx(P,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(oe,{selectedIds:o,onDelete:()=>s([])})]}),D=e.jsx(n.Fragment,{children:e.jsx(U,{elementType:c,to:"new",children:e.jsx(a,{message:"New page"})})});return e.jsxs(G,{children:[e.jsx(R,{query:l}),e.jsx(K,{title:e.jsx(a,{message:"Custom pages"}),showSidebarToggleButton:!0,rightContent:e.jsx(O,{variant:"button",link:A.pages.customPages,size:"xs"})}),e.jsxs(Z,{children:[e.jsx(Q,{searchValue:i.query,onSearchChange:h,actions:D,selectedItems:o,selectedActions:b,filters:g}),e.jsx(z,{filters:g}),e.jsxs(J,{children:[e.jsx(Y,{columns:te,data:l.items,sortDescriptor:m,onSortChange:d,enableSelection:!0,selectedRows:o,onSelectionChange:s}),l.isEmpty&&e.jsx($,{isFiltering:j,image:ae,title:e.jsx(a,{message:"No pages have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching pages"})}),e.jsx(W,{query:l,onPageChange:p=>d({page:p}),onPerPageChange:p=>d({perPage:p})})]})]})]})}function oe({selectedIds:t,onDelete:o}){const{close:s}=T(),i=k({mutationFn:()=>F.delete(`custom-pages/${t.join(",")}`).then(m=>m.data),onSuccess:()=>{E.invalidateQueries({queryKey:y.customPages.invalidateKey}),L(r("Pages deleted")),o(),s()},onError:m=>v(m)});return e.jsx(ee,{isLoading:i.isPending,onConfirm:()=>i.mutate(),title:e.jsx(a,{message:"Delete pages"}),body:e.jsx(a,{message:"Are you sure you want to delete selected pages?"}),confirm:e.jsx(a,{message:"Delete"})})}export{et as Component};
