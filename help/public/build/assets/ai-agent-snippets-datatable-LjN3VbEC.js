import{Y as D,r as x,i as S,s as w,m as r,q as I,t as C,k as v,j as e,av as T,B as h,T as s,al as k,bX as P,b1 as A,b2 as _,aZ as B,L as c,aX as m,aQ as j,as as b,D as R,aj as E,aw as z,ae as F,ax as N,az as p}from"./client-DtfdVV77.js";import{g as H,h as Q,i as q}from"./main-BGmGAxtx.js";import{u as M,a as K}from"./use-ingest-snippets-BKJYuAiA.js";import{o as L}from"./online-articles-CqWeBVNj.js";import{G as $}from"./global-loading-progress-DVC8NxPo.js";import{D as W}from"./data-table-add-item-button-B_2m2pad.js";import{D as G}from"./data-table-header-CdCZHch7.js";import{D as O}from"./data-table-pagination-footer-B4yyc06A.js";import{u as V}from"./use-datatable-search-params-dzq5X78n.js";import{D as X}from"./data-table-emty-state-message-DsPxSC6g.js";import{D as Y}from"./datatable-filters-KJfH8nG0.js";import{a as U,D as Z,b as J,c as ee}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{C as te}from"./confirmation-dialog-BzXs9ksK.js";import{D as se}from"./paginated-resources-DUi9UwyN.js";import{u as ae}from"./use-datatable-query-v3pOHYke.js";import{T as ne}from"./table-CynOKbaN.js";import{B as oe,a as u}from"./breadcrumb-CaNBY_Ut.js";import{E as re}from"./Edit-BaEHOLuK.js";import"./custom-menu-Dvq-fOnC.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./formatted-number-CIAFur2S.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";const f=D.createContext(null);function y(){return x.useContext(f)}function ie(){const{endpoint:t,selectedRows:n,setSelectedRows:a,baseQueryKey:o}=y();return S({mutationFn:()=>le(t,n),onSuccess:async()=>{await I.invalidateQueries({queryKey:se(t,void 0,o)}),C(r("Deleted [one 1 record|other :count records]",{values:{count:n.length}})),a([])},onError:i=>w(i,r("Could not delete records"))})}function le(t,n){return v.delete(`${t}/${n.join(",")}`).then(a=>a.data)}function de(){return e.jsxs(T,{type:"modal",children:[e.jsx(h,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(s,{message:"Delete"})}),e.jsx(ce,{})]})}function ce(){const t=ie(),{selectedRows:n,setSelectedRows:a}=y(),{close:o}=k();return e.jsx(te,{isLoading:t.isPending,title:e.jsx(s,{message:"Delete [one 1 item|other :count items]?",values:{count:n.length}}),body:e.jsx(s,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(s,{message:"Delete"}),isDanger:!0,onConfirm:()=>{t.mutate(void 0,{onSuccess:()=>o(),onError:i=>{P(i,422)&&(a([]),o())}})}})}const me=[{key:"name",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(s,{message:"Title"}),body:t=>e.jsx(c,{to:`../knowledge/snippets/${t.id}/edit`,className:"hover:underline",children:t.title})},{key:"fully_scanned",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(s,{message:"Status"}),body:t=>t.scan_pending?e.jsx(m,{color:"danger",size:"xs",children:e.jsx(s,{message:"Scan pending"})}):e.jsx(m,{color:"positive",size:"xs",children:e.jsx(s,{message:"Scanned"})})},{key:"used_by_ai_agent",allowsSorting:!0,width:"w-100 flex-shrink-0",header:()=>e.jsx(s,{message:"AI agent"}),body:t=>t.used_by_ai_agent?e.jsx(j,{size:"md",className:"text-positive"}):e.jsx(b,{size:"md",className:"text-muted"})},{key:"created_at",allowsSorting:!0,width:"w-144",header:()=>e.jsx(s,{message:"Scan date"}),body:t=>e.jsx("time",{children:e.jsx(R,{date:t.created_at})})},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),width:"w-42 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:t=>e.jsx("div",{className:"text-muted",children:e.jsx(E,{size:"md",elementType:c,to:`../knowledge/snippets/${t.id}/edit`,disabled:t.scan_pending,children:e.jsx(re,{})})})}],g=[{key:"scan_pending",label:r("Fully scanned"),description:r("Whether snippet is fully scanned"),defaultOperator:_.eq,control:{type:A.Select,defaultValue:"0",options:[{value:!0,label:"No",key:"1"},{value:!1,label:"Yes",key:"0"}]}},q({label:r("Creation date"),description:r("Date snippet was created")})];function at(){const{searchParams:t,sortDescriptor:n,mergeIntoSearchParams:a,setSearchQuery:o,isFiltering:i}=V(B),l=ae(H.snippets.index(t));return e.jsxs(U,{children:[e.jsx($,{query:l}),e.jsx(Q,{children:e.jsx(s,{message:"Snippets"})}),e.jsx(Z,{showSidebarToggleButton:!0,children:e.jsxs(oe,{size:"xl",children:[e.jsx(u,{to:"../knowledge",children:e.jsx(s,{message:"Knowledge"})}),e.jsx(u,{to:"../knowledge/snippets",children:e.jsx(s,{message:"Snippets"})})]})}),e.jsxs(J,{children:[e.jsx(G,{searchValue:t.query,onSearchChange:o,filters:g,actions:e.jsx(pe,{}),selectedActions:e.jsx(ue,{})}),e.jsx(Y,{filters:g}),e.jsxs(ee,{children:[e.jsx(ne,{columns:me,data:l.items,sortDescriptor:n,onSortChange:a,cellHeight:"h-64"}),l.isEmpty?e.jsx(X,{isFiltering:i,image:L,title:e.jsx(s,{message:"No snippets have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching snippets"})}):null,e.jsx(O,{query:l,onPageChange:d=>a({page:d}),onPerPageChange:d=>a({perPage:d})})]})]})]})}function pe(){return e.jsx(W,{elementType:c,to:"new",children:e.jsx(s,{message:"Add snippet"})})}function ue(){return e.jsxs("div",{className:"flex gap-8",children:[e.jsx(ge,{}),e.jsx(de,{})]})}function ge(){const t=M(),n=K(),{selectedRows:a,setSelectedRows:o}=x.useContext(f);return e.jsxs(z,{children:[e.jsx(h,{variant:"flat",color:"chip",endIcon:e.jsx(F,{}),disabled:t.isPending||n.isPending,children:e.jsx(s,{message:"Change AI agent state"})}),e.jsxs(N,{children:[e.jsx(p,{value:"enable",startIcon:e.jsx(j,{size:"sm"}),onSelected:()=>t.mutate({snippetIds:a},{onSuccess:()=>o([])}),children:e.jsx(s,{message:"Enable for AI agent"})}),e.jsx(p,{value:"disable",startIcon:e.jsx(b,{size:"sm"}),onSelected:()=>n.mutate({snippetIds:a},{onSuccess:()=>o([])}),children:e.jsx(s,{message:"Disable for AI agent"})})]})]})}export{at as Component};
