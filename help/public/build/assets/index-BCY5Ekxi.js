import{q as F,c as _,m as A,N as I,P as lt,j as ut,T as Z,t as ne,h as yn,r as se,g as Ln,D as bn,s as Ke,v as Tn,w as q,x as K,y as V,z as vn,i as An,f as En,A as Cn,B as Mn,C as xn,G as Sn,H as In,I as Fe,J as re,K as wn,L as Hn,O as We,Q as Rn,U as xe}from"./index-uUjpwT6n.js";import{H as Ge,j as Nn,t as On,x as Pn,c as _n,p as Dn,s as $n,b as Bn,r as jn,a as zn,d as Un,e as Kn}from"./core-l5OAWFa0.js";import{D as Fn,d as Wn,G as Gn,U as qn,e as Vn,f as Qn,g as Jn}from"./index-Y7xUBCAo.js";var Xn=20,qe=(t,e=0)=>{const n=[];return!t.children.length||e>Xn||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...qe(r,e+1))}),n},Yn=t=>{if(!t.children.length)return;const e=qe(t);e&&e.forEach(n=>{var r,s;const i=n.getAttribute("style"),o=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${o};${i}`)})},Zn=F.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Yn(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",A(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),ts=_.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const i=r[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),es=_.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const i=r[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),ns=_.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),ss=_.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),rs=_.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});_.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(ts.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(es.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(ns.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(ss.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(rs.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(Zn.configure(this.options.textStyle)),t}});const Se={},is="hljs-";function os(t){const e=Ge.newInstance();return{highlight:n,highlightAuto:r,listLanguages:s,register:i,registerAlias:o,registered:a};function n(l,h,u){const c=u||Se,p=typeof c.prefix=="string"?c.prefix:is;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:as,classPrefix:p});const f=e.highlight(h,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const k=f._emitter.root,m=k.data;return m.language=f.language,m.relevance=f.relevance,k}function r(l,h){const c=(h||Se).subset||s();let p=-1,f=0,k;for(;++p<c.length;){const m=c[p];if(!e.getLanguage(m))continue;const L=n(m,l,h);L.data&&L.data.relevance!==void 0&&L.data.relevance>f&&(f=L.data.relevance,k=L)}return k||{type:"root",children:[],data:{language:void 0,relevance:f}}}function s(){return e.listLanguages()}function i(l,h){if(typeof l=="string")e.registerLanguage(l,h);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function o(l,h){if(typeof l=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const c=l[u];e.registerAliases(typeof c=="string"?c:[...c],{languageName:u})}}}function a(l){return!!e.getLanguage(l)}}class as{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],s=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:s}):r.children.push(...s)}openNode(e){const n=this,r=e.split(".").map(function(o,a){return a?o+"_".repeat(a):n.options.classPrefix+o}),s=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const w=os();w.register("javascript",Nn);w.register("typescript",On);w.register("html",Pn);w.register("css",_n);w.register("php",Dn);w.register("shell",$n);w.register("bash",Bn);w.register("ruby",jn);w.register("python",zn);w.register("java",Un);w.register("c",Kn);var Qt=4,ls=/^```([a-z]+)?[\s\n]$/,us=/^~~~([a-z]+)?[\s\n]$/,Ve=I.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Qt,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",A(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Qt,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:h,to:u}=s,f=r.doc.textBetween(h,u,`
`,`
`).split(`
`).map(k=>a+k).join(`
`);return l.replaceWith(h,u,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Qt,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:h}=i,u=i.start(),c=i.end(),f=r.doc.textBetween(u,c,`
`,`
`).split(`
`);let k=0,m=0;const L=h-u;for(let C=0;C<f.length;C+=1){if(m+f[C].length>=L){k=C;break}m+=f[C].length+1}const v=((l=f[k].match(/^ */))==null?void 0:l[0])||"",Q=Math.min(v.length,n);if(Q===0)return!0;let D=u;for(let C=0;C<k;C+=1)D+=f[C].length+1;return a.delete(D,D+Q),h-D<=Q&&a.setSelection(Z.create(a.doc,D)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:h}=s,p=r.doc.textBetween(l,h,`
`,`
`).split(`
`).map(f=>{var k;const m=((k=f.match(/^ */))==null?void 0:k[0])||"",L=Math.min(m.length,n);return f.slice(L)}).join(`
`);return a.replaceWith(l,h,r.schema.text(p)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:h})=>(h.setSelection(yn.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[ne({find:ls,type:this.type,getAttributes:t=>({language:t[1]})}),ne({find:us,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new lt({key:new ut("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Z.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),cs=Ve;function Qe(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?Qe(n.children,r):{text:n.value,classes:r}})}function Ie(t){return t.value||t.children||[]}function ds(t){return!!Ge.getLanguage(t)}function we({doc:t,name:e,lowlight:n,defaultLanguage:r}){const s=[];return se(t,i=>i.type.name===e).forEach(i=>{var o;let a=i.pos+1;const l=i.node.attrs.language||r,h=n.listLanguages(),u=l&&(h.includes(l)||ds(l)||(o=n.registered)!=null&&o.call(n,l))?Ie(n.highlight(l,i.node.textContent)):Ie(n.highlightAuto(i.node.textContent));Qe(u).forEach(c=>{const p=a+c.text.length;if(c.classes.length){const f=Ln.inline(a,p,{class:c.classes.join(" ")});s.push(f)}a=p})}),bn.create(t,s)}function hs(t){return typeof t=="function"}function ps({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(s=>hs(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new lt({key:new ut("lowlight"),state:{init:(s,{doc:i})=>we({doc:i,name:t,lowlight:e,defaultLanguage:n}),apply:(s,i,o,a)=>{const l=o.selection.$head.parent.type.name,h=a.selection.$head.parent.type.name,u=se(o.doc,p=>p.type.name===t),c=se(a.doc,p=>p.type.name===t);return s.docChanged&&([l,h].includes(t)||c.length!==u.length||s.steps.some(p=>p.from!==void 0&&p.to!==void 0&&u.some(f=>f.pos>=p.from&&f.pos+f.node.nodeSize<=p.to)))?we({doc:s.doc,name:t,lowlight:e,defaultLanguage:n}):i.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}var fs=cs.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],ps({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),Mr=fs,gs=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,ms=I.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",A(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,i,o;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",h=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return h?`![${l}](${a} "${h}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o})=>{const a=document.createElement("img");Object.entries(o).forEach(([u,c])=>{if(c!=null)switch(u){case"width":case"height":break;default:a.setAttribute(u,c);break}}),a.src=o.src;const l=new Tn({element:a,node:s,getPos:i,onResize:(u,c)=>{a.style.width=`${u}px`,a.style.height=`${c}px`},onCommit:(u,c)=>{const p=i();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:u,height:c}).run()},onUpdate:(u,c,p)=>u.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),h=l.dom;return h.style.visibility="hidden",h.style.pointerEvents="none",a.onload=()=>{h.style.visibility="",h.style.pointerEvents=""},l}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Ke({find:gs,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),xr=ms,mt=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},ks=/^\s*>\s$/,ys=I.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return mt("blockquote",{...A(this.options.HTMLAttributes,t),children:mt("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[q({find:ks,type:this.type})]}}),Ls=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,bs=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Ts=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vs=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,As=F.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return mt("strong",{...A(this.options.HTMLAttributes,t),children:mt("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[V({find:Ls,type:this.type}),V({find:Ts,type:this.type})]},addPasteRules(){return[K({find:bs,type:this.type}),K({find:vs,type:this.type})]}}),Es=/(^|[^`])`([^`]+)`(?!`)$/,Cs=/(^|[^`])`([^`]+)`(?!`)/g,Ms=F.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",A(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[V({find:Es,type:this.type})]},addPasteRules(){return[K({find:Cs,type:this.type})]}}),xs=I.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",A(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:u})=>{if(u&&l&&o){const c=l.filter(p=>a.includes(p.type.name));h.ensureMarks(c)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ss=I.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,A(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ne({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Is=I.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",A(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!vn(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return An(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,h=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Z.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(En.create(o.doc,l.pos)):o.setSelection(Z.create(o.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,c=u==null?void 0:u.create();c&&(o.insert(h,c),o.setSelection(Z.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ke({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),ws=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Hs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Rs=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ns=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Os=F.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",A(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[V({find:ws,type:this.type}),V({find:Rs,type:this.type})]},addPasteRules(){return[K({find:Hs,type:this.type}),K({find:Ns,type:this.type})]}});const Ps="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",_s="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",ie="numeric",oe="ascii",ae="alpha",tt="asciinumeric",Y="alphanumeric",le="domain",Je="emoji",Ds="scheme",$s="slashscheme",Jt="whitespace";function Bs(t,e){return t in e||(e[t]=[]),e[t]}function U(t,e,n){e[ie]&&(e[tt]=!0,e[Y]=!0),e[oe]&&(e[tt]=!0,e[ae]=!0),e[tt]&&(e[Y]=!0),e[ae]&&(e[Y]=!0),e[Y]&&(e[le]=!0),e[Je]&&(e[le]=!0);for(const r in e){const s=Bs(r,n);s.indexOf(t)<0&&s.push(t)}}function js(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function M(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}M.groups={};M.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||M.groups;let s;return e&&e.j?s=e:(s=new M(e),n&&r&&U(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||M.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new M,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new M,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(js(o.t,r),n);U(i,l,r)}else n&&U(i,n,r);o.t=i}return s.j[t]=o,o}};const g=(t,e,n,r,s)=>t.ta(e,n,r,s),T=(t,e,n,r,s)=>t.tr(e,n,r,s),He=(t,e,n,r,s)=>t.ts(e,n,r,s),d=(t,e,n,r,s)=>t.tt(e,n,r,s),P="WORD",ue="UWORD",Xe="ASCIINUMERICAL",Ye="ALPHANUMERICAL",ot="LOCALHOST",ce="TLD",de="UTLD",gt="SCHEME",G="SLASH_SCHEME",ge="NUM",he="WS",me="NL",et="OPENBRACE",nt="CLOSEBRACE",kt="OPENBRACKET",yt="CLOSEBRACKET",Lt="OPENPAREN",bt="CLOSEPAREN",Tt="OPENANGLEBRACKET",vt="CLOSEANGLEBRACKET",At="FULLWIDTHLEFTPAREN",Et="FULLWIDTHRIGHTPAREN",Ct="LEFTCORNERBRACKET",Mt="RIGHTCORNERBRACKET",xt="LEFTWHITECORNERBRACKET",St="RIGHTWHITECORNERBRACKET",It="FULLWIDTHLESSTHAN",wt="FULLWIDTHGREATERTHAN",Ht="AMPERSAND",Rt="APOSTROPHE",Nt="ASTERISK",B="AT",Ot="BACKSLASH",Pt="BACKTICK",_t="CARET",j="COLON",ke="COMMA",Dt="DOLLAR",H="DOT",$t="EQUALS",ye="EXCLAMATION",S="HYPHEN",st="PERCENT",Bt="PIPE",jt="PLUS",zt="POUND",rt="QUERY",Le="QUOTE",Ze="FULLWIDTHMIDDLEDOT",be="SEMI",R="SLASH",it="TILDE",Ut="UNDERSCORE",tn="EMOJI",Kt="SYM";var en=Object.freeze({__proto__:null,ALPHANUMERICAL:Ye,AMPERSAND:Ht,APOSTROPHE:Rt,ASCIINUMERICAL:Xe,ASTERISK:Nt,AT:B,BACKSLASH:Ot,BACKTICK:Pt,CARET:_t,CLOSEANGLEBRACKET:vt,CLOSEBRACE:nt,CLOSEBRACKET:yt,CLOSEPAREN:bt,COLON:j,COMMA:ke,DOLLAR:Dt,DOT:H,EMOJI:tn,EQUALS:$t,EXCLAMATION:ye,FULLWIDTHGREATERTHAN:wt,FULLWIDTHLEFTPAREN:At,FULLWIDTHLESSTHAN:It,FULLWIDTHMIDDLEDOT:Ze,FULLWIDTHRIGHTPAREN:Et,HYPHEN:S,LEFTCORNERBRACKET:Ct,LEFTWHITECORNERBRACKET:xt,LOCALHOST:ot,NL:me,NUM:ge,OPENANGLEBRACKET:Tt,OPENBRACE:et,OPENBRACKET:kt,OPENPAREN:Lt,PERCENT:st,PIPE:Bt,PLUS:jt,POUND:zt,QUERY:rt,QUOTE:Le,RIGHTCORNERBRACKET:Mt,RIGHTWHITECORNERBRACKET:St,SCHEME:gt,SEMI:be,SLASH:R,SLASH_SCHEME:G,SYM:Kt,TILDE:it,TLD:ce,UNDERSCORE:Ut,UTLD:de,UWORD:ue,WORD:P,WS:he});const N=/[a-z]/,X=new RegExp("\\p{L}","u"),Xt=new RegExp("\\p{Emoji}","u"),O=/\d/,Yt=/\s/,Re="\r",Zt=`
`,zs="️",Us="‍",te="￼";let ht=null,pt=null;function Ks(t=[]){const e={};M.groups=e;const n=new M;ht==null&&(ht=Ne(Ps)),pt==null&&(pt=Ne(_s)),d(n,"'",Rt),d(n,"{",et),d(n,"}",nt),d(n,"[",kt),d(n,"]",yt),d(n,"(",Lt),d(n,")",bt),d(n,"<",Tt),d(n,">",vt),d(n,"（",At),d(n,"）",Et),d(n,"「",Ct),d(n,"」",Mt),d(n,"『",xt),d(n,"』",St),d(n,"＜",It),d(n,"＞",wt),d(n,"&",Ht),d(n,"*",Nt),d(n,"@",B),d(n,"`",Pt),d(n,"^",_t),d(n,":",j),d(n,",",ke),d(n,"$",Dt),d(n,".",H),d(n,"=",$t),d(n,"!",ye),d(n,"-",S),d(n,"%",st),d(n,"|",Bt),d(n,"+",jt),d(n,"#",zt),d(n,"?",rt),d(n,'"',Le),d(n,"/",R),d(n,";",be),d(n,"~",it),d(n,"_",Ut),d(n,"\\",Ot),d(n,"・",Ze);const r=T(n,O,ge,{[ie]:!0});T(r,O,r);const s=T(r,N,Xe,{[tt]:!0}),i=T(r,X,Ye,{[Y]:!0}),o=T(n,N,P,{[oe]:!0});T(o,O,s),T(o,N,o),T(s,O,s),T(s,N,s);const a=T(n,X,ue,{[ae]:!0});T(a,N),T(a,O,i),T(a,X,a),T(i,O,i),T(i,N),T(i,X,i);const l=d(n,Zt,me,{[Jt]:!0}),h=d(n,Re,he,{[Jt]:!0}),u=T(n,Yt,he,{[Jt]:!0});d(n,te,u),d(h,Zt,l),d(h,te,u),T(h,Yt,u),d(u,Re),d(u,Zt),T(u,Yt,u),d(u,te,u);const c=T(n,Xt,tn,{[Je]:!0});d(c,"#"),T(c,Xt,c),d(c,zs,c);const p=d(c,Us);d(p,"#"),T(p,Xt,c);const f=[[N,o],[O,s]],k=[[N,null],[X,a],[O,i]];for(let m=0;m<ht.length;m++)$(n,ht[m],ce,P,f);for(let m=0;m<pt.length;m++)$(n,pt[m],de,ue,k);U(ce,{tld:!0,ascii:!0},e),U(de,{utld:!0,alpha:!0},e),$(n,"file",gt,P,f),$(n,"mailto",gt,P,f),$(n,"http",G,P,f),$(n,"https",G,P,f),$(n,"ftp",G,P,f),$(n,"ftps",G,P,f),U(gt,{scheme:!0,ascii:!0},e),U(G,{slashscheme:!0,ascii:!0},e),t=t.sort((m,L)=>m[0]>L[0]?1:-1);for(let m=0;m<t.length;m++){const L=t[m][0],v=t[m][1]?{[Ds]:!0}:{[$s]:!0};L.indexOf("-")>=0?v[le]=!0:N.test(L)?O.test(L)?v[tt]=!0:v[oe]=!0:v[ie]=!0,He(n,L,L,v)}return He(n,"localhost",ot,{ascii:!0}),n.jd=new M(Kt),{start:n,tokens:Object.assign({groups:e},en)}}function nn(t,e){const n=Fs(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,h=0,u=null,c=-1,p=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(c=0,p=0,u=a):c>=0&&(c+=n[o].length,p++),h+=n[o].length,i+=n[o].length,o++;i-=c,o-=p,h-=c,s.push({t:u.t,v:e.slice(i-h,i),s:i-h,e:i})}return s}function Fs(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function $(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new M(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new M(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function Ne(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const at={defaultProtocol:"http",events:null,format:Oe,formatHref:Oe,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Te(t,e=null){let n=Object.assign({},at);t&&(n=Object.assign(n,t instanceof Te?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Te.prototype={o:at,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:at[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Oe(t){return t}function sn(t,e){this.t="token",this.v=t,this.tk=e}sn.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=at.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),h=t.get("rel",n,e),u=t.getObj("attributes",n,e),c=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),h&&(o.rel=h),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:c}}};function Ft(t,e){class n extends sn{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Pe=Ft("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),_e=Ft("text"),Ws=Ft("nl"),ft=Ft("url",{isLink:!0,toHref(t=at.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==ot&&t[1].t===j}}),x=t=>new M(t);function Gs({groups:t}){const e=t.domain.concat([Ht,Nt,B,Ot,Pt,_t,Dt,$t,S,ge,st,Bt,jt,zt,R,Kt,it,Ut]),n=[Rt,j,ke,H,ye,st,rt,Le,be,Tt,vt,et,nt,yt,kt,Lt,bt,At,Et,Ct,Mt,xt,St,It,wt],r=[Ht,Rt,Nt,Ot,Pt,_t,Dt,$t,S,et,nt,st,Bt,jt,zt,rt,R,Kt,it,Ut],s=x(),i=d(s,it);g(i,r,i),g(i,t.domain,i);const o=x(),a=x(),l=x();g(s,t.domain,o),g(s,t.scheme,a),g(s,t.slashscheme,l),g(o,r,i),g(o,t.domain,o);const h=d(o,B);d(i,B,h),d(a,B,h),d(l,B,h);const u=d(i,H);g(u,r,i),g(u,t.domain,i);const c=x();g(h,t.domain,c),g(c,t.domain,c);const p=d(c,H);g(p,t.domain,c);const f=x(Pe);g(p,t.tld,f),g(p,t.utld,f),d(h,ot,f);const k=d(c,S);d(k,S,k),g(k,t.domain,c),g(f,t.domain,c),d(f,H,p),d(f,S,k);const m=d(f,j);g(m,t.numeric,Pe);const L=d(o,S),y=d(o,H);d(L,S,L),g(L,t.domain,o),g(y,r,i),g(y,t.domain,o);const v=x(ft);g(y,t.tld,v),g(y,t.utld,v),g(v,t.domain,o),g(v,r,i),d(v,H,y),d(v,S,L),d(v,B,h);const Q=d(v,j),D=x(ft);g(Q,t.numeric,D);const E=x(ft),C=x();g(E,e,E),g(E,n,C),g(C,e,E),g(C,n,C),d(v,R,E),d(D,R,E);const Wt=d(a,j),mn=d(l,j),kn=d(mn,R),Gt=d(kn,R);g(a,t.domain,o),d(a,H,y),d(a,S,L),g(l,t.domain,o),d(l,H,y),d(l,S,L),g(Wt,t.domain,E),d(Wt,R,E),d(Wt,rt,E),g(Gt,t.domain,E),g(Gt,e,E),d(Gt,R,E);const Ce=[[et,nt],[kt,yt],[Lt,bt],[Tt,vt],[At,Et],[Ct,Mt],[xt,St],[It,wt]];for(let qt=0;qt<Ce.length;qt++){const[Me,Vt]=Ce[qt],dt=d(E,Me);d(C,Me,dt),d(dt,Vt,E);const W=x(ft);g(dt,e,W);const J=x();g(dt,n),g(W,e,W),g(W,n,J),g(J,e,W),g(J,n,J),d(W,Vt,E),d(J,Vt,E)}return d(s,ot,v),d(s,me,Ws),{start:s,tokens:en}}function qs(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,h=null,u=0,c=null,p=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(h=l||a.go(n[s].t));)l=null,a=h,a.accepts()?(p=0,c=a):p>=0&&p++,s++,u++;if(p<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(ee(_e,e,o)),o=[]),s-=p,u-=p;const f=c.t,k=n.slice(s-u,s);i.push(ee(f,e,k))}}return o.length>0&&i.push(ee(_e,e,o)),i}function ee(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const Vs=typeof console<"u"&&console&&console.warn||(()=>{}),Qs="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",b={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Js(){return M.groups={},b.scanner=null,b.parser=null,b.tokenQueue=[],b.pluginQueue=[],b.customSchemes=[],b.initialized=!1,b}function De(t,e=!1){if(b.initialized&&Vs(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Qs}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);b.customSchemes.push([t,e])}function Xs(){b.scanner=Ks(b.customSchemes);for(let t=0;t<b.tokenQueue.length;t++)b.tokenQueue[t][1]({scanner:b.scanner});b.parser=Gs(b.scanner.tokens);for(let t=0;t<b.pluginQueue.length;t++)b.pluginQueue[t][1]({scanner:b.scanner,parser:b.parser});return b.initialized=!0,b}function ve(t){return b.initialized||Xs(),qs(b.parser.start,t,nn(b.scanner.start,t))}ve.scan=nn;function rn(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Te(n),s=ve(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var Ae="[\0-   ᠎ -\u2029 　]",Ys=new RegExp(Ae),Zs=new RegExp(`${Ae}$`),tr=new RegExp(Ae,"g");function er(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function nr(t){return new lt({key:new ut("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),i=e.some(h=>h.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=Cn(n.doc,[...e]);if(Mn(a).forEach(({newRange:h})=>{const u=xn(r.doc,h,f=>f.isTextblock);let c,p;if(u.length>1)c=u[0],p=r.doc.textBetween(c.pos,c.pos+c.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(h.from,h.to," "," ");if(!Zs.test(f))return;c=u[0],p=r.doc.textBetween(c.pos,h.to,void 0," ")}if(c&&p){const f=p.split(Ys).filter(Boolean);if(f.length<=0)return!1;const k=f[f.length-1],m=c.pos+p.lastIndexOf(k);if(!k)return!1;const L=ve(k).map(y=>y.toObject(t.defaultProtocol));if(!er(L))return!1;L.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Sn(y.from,y.to,r.doc).some(v=>v.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function sr(t){return new lt({key:new ut("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let u=r.target;const c=[];for(;u.nodeName!=="DIV";)c.push(u),u=u.parentNode;o=c.find(p=>p.nodeName==="A")}if(!o)return!1;const a=In(e.state,t.type.name),l=(s=o==null?void 0:o.href)!=null?s:a.href,h=(i=o==null?void 0:o.target)!=null?i:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&l?(window.open(l,h),!0):!1}}})}function rr(t){return new lt({key:new ut("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const h=rn(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!h||s!==void 0&&!s(h.href)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function z(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(tr,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var ir=F.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){De(t);return}De(t.scheme,t.optionalSlashes)})},onDestroy(){Js()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!z(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!z(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!z(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",A(this.options.HTMLAttributes,t),0]:["a",A(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!z(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!z(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[K({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=rn(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!z(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(nr({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!z(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(sr({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(rr({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),or=Object.defineProperty,ar=(t,e)=>{for(var n in e)or(t,n,{get:e[n],enumerable:!0})},lr="listItem",$e="textStyle",Be=/^\s*([-+*])\s$/,on=I.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",A(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lr,this.editor.getAttributes($e)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=q({find:Be,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=q({find:Be,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes($e),editor:this.editor})),[t]}}),an=I.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",A(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Fe(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ur={};ar(ur,{findListItemPos:()=>ct,getNextListDepth:()=>Ee,handleBackspace:()=>pe,handleDelete:()=>fe,hasListBefore:()=>ln,hasListItemAfter:()=>cr,hasListItemBefore:()=>un,listItemHasSubList:()=>cn,nextListIsDeeper:()=>dn,nextListIsHigher:()=>hn});var ct=(t,e)=>{const{$from:n}=e.selection,r=We(t,e.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Ee=(t,e)=>{const n=ct(t,e);if(!n)return!1;const[,r]=Rn(e,t,n.$pos.pos+4);return r},ln=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},un=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},cn=(t,e,n)=>{if(!n)return!1;const r=We(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},pe=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!re(t.state,e)&&ln(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),h=[];l.node().descendants((p,f)=>{p.type.name===e&&h.push({node:p,pos:f})});const u=h.at(-1);if(!u)return!1;const c=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},c.end()).joinForward().run()}if(!re(t.state,e)||!wn(t.state))return!1;const r=ct(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=cn(e,t.state,i);return un(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},dn=(t,e)=>{const n=Ee(t,e),r=ct(t,e);return!r||!n?!1:n>r.depth},hn=(t,e)=>{const n=Ee(t,e),r=ct(t,e);return!r||!n?!1:n<r.depth},fe=(t,e)=>{if(!re(t.state,e)||!Hn(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:dn(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():hn(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},cr=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},pn=_.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&fe(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&fe(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&pe(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&pe(t,n,r)&&(e=!0)}),e}}}}),je=/^(\s*)(\d+)\.\s+(.*)$/,dr=/^\s/;function hr(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(je);if(!i)break;const[,o,a,l]=i,h=o.length;let u=l,c=n+1;const p=[s];for(;c<t.length;){const f=t[c];if(f.match(je))break;if(f.trim()==="")p.push(f),u+=`
`,c+=1;else if(f.match(dr))p.push(f),u+=`
${f.slice(h+2)}`,c+=1;else break}e.push({indent:h,number:parseInt(a,10),content:u.trim(),raw:p.join(`
`)}),r=c,n=c}return[e,r]}function fn(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",h=[];l&&h.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const f=n.blockTokens(u);h.push(...f)}let c=i+1;const p=[];for(;c<t.length&&t[c].indent>e;)p.push(t[c]),c+=1;if(p.length>0){const f=Math.min(...p.map(m=>m.indent)),k=fn(p,f,n);h.push({type:"list",ordered:!0,start:p[0].number,items:k,raw:p.map(m=>m.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:h}),i=c}else i+=1}return s}function pr(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var fr="listItem",ze="textStyle",Ue=/^(\d+)\.\s$/,gn=I.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",A(this.options.HTMLAttributes,n),0]:["ol",A(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?pr(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=hr(s);if(i.length===0)return;const a=fn(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fr,this.editor.getAttributes(ze)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=q({find:Ue,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=q({find:Ue,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ze)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),gr=/^\s*(\[([( |x])?\])\s$/,mr=I.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",A(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Fe(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),h=u=>{var c,p;a.ariaLabel=((p=(c=this.options.a11y)==null?void 0:c.checkboxLabel)==null?void 0:p.call(c,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return h(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:c}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const f=n();if(typeof f!="number")return!1;const k=p.doc.nodeAt(f);return p.setNodeMarkup(f,void 0,{...k==null?void 0:k.attrs,checked:c}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,c)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,c])=>{s.setAttribute(u,c)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([u,c])=>{s.setAttribute(u,c)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,h(u),!0)}}},addInputRules(){return[q({find:gr,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),kr=I.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",A(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=xe(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=xe(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});_.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(on.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(an.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(pn.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(gn.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(mr.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(kr.configure(this.options.taskList)),t}});var yr=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Lr=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,br=F.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",A(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[V({find:yr,type:this.type})]},addPasteRules(){return[K({find:Lr,type:this.type})]}}),Tr=F.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",A(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),vr=_.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(As.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(ys.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(on.configure(this.options.bulletList)),this.options.code!==!1&&s.push(Ms.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(Ve.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(Fn.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(Wn.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(Gn.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(xs.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(Ss.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(qn.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Is.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(Os.configure(this.options.italic)),this.options.listItem!==!1&&s.push(an.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(pn.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(ir.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(gn.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(Vn.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(br.configure(this.options.strike)),this.options.text!==!1&&s.push(Qn.configure(this.options.text)),this.options.underline!==!1&&s.push(Tr.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Jn.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),Sr=vr;export{es as C,Zn as T,xr as a,Mr as b,Sr as i,w as l};
