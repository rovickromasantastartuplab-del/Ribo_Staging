import{r as x,j as e,aL as P,X as b,l as k,T as a,L as h,b7 as T}from"./client-DtfdVV77.js";import{u as f,R as S}from"./use-date-range-C3EA7LPl.js";import{C as R}from"./category-link-DefoIvjU.js";import{R as C,a as c}from"./report-table-QywmJl2G.js";import{D as _}from"./data-table-pagination-footer-B4yyc06A.js";import{h as L}from"./main-BGmGAxtx.js";import{L as D}from"./external-link-Cxcw6nc_.js";import{I as v}from"./info-dialog-trigger-CbHS2ZcI.js";import{S as p}from"./skeleton-D178v0-U.js";import{T as z,a as F,b as u}from"./tabs-spjnXvK6.js";import"./use-is-module-installed-CDjratdW.js";import"./chart-layout-bzO7gkty.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./slugify-string-CGmMIJK7.js";import"./table-CynOKbaN.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./formatted-duration-D1SZYLwf.js";import"./formatted-number-CIAFur2S.js";import"./ArrowDropUp-Bo2AvQbZ.js";import"./custom-menu-Dvq-fOnC.js";const j=({description:s,showCtr:i,showTicket:n})=>[{key:"normalized_term",allowsSorting:!0,header:()=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{children:e.jsx(a,{message:"Term"})}),!!s&&e.jsx(v,{body:s})]}),body:(t,r)=>r.isPlaceholder?e.jsx(p,{size:"w-180"}):e.jsx(h,{to:`/hc/search/${t.data.term}`,className:D,target:"_blank",children:t.data.term})},{key:"count",allowsSorting:!0,header:()=>e.jsx(a,{message:"Count"}),width:"w-144",body:(t,r)=>e.jsx(c,{type:"number",name:"count",item:t,isPlaceholder:r.isPlaceholder})},i?{key:"ctr",allowsSorting:!0,header:()=>e.jsx(a,{message:"Click-through"}),width:"w-144",body:(t,r)=>e.jsx(c,{type:"percent",name:"ctr",item:t,isPlaceholder:r.isPlaceholder})}:null,{key:"resulted_in_ticket",allowsSorting:!0,header:()=>e.jsx(a,{message:"Resulted in ticket"}),width:"w-144",body:(t,r)=>e.jsx(c,{type:"number",name:"resulted_in_ticket",item:t,isPlaceholder:r.isPlaceholder})},{key:"last_seen",allowsSorting:!0,header:()=>e.jsx(a,{message:"Last seen"}),width:"w-144",body:(t,r)=>r.isPlaceholder?e.jsx(p,{size:"w-80"}):e.jsx(T,{date:t.data.last_seen})},{key:"category_id",allowsSorting:!0,header:()=>e.jsx(a,{message:"Category"}),width:"w-288",body:(t,r)=>r.isPlaceholder?e.jsx(p,{size:"w-120"}):t.data.category?e.jsx(R,{category:t.data.category,target:"_blank"}):null}].filter(Boolean);function me(){const s=x.useMemo(()=>j({showCtr:!0,showTicket:!0,description:e.jsx(a,{message:"Use the popular searches report to see what your customers are looking for, and learn what your customers are most interested in or struggling with the most."})}),[]);return e.jsx(y,{type:"popular",columns:s})}function ce(){const s=x.useMemo(()=>j({showCtr:!1,showTicket:!0,description:e.jsx(a,{message:"This report shows search terms people use that don't match any articles. Use this metric to improve your help center search and content."})}),[]);return e.jsx(y,{type:"failed",columns:s})}function y({columns:s,type:i}){var g;const[n,l]=P(),[t,r]=f(),d=b(k.reports.get(`reports/search/${i}`,t,{page:n.get("page")||1,perPage:n.get("perPage")||15})),w=e.jsx(z,{selectedTab:i==="popular"?0:1,className:"mb-24",children:e.jsxs(F,{className:"mx-24",children:[e.jsx(u,{width:"min-w-132",elementType:h,to:"../popular",relative:"path",replace:!0,children:e.jsx(a,{message:"Popular searches"})}),e.jsx(u,{width:"min-w-132",elementType:h,to:"../failed",relative:"path",replace:!0,children:e.jsx(a,{message:"Failed searches"})})]})});return e.jsxs(S,{channel:"search",dateRange:t,onDateRangeChange:r,tabs:w,title:e.jsx(a,{message:"Help center search"}),children:[e.jsx(L,{children:e.jsx(a,{message:"Reports - Search"})}),e.jsx(C,{columns:s,data:(g=d.data)==null?void 0:g.pagination.data,cellHeight:"h-40",skeletonCount:8}),e.jsx(_,{query:d,onPageChange:m=>l(o=>(o.set("page",m.toString()),o)),onPerPageChange:m=>l(o=>(o.set("perPage",m.toString()),o))})]})}export{ce as FailedSearchReportPage,me as PopularSearchReportPage,j as getSearchReportTableColumns};
