import{X as L,k as R,f as Q,Z as B,j as e,r as I,aA as K,ac as P,a1 as X,p as E,A as Z,az as _,Q as b,m as y,z as M,C as V,a_ as A,aj as D,T as G}from"./client-DtfdVV77.js";import{k as H}from"./main-BGmGAxtx.js";import{S as J}from"./select-D9niWe2H.js";import{E as O}from"./Edit-BaEHOLuK.js";import{S as f}from"./skeleton-D178v0-U.js";function U(s,t,n){return L({queryKey:[s,t],queryFn:()=>W(s,t),...n})}async function W(s,t){return R.get(s,{params:t}).then(n=>n.data)}function Y({label:s,className:t,background:n,value:l,defaultValue:r="",placeholder:a=y("Select item..."),searchPlaceholder:o=y("Find an item..."),onChange:c,description:d,errorMessage:u,invalid:j,autoFocus:$,queryParams:p,endpoint:g,disabled:v,required:T,size:q}){var w;const x=I.useRef(null),[N,C]=I.useState(""),[h,S]=K(l,r,c),z=H(g,{query:N,...p}),{trans:F}=P(),m=X({size:q,background:n});return h?e.jsxs("div",{className:t,children:[s&&e.jsx("div",{className:m.label,children:s}),e.jsx("div",{className:E(m.input,j&&"border-danger"),children:e.jsx(Z,{initial:!1,mode:"wait",children:e.jsx(ee,{disabled:v,endpoint:g,className:m.input,modelId:h,queryParams:p,onEditClick:()=>{S(""),C(""),requestAnimationFrame(()=>{var i,k;(i=x.current)==null||i.focus(),(k=x.current)==null||k.click()})}})})}),d&&!u&&e.jsx("div",{className:m.description,children:d}),u&&e.jsx("div",{className:m.error,children:u})]}):e.jsx(J,{className:t,showSearchField:!0,invalid:j,errorMessage:u,description:d,color:"white",isAsync:!0,background:n,placeholder:F(a),searchPlaceholder:F(o),label:s,isLoading:z.isFetching,items:(w=z.data)==null?void 0:w.results,inputValue:N,onInputValueChange:C,selectionMode:"single",selectedValue:h,onSelectionChange:S,ref:x,autoFocus:$,disabled:v,required:T,children:i=>e.jsx(_,{value:i.id,description:i.description,startIcon:e.jsx(b,{src:i.image,size:"sm",label:i.name}),children:i.name},i.id)})}function ee({modelId:s,onEditClick:t,endpoint:n,disabled:l,queryParams:r}){const{data:a,isLoading:o}=U(`${n}/${s}`,r);return o||!(a!=null&&a.model)?e.jsx(se,{},"skeleton"):e.jsxs(M.div,{className:E("flex h-full items-center gap-8",l&&"pointer-events-none cursor-not-allowed text-disabled"),...V,children:[e.jsx(b,{src:a.model.image,label:a.model.name,size:"sm"}),e.jsx("div",{children:e.jsx(A,{label:a.model.description??a.model.name??"",children:e.jsx("div",{className:"text-sm leading-4",children:a.model.name})})}),e.jsx(A,{label:e.jsx(G,{message:"Change item"}),children:e.jsx(D,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:l,children:e.jsx(O,{})})})]},"preview")}function se(){return e.jsxs(M.div,{className:"flex h-full items-center gap-8",...V,children:[e.jsx(f,{variant:"rect",size:"w-24 h-24 flex-shrink-0"}),e.jsx(f,{className:"max-w-100 text-xs"}),e.jsx(f,{variant:"icon",size:"w-24 h-24",className:"ml-auto"})]})}function re({name:s,size:t,...n}){const{clearErrors:l}=Q(),{field:{onChange:r,value:a=""},fieldState:{invalid:o,error:c}}=B({name:s});return e.jsx(Y,{size:t,value:a,onChange:d=>{r(d),l(s)},invalid:o,errorMessage:c==null?void 0:c.message,...n})}export{re as F,U as u};
