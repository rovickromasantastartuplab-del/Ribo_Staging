import{b3 as x,i as d,s as l,t as c,m as g,q as m,k as u,j as e,T as r,r as p,a_ as j,aj as o}from"./client-DtfdVV77.js";import{g as i,h}from"./main-BGmGAxtx.js";import{K as y,D as f}from"./knowledge-preview-layout-BaDxG9wp.js";import{D as I}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as b}from"./use-required-params-BhaT_-q3.js";import{u as k}from"./useSuspenseQuery-Bmt2-NKx.js";import{B as v,a}from"./breadcrumb-CaNBY_Ut.js";import{O as K}from"./OpenInNew-C06CZDpe.js";import{S as P}from"./Sync-8LVFzqtm.js";import"./custom-menu-Dvq-fOnC.js";import"./Delete-DWP7kvj0.js";import"./Visibility-BlnkCOzB.js";import"./confirmation-dialog-BzXs9ksK.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./useEffectEvent-Offmqu_S.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";function B(){const t=x();return d({mutationFn:async({websiteId:s,webpageId:n})=>u.delete(`lc/ai-agent/websites/${s}/webpages/${n}`),onSuccess:()=>{c(g("Webpage deleted")),t("..",{relative:"path"}),m.invalidateQueries({queryKey:i.knowledge.invalidateKey})},onError:s=>l(s)})}function S(){return d({mutationFn:async({webpageId:t})=>u.post(`lc/ai-agent/webpages/${t}/sync`),onSuccess:()=>{c(g("Webpage content synced")),m.invalidateQueries({queryKey:i.knowledge.invalidateKey})},onError:t=>l(t)})}function U(){const{websiteId:t,webpageId:s}=b(["websiteId","webpageId"]),{data:n}=k(i.webpages.get(t,s)),w=e.jsx(I,{rightContent:e.jsx(D,{webpage:n.webpage}),showSidebarToggleButton:!0,children:e.jsxs(v,{size:"xl",children:[e.jsx(a,{to:"../knowledge",children:e.jsx(r,{message:"Knowledge"})}),e.jsx(a,{to:"../knowledge/websites",children:e.jsx(r,{message:"Websites"})}),e.jsx(a,{to:`../knowledge/websites/${t}/pages`,children:n.website.title}),e.jsx(a,{children:n.webpage.title})]})});return e.jsxs(p.Fragment,{children:[e.jsx(h,{children:e.jsx(r,{message:"Knowledge - Webpages"})}),e.jsx(y,{markdown:n.webpage.markdown,header:w})]})}function D({webpage:t}){const s=S();return e.jsxs(p.Fragment,{children:[e.jsx(j,{label:e.jsx(r,{message:"Refresh content"}),children:e.jsx(o,{variant:"outline",size:"sm",disabled:s.isPending||!t.fully_scanned||t.scan_pending,onClick:()=>{s.mutate({webpageId:t.id})},children:e.jsx(P,{})})}),e.jsx(T,{}),e.jsx(o,{variant:"outline",size:"sm",elementType:"a",href:t.url,target:"_blank",children:e.jsx(K,{})})]})}function T(){const t=B(),{websiteId:s,webpageId:n}=b(["websiteId","webpageId"]);return e.jsx(f,{isPending:t.isPending,onDelete:()=>t.mutateAsync({webpageId:n,websiteId:s})})}export{U as Component};
