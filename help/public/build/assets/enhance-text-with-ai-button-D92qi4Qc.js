import{i as b,s as w,k as C,al as M,j as e,am as z,ap as I,a_ as c,aj as m,T as l,r as x,aw as u,B as j,ae as f,ax as g,az as h,G as P,ak as L,av as k}from"./client-DtfdVV77.js";import{a as F}from"./use-is-module-installed-CDjratdW.js";import{C as D,O as B}from"./OpenInFull-mOMLBQ1Z.js";import{M as H,S as N}from"./Spellcheck-Bj2fiFlW.js";import{P as O}from"./progress-bar-BMzArYUQ.js";import{u as K}from"./tiptap-editor-context-CeN7pXcf.js";var d=(s=>(s.Simplify="simplify",s.Shorten="shorten",s.Lengthen="lengthen",s.FixSpelling="fixSpelling",s.Translate="translate",s.ChangeTone="changeTone",s))(d||{}),S=(s=>(s.casual="casual",s.formal="formal",s.confident="confident",s.friendly="friendly",s.inspirational="inspirational",s.motivational="motivational",s.nostalgic="nostalgic",s.professional="professional",s.playful="playful",s.scientific="scientific",s.witty="witty",s.straightforward="straightforward",s))(S||{});function R(s,t){return b({mutationKey:["modifyTextWithAi"],mutationFn:a=>V(a),onSuccess:a=>{},onError:a=>w(a)})}async function V(s){return C.post("ai/modify-text",s).then(t=>t.data)}function G({onModify:s}){const{close:t}=M(),a=R(),i=o=>new Promise((r,y)=>{a.mutate(o,{onSettled:(p,v)=>{p?(r(p==null?void 0:p.content),t()):y(v)}})}),n=o=>{s(r=>i({instruction:o,text:r}))};return e.jsx(z,{children:e.jsxs(I,{padding:"p-10",children:[a.isPending&&e.jsx(O,{isIndeterminate:!0,className:"absolute left-0 right-0 top-0 w-full",size:"xs"}),e.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto",children:[e.jsx(c,{label:e.jsx(l,{message:"Simplify text"}),children:e.jsx(m,{disabled:a.isPending,size:"sm",onClick:()=>n(d.Simplify),children:e.jsx(H,{})})}),e.jsx(c,{label:e.jsx(l,{message:"Shorten text"}),children:e.jsx(m,{disabled:a.isPending,size:"sm",onClick:()=>n(d.Shorten),children:e.jsx(D,{})})}),e.jsx(c,{label:e.jsx(l,{message:"Lenghten text"}),children:e.jsx(m,{disabled:a.isPending,size:"sm",iconSize:"md",onClick:()=>n(d.Lengthen),children:e.jsx(B,{})})}),e.jsx(c,{label:e.jsx(l,{message:"Fix spelling and grammar"}),children:e.jsx(m,{disabled:a.isPending,size:"sm",onClick:()=>n(d.FixSpelling),children:e.jsx(N,{})})}),e.jsx(_,{disabled:a.isPending,onSelected:o=>{s(r=>i({instruction:d.ChangeTone,tone:o,text:r}))}}),e.jsx(q,{disabled:a.isPending,onSelected:o=>{s(r=>i({instruction:d.Translate,language:o,text:r}))}})]})]})})}function _({onSelected:s,disabled:t}){const[a,i]=x.useState("");return e.jsxs(u,{onItemSelected:n=>s(n),selectedValue:a,selectionMode:"single",onSelectionChange:n=>i(n),children:[e.jsx(j,{disabled:t,variant:"outline",size:"xs",endIcon:e.jsx(f,{}),className:"ml-18",children:e.jsx(l,{message:"Change tone"})}),e.jsx(g,{children:Object.values(S).map(n=>e.jsx(h,{value:n,capitalizeFirst:!0,children:e.jsx(l,{message:n})},n))})]})}function q({onSelected:s,disabled:t}){const a=P();return e.jsxs(u,{onItemSelected:i=>s(i),showSearchField:!0,children:[e.jsx(j,{disabled:t,variant:"outline",size:"xs",endIcon:e.jsx(f,{}),className:"ml-6",children:e.jsx(l,{message:"Translate"})}),e.jsx(g,{children:a.map(i=>e.jsx(h,{value:i.code,children:i.name},i.code))})]})}const J=x.forwardRef((s,t)=>e.jsxs(L,{...s,ref:t,children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}));function T({disabled:s}){const t=F("ai"),a=K();return t?e.jsxs(k,{type:"popover",mobileType:"popover",placement:"top",offset:14,children:[e.jsx(c,{label:e.jsx(l,{message:"Enhance text"}),children:e.jsx(m,{size:"xs",iconSize:"sm",disabled:s,children:e.jsx(J,{})})}),e.jsx(G,{onModify:async i=>{if(!a)return;const n=a.getHTML();if(n)return a.commands.setContent(await i(n))}})]}):null}export{T as E};
