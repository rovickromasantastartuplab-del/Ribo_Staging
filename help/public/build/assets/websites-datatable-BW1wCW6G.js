import{b1 as b,b2 as f,m as i,b3 as y,j as e,T as t,av as u,B as D,aZ as w,L as m,aX as c,D as S,aj as d,al as C,i as k,s as v,k as I,q as P,t as T}from"./client-DtfdVV77.js";import{i as A,j as B,g as x,h as W}from"./main-BGmGAxtx.js";import{I as F,u as q}from"./use-sync-website-content-cALhwNlC.js";import{o as H}from"./online-articles-CqWeBVNj.js";import{G as L}from"./global-loading-progress-DVC8NxPo.js";import{D as N}from"./data-table-header-CdCZHch7.js";import{D as _}from"./data-table-pagination-footer-B4yyc06A.js";import{u as E}from"./use-datatable-search-params-dzq5X78n.js";import{D as M}from"./data-table-emty-state-message-DsPxSC6g.js";import{D as Q}from"./datatable-filters-KJfH8nG0.js";import{a as V,D as $,b as z,c as K}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as G}from"./use-datatable-query-v3pOHYke.js";import{T as O}from"./table-CynOKbaN.js";import{B as R,a as p}from"./breadcrumb-CaNBY_Ut.js";import{A as X}from"./Add-B1HfWgJf.js";import{D as Z}from"./Delete-DWP7kvj0.js";import{S as J}from"./Sync-8LVFzqtm.js";import{V as U}from"./Visibility-BlnkCOzB.js";import{C as Y}from"./confirmation-dialog-BzXs9ksK.js";import"./custom-menu-Dvq-fOnC.js";import"./accordtion-animation-BGCK95Hj.js";import"./radio-DP8xYP6t.js";import"./radio-group-C_T7jNq6.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./Edit-BaEHOLuK.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./formatted-number-CIAFur2S.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";const ee=[{key:"name",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(t,{message:"Website"}),body:s=>e.jsxs("div",{children:[e.jsx(m,{to:`${s.id}/pages`,className:"block hover:underline",children:s.title}),e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"text-xs text-muted hover:underline",children:s.url})]})},{key:"fully_scanned",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(t,{message:"Status"}),body:s=>s.scan_pending?e.jsx(c,{color:"danger",size:"xs",children:e.jsx(t,{message:"Scan pending"})}):e.jsx(c,{color:"positive",size:"xs",children:e.jsx(t,{message:"Scanned"})})},{key:"updatedAt",allowsSorting:!0,width:"w-96",header:()=>e.jsx(t,{message:"Last updated"}),body:s=>e.jsx("time",{children:e.jsx(S,{date:s.updated_at})})},{key:"actions",header:()=>e.jsx(t,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(d,{elementType:m,to:`${s.id}/pages`,disabled:s.scan_pending,children:e.jsx(U,{})}),e.jsx(se,{websiteId:s.id}),e.jsxs(u,{type:"modal",children:[e.jsx(d,{children:e.jsx(Z,{})}),e.jsx(te,{websiteId:s.id})]})]})}],g=[{key:"scan_pending",label:i("Scan pending"),description:i("Whether website is queued for scanning"),defaultOperator:f.eq,control:{type:b.BooleanToggle,defaultValue:!0}},A({label:i("First scanned"),description:i("Date website was first scanned")}),B({description:i("Date website was last updated")})];function Re(){const s=y(),{searchParams:a,sortDescriptor:n,mergeIntoSearchParams:r,setSearchQuery:h,isFiltering:j}=E(w),l=G(x.websites.index(a));return e.jsxs(V,{children:[e.jsx(L,{query:l}),e.jsx(W,{children:e.jsx(t,{message:"Websites"})}),e.jsx($,{showSidebarToggleButton:!0,children:e.jsxs(R,{size:"xl",children:[e.jsx(p,{to:"../knowledge",children:e.jsx(t,{message:"Knowledge"})}),e.jsx(p,{to:"../knowledge/websites",children:e.jsx(t,{message:"Websites"})})]})}),e.jsxs(z,{children:[e.jsx(N,{searchValue:a.query,onSearchChange:h,filters:g,actions:e.jsxs(u,{type:"modal",children:[e.jsx(D,{startIcon:e.jsx(X,{}),variant:"flat",color:"primary",children:e.jsx(t,{message:"Add website"})}),e.jsx(F,{})]})}),e.jsx(Q,{filters:g}),e.jsxs(K,{children:[e.jsx(O,{columns:ee,data:l.items,sortDescriptor:n,onSortChange:r,enableSelection:!1,onAction:o=>s(`${o.id}/pages`),cellHeight:"h-64"}),l.isEmpty?e.jsx(M,{image:H,isFiltering:j,title:e.jsx(t,{message:"No websites have been scanned yet"}),filteringTitle:e.jsx(t,{message:"No matching websites"})}):null,e.jsx(_,{query:l,onPageChange:o=>r({page:o}),onPerPageChange:o=>r({perPage:o})})]})]})]})}function se({websiteId:s}){const a=q();return e.jsx(d,{disabled:a.isPending,onClick:()=>{a.mutate({websiteId:s})},children:e.jsx(J,{})})}function te({websiteId:s}){const{close:a}=C(),n=k({mutationFn:()=>I.delete(`lc/ai-agent/websites/${s}`),onSuccess:async()=>{await P.invalidateQueries({queryKey:x.knowledge.invalidateKey}),T(i("Website deleted")),a()},onError:r=>v(r)});return e.jsx(Y,{isDanger:!0,isLoading:n.isPending,title:e.jsx(t,{message:"Delete website"}),body:e.jsx(t,{message:"Are you sure you want to delete this website?"}),confirm:e.jsx(t,{message:"Delete"}),onConfirm:()=>n.mutate()})}export{Re as Component,g as filters};
