import{r as b,j as e,T as t,b1 as c,b2 as u,m as s,aZ as D,av as S,B as w,L as g,aX as d,D as k,aj as v,al as C,i as T,s as P,k as _,q as F,t as B}from"./client-DtfdVV77.js";import{g as h,h as I,i as q}from"./main-BGmGAxtx.js";import{o as H}from"./online-articles-CqWeBVNj.js";import{G as A}from"./global-loading-progress-DVC8NxPo.js";import{D as E}from"./data-table-header-CdCZHch7.js";import{D as N}from"./data-table-pagination-footer-B4yyc06A.js";import{u as z}from"./use-datatable-search-params-dzq5X78n.js";import{D as L}from"./data-table-emty-state-message-DsPxSC6g.js";import{D as V}from"./datatable-filters-KJfH8nG0.js";import{a as M,D as Q,b as K,c as O}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as $}from"./use-datatable-query-v3pOHYke.js";import{T as G}from"./table-CynOKbaN.js";import{B as R,a as p}from"./breadcrumb-CaNBY_Ut.js";import{V as W}from"./Visibility-BlnkCOzB.js";import{C as U}from"./confirmation-dialog-BzXs9ksK.js";import"./custom-menu-Dvq-fOnC.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./Edit-BaEHOLuK.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./formatted-number-CIAFur2S.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";const X=[{key:"name",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(t,{message:"Name"}),body:a=>e.jsx(g,{to:a.scan_pending?"":`../knowledge/documents/${a.id}`,className:"block hover:underline",children:a.file_entry.name})},{key:"fully_scanned",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(t,{message:"Status"}),body:a=>a.scan_pending?e.jsx(d,{color:"danger",size:"xs",children:e.jsx(t,{message:"Scan pending"})}):a.scan_failed?e.jsx(d,{color:"danger",size:"xs",children:e.jsx(t,{message:"Scan failed"})}):e.jsx(d,{color:"positive",size:"xs",children:e.jsx(t,{message:"Scanned"})})},{key:"type",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(t,{message:"Type"}),body:a=>a.file_entry.type},{key:"created_at",allowsSorting:!0,width:"w-144",header:()=>e.jsx(t,{message:"Scan date"}),body:a=>e.jsx("time",{children:e.jsx(k,{date:a.created_at})})},{key:"actions",header:()=>e.jsx(t,{message:"Actions"}),width:"w-42 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:a=>e.jsx("div",{className:"text-muted",children:e.jsx(v,{size:"md",elementType:g,to:`../knowledge/documents/${a.id}`,disabled:a.scan_pending||a.scan_failed,children:e.jsx(W,{})})})}],x=[{key:"scan_pending",label:s("Fully scanned"),defaultOperator:u.eq,control:{type:c.Select,defaultValue:"0",options:[{value:!0,label:"No",key:"1"},{value:!1,label:"Yes",key:"0"}]}},{key:"scan_failed",label:s("Scan status"),defaultOperator:u.eq,control:{type:c.Select,defaultValue:"0",options:[{value:!0,label:s("Failed"),key:"0"},{value:!1,label:s("Succeded"),key:"1"}]}},q({label:s("Upload date")})];function Ne(){const[a,r]=b.useState([]),{searchParams:i,sortDescriptor:n,mergeIntoSearchParams:o,setSearchQuery:j,isFiltering:y}=z(D),l=$(h.documents.index(i)),f=e.jsxs(S,{type:"modal",children:[e.jsx(w,{variant:"flat",color:"danger",children:e.jsx(t,{message:"Delete"})}),e.jsx(Y,{selectedIds:a,onDelete:()=>r([])})]});return e.jsxs(M,{children:[e.jsx(A,{query:l}),e.jsx(I,{children:e.jsx(t,{message:"Documents"})}),e.jsx(Q,{showSidebarToggleButton:!0,children:e.jsxs(R,{size:"xl",children:[e.jsx(p,{to:"../knowledge",children:e.jsx(t,{message:"Knowledge"})}),e.jsx(p,{to:"../knowledge/documents",children:e.jsx(t,{message:"Documents"})})]})}),e.jsxs(K,{children:[e.jsx(E,{searchValue:i.query,onSearchChange:j,filters:x,selectedItems:a,selectedActions:f}),e.jsx(V,{filters:x}),e.jsxs(O,{children:[e.jsx(G,{columns:X,data:l.items,sortDescriptor:n,onSortChange:o,cellHeight:"h-64",selectedRows:a,onSelectionChange:r}),l.isEmpty?e.jsx(L,{isFiltering:y,image:H,title:e.jsx(t,{message:"No documents have been scanned yet"}),filteringTitle:e.jsx(t,{message:"No matching documents"})}):null,e.jsx(N,{query:l,onPageChange:m=>o({page:m}),onPerPageChange:m=>o({perPage:m})})]})]})]})}function Y({selectedIds:a,onDelete:r}){const{close:i}=C(),n=T({mutationFn:()=>_.delete(`lc/ai-agent/documents/${a.join(",")}`),onSuccess:async()=>{await F.invalidateQueries({queryKey:h.knowledge.invalidateKey}),B(s("Documents deleted")),r(),i()},onError:o=>P(o)});return e.jsx(U,{isDanger:!0,isLoading:n.isPending,title:e.jsx(t,{message:"Delete documents"}),body:e.jsx(t,{message:"Are you sure you want to delete selected documents?",values:{count:a.length}}),confirm:e.jsx(t,{message:"Delete"}),onConfirm:()=>n.mutate()})}export{Ne as Component};
