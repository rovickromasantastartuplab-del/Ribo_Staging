import{bb as I,r as m,aA as S,bn as O,bo as v,bp as R,bq as F,bk as z,ac as A,br as B,Z as E,bl as P,j as s,$ as Z,bs as q,bt as H,bu as L,p as M,av as N,am as U,ap as V,bv as G,aq as J,B as $,T as k}from"./client-DtfdVV77.js";function K(a){const l=I(),[e,f]=m.useState(!a.value&&!a.defaultValue),t=a.onChange,[n,i]=S(a.value||l,a.defaultValue||l,r=>{f(!1),t==null||t(r)}),{min:d,max:o,granularity:p,timezone:g,calendarIsOpen:h,setCalendarIsOpen:c,closeDialogOnSelection:b}=O(n,a),D=m.useCallback(()=>{f(!0),i(l),t==null||t(null),c(!1)},[l,i,t,c]),[u,x]=m.useState(()=>[v(n)]),C=m.useCallback(r=>{d&&r.compare(d)<0?r=d:o&&r.compare(o)>0&&(r=o);const j=n?n.set(r):R(r,g);i(j),x([v(j)]),f(!1)},[i,d,o,n,g]),T=m.useCallback(r=>!e&&F(n,r),[n,e]),y=m.useCallback(r=>({onClick:()=>{C==null||C(r),b&&(c==null||c(!1))}}),[C,c,b]);return{selectedValue:n,setSelectedValue:i,calendarIsOpen:h,setCalendarIsOpen:c,dayIsActive:T,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:u,setCalendarDates:x,isPlaceholder:e,clear:D,setIsPlaceholder:f,min:d,max:o,granularity:p,timezone:g,closeDialogOnSelection:b}}function Q({showCalendarFooter:a,...l}){const e=K(l),f=m.useRef(null),t=I(),n=a&&s.jsx(J,{padding:"px-14 pb-14",startAction:s.jsx($,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:s.jsx(k,{message:"Clear"})}),children:s.jsx($,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(t),e.setCalendarIsOpen(!1)},children:s.jsx(k,{message:"Today"})})}),i=s.jsx(N,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:f,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:s.jsxs(U,{size:"auto",children:[s.jsx(V,{className:"flex items-start gap-40",padding:a?"px-24 pt-20 pb-10":null,children:s.jsx(G,{state:e,visibleMonths:1})}),n]})}),d={onClick:o=>{o.stopPropagation(),o.preventDefault(),W(o)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return s.jsxs(m.Fragment,{children:[s.jsx(q,{ref:f,wrapperProps:d,endAdornment:s.jsx(L,{className:M(l.disabled&&"text-disabled")}),...l,children:s.jsx(H,{segmentProps:d,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),i]})}function Y(a){const{min:l,max:e}=a,f=z(),t=a.timezone||f,{trans:n}=A(),{format:i}=B({timeZone:t}),{field:{onChange:d,onBlur:o,value:p=null,ref:g},fieldState:{invalid:h,error:c}}=E({name:a.name,rules:{validate:u=>{if(!u)return;const x=P(u,t);if(l&&x.compare(l)<0)return n({message:"Enter a date after :date",values:{date:i(u)}});if(e&&x.compare(e)>0)return n({message:"Enter a date before :date",values:{date:i(u)}})}}}),b=p?P(p,t):null,D={onChange:u=>{d(u&&u.toAbsoluteString())},onBlur:o,value:b,invalid:h,errorMessage:c==null?void 0:c.message,inputRef:g};return s.jsx(Q,{...Z(D,a)})}function W(a){return["hour","minute","dayPeriod"].includes(a.currentTarget.ariaLabel||"")}export{Q as D,Y as F};
