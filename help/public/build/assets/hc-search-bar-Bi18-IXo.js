import{r as m,j as e,bB as f,p as j,ab as g,av as b,T as y,m as k,am as C,ap as S,a as N,al as T,ac as w,aV as A,X as I,h as B,az as E,as as L}from"./client-DtfdVV77.js";import{g as O}from"./article-link-kVBPNf7I.js";import{A as R}from"./article-path-CQn_uF_m.js";import{h as v}from"./custom-menu-Dvq-fOnC.js";import{u as D}from"./use-keybind-DRgaCeX0.js";import{C as P}from"./combobox-CFh39yI7.js";const z=["INPUT","TEXTAREA","SELECT","BUTTON"],F=m.forwardRef(({onTrigger:a,size:s,children:c,bg:t,width:d,radius:o="rounded-input",className:r,onClick:l,...u},p)=>(D("window","ctrl+k",i=>{z.includes((i==null?void 0:i.target).tagName)||a()}),e.jsxs(f,{ref:p,...u,display:"block",onClick:i=>a(),justify:"justify-none",className:"flex-shrink-0",children:[e.jsxs("span",{className:j("hidden items-center border bg-background text-muted shadow-sm transition-shadow focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:flex",s==="sm"&&"h-36 gap-6 px-12 text-sm",s==="lg"&&"text-md h-60 gap-12 px-24",t,d,o,r),children:[e.jsx(g,{className:"text-muted",size:s==="sm"?"sm":"md"}),e.jsx("span",{children:c}),e.jsxs("kbd",{className:"ml-auto hidden font-medium md:block",children:[e.jsx("kbd",{className:"font-sans",children:"âŒ˜"}),e.jsx("kbd",{className:"font-sans",children:"K"})]})]}),e.jsx("span",{className:"focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:hidden",children:e.jsx(g,{})})]})));function X({placeholder:a=k("Search documentation"),size:s="sm",width:c="w-320",categoryId:t,...d}){const[o,r]=m.useState(!1),l=m.useCallback(()=>{r(!0)},[]);return e.jsxs(b,{type:"modal",isOpen:o,onOpenChange:r,placement:"top",children:[e.jsx(F,{...d,onTrigger:l,size:s,width:c,children:e.jsx(y,{...a})}),e.jsx(C,{size:"lg",children:e.jsx(S,{padding:"p-0",children:e.jsx(Q,{placeholder:a,categoryId:t})})})]})}function Q({placeholder:a,categoryId:s}){const c=N();s=s||c.categoryId;const{close:t}=T(),{trans:d}=w(),[o,r]=m.useState(""),l=A(),{data:u,isFetching:p,isPending:i}=I(v.articles.search({query:o,categoryIds:s?[s]:void 0},n=>{var h;l.log({term:n.query,results:n.pagination.data,categoryId:(h=n.categoryIds)==null?void 0:h[0]})})),x=B();return e.jsx(P,{inputValue:o,onInputValueChange:r,isAsync:!0,isLoading:p,isPending:i,items:u==null?void 0:u.pagination.data,clearInputOnItemSelection:!0,endAdornmentIcon:e.jsx(L,{}),placeholder:d(a),startAdornment:e.jsx(g,{}),prependListbox:!0,listboxClassName:"py-12 px-8",inputRadius:"rounded-none",inputBorder:"border-b",inputRing:"ring-0",size:"lg",inputFontSize:"text-md",inputShadow:"shadow-none",onEndAdornmentClick:t,selectionMode:"none",showEmptyMessage:!0,children:n=>e.jsx(E,{padding:"py-8 px-12",radius:"rounded",value:n.id,onSelected:()=>{t(),l.updateLastSearch({clickedArticle:!0}),x(O(n))},description:e.jsx(R,{path:n.path}),textLabel:n.title,children:n.title},n.id)})}export{X as H};
