import{h as j,b4 as h,i as S,bw as y,k as D,u as p,j as e,r as F,p as N,m as u,av as k,ac as L,aj as E,B as m,T as r,d as I,al as B,am as P,an as q,ap as A,aP as R,F as T,aq as G}from"./client-DtfdVV77.js";import{u as _}from"./use-social-login-BVUj2tXy.js";import{u as O}from"./use-all-social-logins-disabled-aPb5okc5.js";import{E as U}from"./envato-DSHUfLey.js";import{s as W,t as z}from"./main-BGmGAxtx.js";import{G as H}from"./google-4IXOtUqo.js";import{o as M}from"./custom-menu-Dvq-fOnC.js";function Q(a){const s=j(),{getRedirectUri:t}=h();return S({mutationFn:Y,onSuccess:o=>{y(o.bootstrapData),s(t(),{replace:!0})},onError:o=>M(o,a)})}function Y(a){return D.post("secure/auth/social/connect",a).then(s=>s.data)}const J=u("Continue with google"),K=u("Continue with facebook"),V=u("Continue with twitter"),X=u("Continue with envato");function re({dividerMessage:a,isUsingInvite:s}){var d,g,b,f;const{social:t}=p(),o=j(),{getRedirectUri:x}=h(),{loginWithSocial:i,requestingPassword:w,setIsRequestingPassword:v}=_();if(O({isUsingInvite:s}))return null;const c=async C=>{const n=await i(C);((n==null?void 0:n.status)==="SUCCESS"||(n==null?void 0:n.status)==="ALREADY_LOGGED_IN")&&o(x(),{replace:!0})};return e.jsxs(F.Fragment,{children:[e.jsx("div",{className:"relative my-20 text-center before:absolute before:left-0 before:top-1/2 before:h-1 before:w-full before:-translate-y-1/2 before:bg-divider",children:e.jsx("span",{className:"relative z-10 bg-elevated px-10 text-sm text-muted",children:a})}),e.jsxs("div",{className:N("flex items-center justify-center gap-14",!(t!=null&&t.compact_buttons)&&"flex-col"),children:[(d=t==null?void 0:t.google)!=null&&d.enable?e.jsx(l,{label:J,icon:e.jsx(H,{viewBox:"0 0 48 48"}),onClick:()=>c("google")}):null,(g=t==null?void 0:t.facebook)!=null&&g.enable?e.jsx(l,{label:K,icon:e.jsx(W,{className:"text-facebook"}),onClick:()=>c("facebook")}):null,(b=t==null?void 0:t.twitter)!=null&&b.enable?e.jsx(l,{label:V,icon:e.jsx(z,{className:"text-twitter"}),onClick:()=>c("twitter")}):null,(f=t==null?void 0:t.envato)!=null&&f.enable&&!s?e.jsx(l,{label:X,icon:e.jsx(U,{viewBox:"0 0 50 50",className:"text-envato"}),onClick:()=>c("envato")}):null]}),e.jsx(k,{type:"modal",isOpen:w,onOpenChange:v,children:e.jsx(Z,{})})]})}function Z(){const a=I(),{formId:s}=B(),t=Q(a);return e.jsxs(P,{children:[e.jsx(q,{children:e.jsx(r,{message:"Password required"})}),e.jsxs(A,{children:[e.jsx("div",{className:"mb-30 text-sm text-muted",children:e.jsx(r,{message:"An account with this email address already exists. If you want to connect the two accounts, enter existing account password."})}),e.jsx(R,{form:a,id:s,onSubmit:o=>{t.mutate(o)},children:e.jsx(T,{autoFocus:!0,name:"password",type:"password",required:!0,label:e.jsx(r,{message:"Password"})})})]}),e.jsxs(G,{children:[e.jsx(m,{variant:"text",children:e.jsx(r,{message:"Cancel"})}),e.jsx(m,{type:"submit",form:s,variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(r,{message:"Connect"})})]})]})}function l({onClick:a,label:s,icon:t}){var i;const{trans:o}=L();return(i=p().social)!=null&&i.compact_buttons?e.jsx(E,{variant:"outline","aria-label":o(s),onClick:a,children:t}):e.jsx(m,{variant:"outline",startIcon:t,onClick:a,className:"min-h-42 w-full",children:e.jsx("span",{className:"min-w-160 text-start",children:e.jsx(r,{...s})})})}export{re as S};
