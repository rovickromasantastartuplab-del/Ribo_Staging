import{a2 as Y,Z as _,j as e,$ as ee,a3 as se,T as ne,a4 as ae,a5 as te,r as le,p as M,a1 as oe,a6 as ie,a7 as re,a8 as ce,a9 as de,aa as ue,ab as pe}from"./client-DtfdVV77.js";import{C as me}from"./combobox-end-adornment-CWQ4Xgal.js";function fe(n){const t=se(),{hideCaret:u,placeholder:p=e.jsx(ne,{message:"Select an option..."}),selectedValue:g,onItemSelected:b,onOpenChange:C,onInputValueChange:v,onSelectionChange:l,selectionMode:r="single",minWidth:m="min-w-128",children:he,searchPlaceholder:T,showEmptyMessage:D,showSearchField:i,defaultInputValue:xe,defaultSelectedValue:ge,inputValue:be,isLoading:w,isAsync:Ce,valueClassName:k,floatingWidth:L=t?"auto":"matchTrigger",ref:O,showCheckmark:z,inputRadius:A,appearance:E,...j}=n,f=ae({...n,selectionMode:r,showCheckmark:z,clearInputOnItemSelection:!0,showEmptyMessage:D||i,floatingWidth:L,role:"listbox",virtualFocus:i},O),{state:{selectedValues:h,isOpen:o,setIsOpen:P,activeIndex:I,setSelectedIndex:R,inputValue:$,setInputValue:q},collections:y,focusItem:B,listboxId:S,reference:W,refs:d,listContent:F,onInputChange:Z}=f,{fieldProps:N,inputProps:G}=te({...j,focusRef:d.reference});let x=e.jsx("span",{className:"text-main/50",children:p});if(r==="multiple"){const s=h.map(a=>{var c;return(c=y.collection.get(a))==null?void 0:c.element.props.children}).filter(Boolean);s.length>0&&(x=e.jsx("span",{className:"flex items-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:s.map((a,c)=>e.jsxs(le.Fragment,{children:[e.jsx("div",{className:"block",children:a}),c<s.length-1?e.jsx("span",{className:"mr-4 block",children:","}):null]},c))}))}else if(r==="single"){const s=y.collection.get(h[0]);s&&(x=e.jsxs("span",{className:"flex items-center gap-10",children:[s.element.props.startIcon,e.jsx("span",{className:M("overflow-hidden overflow-ellipsis whitespace-nowrap",k),children:s.element.props.children})]}))}const V=oe({...n,inputRadius:A||(E==="dropdown"?"rounded-button":"rounded-input"),endAdornment:!0}),{handleTriggerKeyDown:H,handleListboxKeyboardNavigation:J,handleListboxSearchFieldKeydown:Q}=ce(f),{findMatchingItem:K}=ie(),U=s=>{if(!o)return;const a=K(s,F,I);a!=null&&B("increment",a)},X=s=>{if(o)return;const a=K(s,F,I);a!=null&&R(a)};return e.jsx(re,{listbox:f,onKeyDownCapture:i?void 0:U,onKeyDown:J,onClose:i?()=>q(""):void 0,isLoading:w,searchField:i&&e.jsx(ue,{size:n.size==="xs"||n.size==="sm"?"xs":"sm",placeholder:T,startAdornment:e.jsx(pe,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":o?"true":"false","aria-haspopup":"listbox","aria-controls":o?S:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:$,onChange:Z,onKeyDown:s=>{Q(s)}}),children:e.jsxs(de,{fieldClassNames:V,...N,endAdornment:!u&&e.jsx(me,{isLoading:w,size:n.size}),children:[e.jsx("button",{...G,type:"button","aria-expanded":o?"true":"false","aria-haspopup":"listbox","aria-controls":o?S:void 0,ref:W,onKeyDown:H,onKeyDownCapture:i?void 0:X,disabled:j.disabled,onClick:()=>{P(!o)},className:M(V.input,!N.unstyled&&m),children:x}),e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute bottom-0 left-0 w-full opacity-0",children:e.jsx("label",{children:e.jsx("input",{tabIndex:-1,required:n.required,name:n.name,value:h[0],onChange:()=>{},onFocus:()=>{d.reference.current&&"focus"in d.reference.current&&d.reference.current.focus()}})})})]})})}function je({children:n,...t}){const u=Y(t),{field:{onChange:p,onBlur:g,value:b=null,ref:C},fieldState:{invalid:v,error:l}}=_({name:t.name,rules:u}),r={onSelectionChange:p,onBlur:g,selectedValue:b,invalid:v,errorMessage:l==null?void 0:l.message,name:t.name},m=t.errorMessage||(l==null?void 0:l.message);return e.jsx(fe,{ref:C,...ee(r,t,{errorMessage:m}),children:n})}export{je as F,fe as S};
