import{j as r,p as o,r as d,u,T as p}from"./client-DtfdVV77.js";import{r as x,s as h}from"./animating-messages-DuT2CR0j.js";import{F as f,a as g}from"./file-thumbnail-DlIWt16b.js";import{F as j}from"./formatted-bytes-CFeeP1Iy.js";import{A as v}from"./AttachFile-D1Gtc63k.js";function L(s,t,e){const i=e[s+1];return i?{isLastInGroup:i.author!==t.author||i.type!==t.type,isLast:s===e.length-1}:{isLastInGroup:!0,isLast:!0}}function E({children:s,uuid:t,className:e}){return r.jsx("div",{className:o(e,h(t)&&"animated-chat-message"),onAnimationEnd:()=>x(t),children:s})}const b=d.forwardRef(function({className:t,children:e,color:i,allowBreak:n,onClick:m,...l},c){return r.jsx("div",{...l,ref:c,onClick:m,className:o("w-max max-w-full rounded-panel p-14 text-sm leading-normal",w(i),n?"break-words":"overflow-hidden overflow-ellipsis whitespace-nowrap",t),children:e})});function w(s){switch(s){case"primary":return"bg-primary/20 dark:bg-primary dark:text-on-primary";case"chip":return"bg-chip/70";case"note":return"bg-note dark:bg-[#45380c]"}}function C({align:s,avatarInvisible:t=!1,avatar:e,children:i,footer:n,maxWidth:m="max-w-320",className:l,messageId:c}){return r.jsxs("div",{"data-message-id":c,className:o("flex items-start gap-8",s==="right"&&"flex-row-reverse",l),children:[e!=null&&r.jsx("div",{className:"mt-2 min-w-24",children:!t&&e}),r.jsxs("div",{className:o("w-max",m),children:[r.jsx("div",{className:o("flex flex-col gap-8",s==="right"&&"items-end"),children:i}),n&&r.jsx("div",{className:o("mt-4 block text-[11px] text-muted empty:hidden",s==="right"&&"text-end"),children:n})]})]})}function P(){const{aiAgent:s}=u();return(s==null?void 0:s.name)||r.jsx(p,{message:"AI assistant"})}const y={policy:"conversationFileEntry"};function G({attachments:s,color:t,onSelected:e,previewSearchParams:i,align:n}){const m=[],l=[];s.forEach(a=>{a.type==="image"?m.push(a):l.push(a)});const c=d.useMemo(()=>({...y,...i}),[i]);return r.jsxs(f.Provider,{value:c,children:[m.length>0&&r.jsx("div",{className:o("flex flex-wrap items-center gap-8",n==="right"&&"justify-end"),children:m.map(a=>r.jsx("div",{className:"transition:button flex h-80 w-100 cursor-pointer items-center justify-center overflow-hidden rounded-panel border p-6 hover:bg-hover",onClick:()=>e==null?void 0:e(a),children:r.jsx(g,{file:a,className:"rounded-panel"})},a.id))}),l.length>0&&r.jsx("div",{className:o("flex flex-wrap items-center gap-8",n==="right"&&"justify-end"),children:l.map(a=>r.jsxs(b,{className:"flex cursor-pointer gap-2 underline",color:t,onClick:()=>e==null?void 0:e(a),children:[r.jsx(v,{size:"xs"}),a.name," (",r.jsx(j,{bytes:a.file_size}),")"]},a.id))})]})}export{E as A,C as F,b as a,G as b,P as c,L as i};
