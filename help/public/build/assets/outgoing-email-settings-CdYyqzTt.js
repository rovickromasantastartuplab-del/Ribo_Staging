import{j as e,r as o,F as i,T as s,az as n,f as _,u as d,d as h}from"./client-DtfdVV77.js";import{A as u}from"./admin-config-DXsixO44.js";import{O as f}from"./outoing-email-not-configured-warning-SV19M97O.js";import{A as v}from"./settings-layout-FQP6W4_q.js";import{D as b}from"./settings-links-CRsxvJIZ.js";import{S as l}from"./settings-panel-gMfbp8IE.js";import{C as S,M as k}from"./connect-gmail-panel-Bs6ywo_M.js";import{u as g}from"./use-admin-settings-DArjpbC9.js";import{S as M}from"./section-helper-BcMoHesA.js";import{E as z}from"./external-link-Cxcw6nc_.js";import{S as y}from"./settings-error-group-BnQc3270.js";import{F as p}from"./select-D9niWe2H.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./main-BGmGAxtx.js";import"./custom-menu-Dvq-fOnC.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./use-admin-settings-page-nav-config-D58KRD8y.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./file-upload-provider-B4w-VsYu.js";import"./uploaded-file-DOXWsty7.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./useMutationState-Bmyxea6H.js";import"./blocker-dialog-B0Vc-LIE.js";import"./confirmation-dialog-BzXs9ksK.js";import"./book-open-D91H26Dq.js";import"./tabs-spjnXvK6.js";import"./use-social-login-BVUj2tXy.js";import"./useSuspenseQuery-Bmt2-NKx.js";import"./combobox-end-adornment-CWQ4Xgal.js";function P({isInvalid:r}){return e.jsxs(o.Fragment,{children:[e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.mailgun_domain",label:e.jsx(s,{message:"Mailgun domain"}),description:e.jsx(s,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.mailgun_secret",label:e.jsx(s,{message:"Mailgun API key"}),description:e.jsx(s,{message:"Should start with `key-`"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,name:"server.mailgun_endpoint",label:e.jsx(s,{message:"Mailgun endpoint"}),description:e.jsx(s,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function C({isInvalid:r}){return e.jsx(i,{size:"sm",invalid:r,name:"server.postmark_token",label:e.jsx(s,{message:"Postmark token"}),required:!0})}function F({isInvalid:r}){return e.jsxs(o.Fragment,{children:[e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.ses_key",label:e.jsx(s,{message:"SES key"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.ses_secret",label:e.jsx(s,{message:"SES secret"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,name:"server.ses_region",label:e.jsx(s,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function A({isInvalid:r}){return e.jsxs(e.Fragment,{children:[e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.mail_host",label:e.jsx(s,{message:"SMTP host"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,className:"mb-20",name:"server.mail_username",label:e.jsx(s,{message:"SMTP username"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,className:"mb-20",type:"password",name:"server.mail_password",label:e.jsx(s,{message:"SMTP password"}),required:!0}),e.jsx(i,{size:"sm",invalid:r,className:"mb-20",type:"number",name:"server.mail_port",label:e.jsx(s,{message:"SMTP port"})}),e.jsxs(p,{size:"sm",selectionMode:"single",invalid:r,name:"server.mail_encryption",label:e.jsx(s,{message:"SMTP encryption"}),children:[e.jsx(n,{value:"",children:e.jsx(s,{message:"None"})}),e.jsx(n,{value:"tls",children:e.jsx(s,{message:"TLS"})}),e.jsx(n,{value:"ssl",children:e.jsx(s,{message:"SSL"})})]})]})}function E(){const{watch:r,clearErrors:a}=_(),m=r("server.mail_mailer"),t=[];return m==="mailgun"&&t.push(P),m==="smtp"&&t.push(A),m==="ses"&&t.push(F),m==="postmark"&&t.push(C),m==="gmailApi"&&t.push(S),e.jsx(y,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:c=>e.jsxs(o.Fragment,{children:[e.jsxs(p,{size:"sm",onSelectionChange:()=>{a()},invalid:c,selectionMode:"single",name:"server.mail_mailer",label:e.jsx(s,{message:"Outgoing mail method"}),children:[e.jsx(n,{value:"mailgun",children:"Mailgun"}),e.jsx(n,{value:"gmailApi",children:"Gmail Api"}),e.jsx(n,{value:"smtp",children:"SMTP"}),e.jsx(n,{value:"postmark",children:"Postmark"}),e.jsx(n,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(n,{value:"sendmail",children:"SendMail"}),e.jsx(n,{value:"log",children:"Log (Email will be saved to log file instead of sending)"})]}),t.length?e.jsx("div",{className:"mt-30",children:t.map((x,j)=>e.jsx(x,{isInvalid:c},j))}):null]})})}function fe(){var t;const{incoming_email:r}=d(),{data:a}=g(),m=h({defaultValues:{server:{mail_from_address:a.server.mail_from_address??"",mail_from_name:a.server.mail_from_name??"",mail_mailer:a.server.mail_mailer??"",mailgun_domain:a.server.mailgun_domain??"",mailgun_secret:a.server.mailgun_secret??"",mailgun_endpoint:a.server.mailgun_endpoint??"",mail_host:a.server.mail_host??"",mail_username:a.server.mail_username??"",mail_password:a.server.mail_password??"",mail_port:a.server.mail_port??"",mail_encryption:a.server.mail_encryption??"",ses_key:a.server.ses_key??"",ses_secret:a.server.ses_secret??"",ses_region:a.server.ses_region??"",postmark_token:a.server.postmark_token??"",connectedGmailAccount:a.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((t=a.client.mail)==null?void 0:t.contact_page_address)??""}}}});return e.jsxs(v,{form:m,title:e.jsx(s,{message:"Email"}),tabs:r!=null&&r.integrated?e.jsx(k,{}):void 0,children:[e.jsx(f,{}),e.jsx(N,{}),e.jsx(w,{}),e.jsx(T,{})]})}function N(){return e.jsxs(l,{className:"mb-24",title:e.jsx(s,{message:"From Information"}),description:e.jsx(s,{message:"Configure the sender information for all outgoing application emails."}),children:[e.jsx(i,{size:"sm",type:"email",name:"server.mail_from_address",label:e.jsx(s,{message:"From address"}),description:e.jsx(s,{message:"All outgoing application emails will be sent from this email address."}),required:!0,className:"mb-20"}),e.jsx(i,{size:"sm",name:"server.mail_from_name",label:e.jsx(s,{message:"From name"}),description:e.jsx(s,{message:"All outgoing application emails will be sent using this name."}),required:!0,className:"mb-20"}),e.jsx(M,{size:"sm",color:"warning",description:e.jsx(s,{message:"Your selected mail method must be authorized to send emails using this address and name."})})]})}function w(){const{base_url:r}=d(),{data:a}=g(),m=`${r}/contact`;return a.server.enable_contact_page?e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Contact Page"}),description:e.jsx(s,{message:"Configure where contact form submissions should be sent."}),children:e.jsx(i,{size:"sm",type:"email",name:"client.mail.contact_page_address",label:e.jsx(s,{message:"Contact page address"}),description:e.jsx(s,{values:{contactPageUrl:e.jsx(z,{href:m,children:m})},message:"Where emails from :contactPageUrl page should be sent to."})})}):null}function T(){return e.jsx(l,{title:e.jsx(s,{message:"Outgoing Mail Method"}),description:e.jsx(s,{message:"Configure which method should be used for sending outgoing application emails."}),link:u.settings.outgoingEmail?e.jsx(b,{link:u.settings.outgoingEmail}):void 0,children:e.jsx(E,{})})}export{fe as Component};
