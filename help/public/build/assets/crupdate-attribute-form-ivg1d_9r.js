import{u as A,be as p,Z as g,j as e,T as s,aj as b,as as h,F as c,e as f,B as v,X as y,az as n,Q as I,l as k,bZ as T,aG as N,p as E,r as F}from"./client-DtfdVV77.js";import{h as O}from"./custom-menu-Dvq-fOnC.js";import{F as C}from"./form-chip-field-C7l8nGPv.js";import{A as w}from"./Add-B1HfWgJf.js";import{F as z}from"./select-D9niWe2H.js";import{S as L,C as q,A as P,P as S}from"./Subject-BqwsSXVC.js";import{E as $}from"./Email-DbuUu46B.js";import{E as D}from"./Event-DDJ424UR.js";import{L as G}from"./Link-WHWZ7SV6.js";import{T as R,N as M}from"./ToggleOn-DbVFGpQu.js";import{T as V}from"./TextFields-CM1xUWDR.js";import{T as B}from"./ThumbUp-CTCneb2T.js";import{F as u}from"./radio-DP8xYP6t.js";import{F as Q}from"./radio-group-C_T7jNq6.js";import{P as j}from"./pretty-attribute-type-DnpvguCK.js";import{u as W}from"./use-is-module-installed-CDjratdW.js";function H(){const{envato:i}=A(),{fields:a,append:r,remove:t}=p({name:"config.options",keyName:"key"}),{fieldState:{error:l,invalid:o}}=g({name:"config.options"});return e.jsxs("div",{className:"mt-44",children:[e.jsx("div",{className:"mb-2 text-base font-semibold",children:e.jsx(s,{message:"Attribute options"})}),l&&e.jsx("div",{className:"text-sm text-danger",children:l.message}),e.jsx("div",{className:"mt-12",children:a.map((d,m)=>e.jsxs("div",{className:"mb-16 border-b border-b-lighter pb-16",children:[e.jsxs("div",{className:"mb-12 flex items-center justify-between text-sm font-semibold",children:[e.jsx(s,{message:"Option :number",values:{number:m+1}}),e.jsx(b,{size:"sm",className:"ml-12 text-muted",disabled:a.length===1,onClick:()=>t(m),children:e.jsx(h,{})})]}),e.jsx(c,{required:!0,name:`config.options.${m}.label`,label:e.jsx(s,{message:"Label"}),invalid:o,className:"mb-12"}),e.jsx(c,{required:!0,name:`config.options.${m}.value`,label:e.jsx(s,{message:"Value"}),invalid:o,className:"mb-12"}),e.jsx(Z,{index:m}),(i==null?void 0:i.enable)&&e.jsx(_,{index:m}),e.jsx(f,{name:`config.options.${m}.agentOnly`,invalid:o,className:"mt-12",children:e.jsx(s,{message:"Only selectable by agent"})})]},d.key))}),e.jsx(v,{color:"primary",variant:"link",startIcon:e.jsx(w,{}),onClick:()=>r({}),children:e.jsx(s,{message:"Add option"})})]})}function Z({index:i}){var r;const a=y(O.categories.normalizedList());return e.jsx(C,{name:`config.options.${i}.hcCategories`,label:e.jsx(s,{message:"Help center categories"}),descriptionPosition:"top",description:i===0?e.jsx(s,{message:"Will be used to only suggest articles from selected help center categories when this option is selected. Leave empty to suggest all articles."}):null,allowCustomValue:!1,suggestions:(r=a.data)==null?void 0:r.categories,valueKey:"id",getItemForPresentation:t=>{var l,o;return(o=(l=a.data)==null?void 0:l.categories)==null?void 0:o.find(d=>d.id===t.id)},children:t=>e.jsx(n,{value:`${t.id}`,startIcon:e.jsx(I,{src:t.image,label:t.name,size:"xs"}),capitalizeFirst:!0,children:e.jsx(s,{message:t.name})},t.id)})}function _({index:i}){var r;const a=y(k.envato.items.normalizedList());return e.jsx(C,{className:"mt-12",name:`config.options.${i}.envatoItems`,label:e.jsx(s,{message:"Envato items"}),description:i===0?e.jsx(s,{message:"If active support functionality is enabled, this will prevent customer from starting a new conversation, if their support for all specified items is expired."}):null,allowCustomValue:!1,suggestions:(r=a.data)==null?void 0:r.items,valueKey:"id",getItemForPresentation:t=>{var l,o;return(o=(l=a.data)==null?void 0:l.items)==null?void 0:o.find(d=>d.id===t.id)},children:t=>e.jsx(n,{value:`${t.id}`,startIcon:e.jsx(I,{src:t.image,label:t.name,size:"xs"}),capitalizeFirst:!0,children:e.jsx(s,{message:t.name})},t.id)})}function K({disabled:i,isInternal:a}){return e.jsxs(z,{selectionMode:"single",name:"format",className:"mb-24",disabled:i,label:e.jsx(s,{message:"Format"}),children:[e.jsx(n,{value:"text",startIcon:e.jsx(V,{size:"sm"}),children:e.jsx(s,{message:"Text"})}),e.jsx(n,{value:"multiLineText",startIcon:e.jsx(L,{size:"sm"}),children:e.jsx(s,{message:"Multi-line text"})}),e.jsx(n,{value:"switch",startIcon:e.jsx(R,{size:"sm"}),children:e.jsx(s,{message:"Toggle"})}),e.jsx(n,{value:"number",startIcon:e.jsx(M,{size:"sm"}),children:e.jsx(s,{message:"Number"})}),e.jsx(n,{value:"url",startIcon:e.jsx(G,{size:"sm"}),children:e.jsx(s,{message:"URL"})}),e.jsx(n,{value:"date",startIcon:e.jsx(D,{size:"sm"}),children:e.jsx(s,{message:"Date"})}),e.jsx(n,{value:"radioGroup",startIcon:e.jsx(T,{size:"sm"}),children:e.jsx(s,{message:"Choice list"})}),e.jsx(n,{value:"checkboxGroup",startIcon:e.jsx(q,{size:"sm"}),children:e.jsx(s,{message:"Multiple choices"})}),e.jsx(n,{value:"dropdown",startIcon:e.jsx(P,{size:"sm"}),children:e.jsx(s,{message:"Dropdown"})}),a&&e.jsx(n,{value:"email",startIcon:e.jsx($,{size:"sm"}),children:e.jsx(s,{message:"Email"})}),a&&e.jsx(n,{value:"rating",startIcon:e.jsx(B,{size:"sm"}),children:e.jsx(s,{message:"Rating"})}),e.jsx(n,{value:"phone",startIcon:e.jsx(S,{size:"sm"}),children:e.jsx(s,{message:"Phone"})})]})}const U=["radioGroup","checkboxGroup","dropdown"];function X({attributeKey:i}){const{fields:a,append:r,remove:t}=p({name:"config.options",keyName:"key"}),{fieldState:{error:l,invalid:o}}=g({name:"config.options"}),d=N({name:"format"});return!U.includes(d)||i==="department"?null:e.jsxs("div",{className:"mt-44",children:[e.jsx("div",{className:"mb-2 text-base font-semibold",children:e.jsx(s,{message:"Attribute options"})}),l&&e.jsx("div",{className:"text-sm text-danger",children:l.message}),e.jsx("div",{className:"mt-12 space-y-16",children:a.map((m,x)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{required:!0,name:`config.options.${x}.label`,label:x===0?e.jsx(s,{message:"Label"}):void 0,className:"mr-16 flex-auto",invalid:o}),e.jsx(c,{required:!0,name:`config.options.${x}.value`,label:x===0?e.jsx(s,{message:"Value"}):void 0,className:"flex-auto",invalid:o}),e.jsx(b,{className:E("ml-12 text-muted",x===0?"mt-24":"mt-0"),disabled:a.length===1,onClick:()=>{t(x)},children:e.jsx(h,{})})]},m.key))}),e.jsx(v,{color:"primary",variant:"link",startIcon:e.jsx(w,{}),className:"mt-18",onClick:()=>r({}),children:e.jsx(s,{message:"Add option"})})]})}function J({isInternal:i}){const a=N({name:"permission"})==="agentOnly";return e.jsxs(F.Fragment,{children:[e.jsxs(Q,{disabled:i,name:"permission",label:e.jsx("div",{className:"text-base font-semibold",children:e.jsx(s,{message:"Who can view and change this attribute"})}),orientation:"vertical",size:"sm",children:[e.jsx(u,{value:"agentOnly",description:e.jsx(s,{message:"Attribute can only be viewed and edited by an agent"}),children:e.jsx(s,{message:"Only agents"})}),e.jsx(u,{value:"userCanEdit",description:e.jsx(s,{message:"Customer and agent can view and edit the attribute"}),children:e.jsx(s,{message:"Customer can edit"})}),e.jsx(u,{value:"userCanView",description:e.jsx(s,{message:"Attribute is visible to customers, but can only be edited by agents"}),children:e.jsx(s,{message:"Customer can view"})})]}),!a&&e.jsxs("div",{className:"mt-24",children:[e.jsx(c,{name:"customer_name",label:e.jsx(s,{message:"Name shown to customers"}),className:"mb-24"}),e.jsx(c,{name:"customer_description",label:e.jsx(s,{message:"Description shown to customers"}),rows:1,inputElementType:"textarea"})]})]})}function pe({isUpdating:i=!1,isInternal:a=!1,attributeKey:r}){const t=W("ai");return e.jsxs(F.Fragment,{children:[e.jsxs(z,{disabled:i||a,selectionMode:"single",name:"type",label:e.jsx(s,{message:"Type"}),className:"mb-24",children:[e.jsx(n,{value:"conversation",children:e.jsx(j,{type:"conversation"})}),e.jsx(n,{value:"user",children:e.jsx(j,{type:"user"})}),t?e.jsx(n,{value:"aiAgentSession",children:e.jsx(j,{type:"aiAgentSession"})}):null]}),e.jsx(K,{disabled:i||a,isInternal:a}),e.jsx(c,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-24",maxLength:60,required:!0}),e.jsx(c,{name:"description",label:e.jsx(s,{message:"Description"}),inputElementType:"textarea",rows:1,className:"mb-24"}),e.jsx(f,{name:"required",className:"mb-44",description:e.jsx(s,{message:"A value needs to be specified or selected for this attribute"}),children:e.jsx(s,{message:"Required attribute"})}),e.jsx(J,{isInternal:a}),r==="category"?e.jsx(H,{}):e.jsx(X,{attributeKey:r})]})}export{pe as C};
