import{r as n,R as h,j as a,b4 as j,c0 as E,bX as i,N as m,a as f,X as p,af as P,k as D,aY as N}from"./client-DtfdVV77.js";import{P as y}from"./page-meta-tags-B6Ej9u6-.js";import{W as S,J as b,N as v,F as L}from"./main-BGmGAxtx.js";import"./custom-menu-Dvq-fOnC.js";function I({page:e}){const r=n.useRef(null);return n.useEffect(()=>{r.current&&h(r.current)},[]),a.jsx("div",{className:"px-16 md:px-24",children:a.jsxs("div",{className:"custom-page-body prose mx-auto my-50 dark:prose-invert",children:[a.jsx("h1",{children:e.title}),a.jsx("div",{ref:r,className:"whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:e.body}})]})})}const T={delay:500,minDuration:200};function C(e,r){r=Object.assign({},T,r);const[t,s]=n.useState("IDLE"),u=n.useRef(null);return n.useEffect(()=>{e&&t==="IDLE"&&(clearTimeout(u.current),u.current=setTimeout(()=>{if(!e)return s("IDLE");u.current=setTimeout(()=>{s("EXPIRE")},r==null?void 0:r.minDuration),s("DISPLAY")},r==null?void 0:r.delay),s("DELAY")),!e&&t!=="DISPLAY"&&(clearTimeout(u.current),s("IDLE"))},[e,t,r.delay,r.minDuration]),n.useEffect(()=>()=>clearTimeout(u.current),[]),t==="DISPLAY"||t==="EXPIRE"}function R({query:e,show404:r=!0,loader:t,loaderClassName:s,loaderIsScreen:u=!0,delayedSpinner:o=!0,redirectOn404:c,isLoading:l}){const{isLoggedIn:g}=j();l=l??e.isLoading;const d=C(l,{delay:500,minDuration:200});return l?!d&&o?null:t||a.jsx(E,{className:s,screen:u}):e.isError&&(i(e.error,401)||i(e.error,403))&&!g?a.jsx(m,{to:"/login",replace:!0}):r&&e.isError&&i(e.error,404)?c?a.jsx(m,{to:c,replace:!0}):a.jsx(S,{}):a.jsx(b,{})}const x=e=>`custom-pages/${e}`;function w(e){const r=f();return e||(e=r.pageId),p({queryKey:[x(e)],queryFn:()=>A(e),initialData:()=>{var s;const t=(s=P().loaders)==null?void 0:s.customPage;if(t!=null&&t.page&&(t.page.id==e||t.page.slug==e))return t}})}function A(e){return D.get(x(e)).then(r=>r.data)}function X({slug:e}){const{pageSlug:r}=f();let t;N().forEach(u=>{var c;const o=(c=u.handle)==null?void 0:c.slug;o&&(t=o)});const s=w(e||r||t);return n.useEffect(()=>{var u;(u=s.data)!=null&&u.page&&window.scrollTo(0,0)},[s]),a.jsxs("div",{className:"flex min-h-screen flex-col bg",children:[a.jsx(y,{query:s}),a.jsx(v,{color:"bg",menuPosition:"custom-page-navbar",className:"sticky top-0 flex-shrink-0"}),a.jsx("div",{className:"flex-auto",children:s.data?a.jsx(I,{page:s.data.page}):a.jsx(R,{query:s,loaderClassName:"mt-80"})}),a.jsx(L,{className:"mx-14 md:mx-40"})]})}export{X as Component};
