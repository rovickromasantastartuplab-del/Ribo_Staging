import{i as j,s as f,q as y,k as v,j as t,B as n,T as s,a as P,ac as A,d as _,r as C,b5 as E,aR as T,p as k,L as I,t as F,m as N}from"./client-DtfdVV77.js";import{a as S,A as B}from"./use-create-article-FndfGb0h.js";import{H as w}from"./hc-article-editor-breadcrumb-B9KeImC7.js";import{o as U,h as c}from"./custom-menu-Dvq-fOnC.js";import{g as q}from"./article-link-kVBPNf7I.js";import{A as H}from"./article-editor-page-BJ_YtRa2.js";import{h as Q}from"./main-BGmGAxtx.js";import{u as V}from"./useSuspenseQuery-Bmt2-NKx.js";import{a as L}from"./breadcrumb-CaNBY_Ut.js";import{O as z}from"./OpenInNew-C06CZDpe.js";import"./file-type-icon-CNIGAaMG.js";import"./file-upload-provider-B4w-VsYu.js";import"./uploaded-file-DOXWsty7.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./progress-bar-BMzArYUQ.js";import"./open-upload-window-DE9Q8gNs.js";import"./normalized-model-field-D3Ui05eZ.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./Edit-BaEHOLuK.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./managed-by-field-CVvllq11.js";import"./visible-to-field-gdyusxCr.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./slugify-string-CGmMIJK7.js";import"./Undo-BcDh75at.js";import"./tiptap-editor-context-CeN7pXcf.js";import"./list-buttons-CxLBLRRO.js";import"./FormatListNumbered-BcAdH5KM.js";import"./index-uUjpwT6n.js";import"./Link-WHWZ7SV6.js";import"./color-picker-dialog-CeCHU4u7.js";import"./Color-DrXN9ww8.js";import"./FormatColorFill-DNSNzsFD.js";import"./image-button-DUyjpM_5.js";import"./image-up-hBoBC5iJ.js";import"./use-active-upload-CGOT7g6R.js";import"./shallow-BH2jDtXM.js";import"./MoreVert-BVDYtk4z.js";import"./PriorityHigh-BG38_UZP.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowBack-DIhVch2U.js";import"./index-BCY5Ekxi.js";import"./core-l5OAWFa0.js";import"./index-Y7xUBCAo.js";import"./dashboard-sidenav-q-Yy9ZLk.js";import"./toggle-right-sidebar-icon-DuD5EnU1.js";import"./useEffectEvent-Offmqu_S.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";function u(r){return j({mutationFn:e=>D(e),onSuccess:async()=>{await y.invalidateQueries({queryKey:c.articles.invalidateKey})},onError:e=>r?U(e,r):f(e)})}function D({id:r,...e}){return v.put(`hc/articles/${r}`,S(e)).then(a=>a.data)}function K({article:r}){const e=u();return t.jsx(n,{variant:"link",color:"primary",disabled:e.isPending,onClick:()=>{e.mutate({id:r.id,draft:!r.draft})},children:r.draft?t.jsx(s,{message:"Publish"}):t.jsx(s,{message:"Unpublish"})})}function Jt(){var d;const{articleId:r,categoryId:e,sectionId:a}=P(),p=V(c.articles.getForUpdateArticlePage({articleId:r,categoryId:e,sectionId:a})),i=p.data.article,{trans:x}=A(),o=_({defaultValues:{title:i.title,slug:i.slug,visible_to_role:i.visible_to_role||"",managed_by_role:i.managed_by_role||"",author_id:i.author_id,sections:(d=i.sections)==null?void 0:d.map(m=>m.id),tags:i.tags,attachments:i.attachments}}),l=u(o),g=()=>{l.mutate({...o.getValues(),id:i.id},{onSuccess:()=>{F(x(N("Article updated")))}})},b=t.jsx(n,{variant:"flat",color:"primary",size:"xs",onClick:()=>g(),disabled:l.isPending,children:t.jsx(s,{message:"Save"})}),h=t.jsx(w,{children:t.jsx(L,{children:t.jsx(s,{message:"Edit"})})});return t.jsxs(C.Fragment,{children:[t.jsx(Q,{children:p.data.article.title}),t.jsx(E,{...o,children:t.jsx(H,{imageUploadType:T.articleImages,title:h,saveButton:b,aside:t.jsx(B,{children:t.jsx(O,{article:i})}),initialContent:i.body,onChange:m=>{o.setValue("body",m,{shouldDirty:!0})}})})]})}function O({article:r}){var e;return t.jsxs("div",{className:"mb-28 border-b pb-14 text-sm",children:[t.jsx("div",{className:"mb-8 font-semibold",children:t.jsx(s,{message:"Publication status"})}),t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"mr-10 flex items-center gap-8 border-r pr-10",children:[t.jsx("div",{className:k("h-12 w-12 rounded-full border",r.draft?"border-divider":"border-transparent bg-positive")}),r.draft?t.jsx(s,{message:"Draft"}):t.jsx(s,{message:"Published"})]}),t.jsx(K,{article:r})]}),t.jsx(n,{variant:"link",color:"primary",elementType:I,to:q(r,{section:(e=r.sections)==null?void 0:e[0]}),endIcon:t.jsx(z,{}),target:"_blank",size:"xs",className:"mt-18",children:t.jsx(s,{message:"Preview in Help Center"})})]})}export{Jt as Component,O as PublicationStatus};
