import{r as m,a1 as E,j as e,p as l,a_ as F,aj as v,T as S,a2 as A,Z as M}from"./client-DtfdVV77.js";import{V as P,A as _}from"./variable-extension-BUEoymSX.js";import{R as z}from"./emoji-picker-button-Cm_kBrZ5.js";import{i as N,b as V,c as $,U as k,P as D,T as I,a as L}from"./index-Y7xUBCAo.js";import{u as U}from"./tiptap-editor-context-CeN7pXcf.js";import{D as q}from"./DataObject-3cjjRxnv.js";function B({label:s,labelPosition:t,labelDisplay:i,name:c,placeholder:r,className:o,multiline:a=!1,size:x="md",children:f,hideEmojiPicker:p=!1,invalid:d=!1,value:u,onBlur:h,onChange:g,errorMessage:j,ref:b}){const[C]=m.useState(()=>u),y=m.useRef(C),w=m.useRef(null),R=m.useMemo(()=>{const n=[a?N:N.extend({content:"block"}),V,$,k,P];return r&&n.push(D.configure({placeholder:r})),n},[r]),T=E({invalid:d,labelDisplay:i,labelPosition:t});return m.useEffect(()=>{w.current&&u&&u!==y.current&&w.current.commands.setContent(u)},[u]),e.jsxs("div",{className:l(o,T.wrapper),children:[e.jsxs(I,{preventNewLine:!a,submitToClosestForm:!!c,autoFocus:!1,extensions:R,contentClassName:l("flex-grow text-sm overflow-y-auto",a?"compact-scrollbar":"min-w-0 hidden-scrollbar [&>p]:whitespace-nowrap [&_.ProseMirror-separator]:hidden"),initialContent:C,changesAsText:!0,onBlur:()=>{h==null||h()},onChange:n=>{g==null||g(n),y.current=n},onCreate:({editor:n})=>{w.current=n,b==null||b({focus:()=>n.commands.focus()})},children:[s&&e.jsx("div",{className:T.label,children:s}),e.jsxs("div",{className:l("relative flex flex-auto rounded-input border transition-shadow focus-within:ring-1 focus-within:ring-inset",a?"flex-col":"hidden-scrollbar h-42 items-center",j?"focus-within:border-danger/90 focus-within:ring-danger/90":"focus-within:border-primary/90 focus-within:ring-primary/90",W(x,a)),children:[e.jsx(L,{}),e.jsx(O,{multiline:a,hideEmojiPicker:p,children:f})]})]}),j&&e.jsx("div",{className:T.error,children:j})]})}function X(s){const{name:t,errorMessageName:i,required:c,maxLength:r}=s,o=A({name:t,errorMessageName:i,required:c,maxLength:r}),{field:{onChange:a,onBlur:x,value:f,ref:p},fieldState:{error:d}}=M({name:t,rules:o});return e.jsx(B,{...s,invalid:!!d,onChange:a,value:f,onBlur:x,errorMessage:d==null?void 0:d.message,ref:p})}function O({children:s,hideEmojiPicker:t,multiline:i}){const c=U(),r=i?"2xs":"xs";return e.jsxs("div",{className:l("flex flex-shrink-0 items-end text-muted",i?"-mx-2 -my-2 gap-8 pt-8":"pl-12"),children:[e.jsx(_,{showReadonly:!0,floatingWidth:"auto",offset:6,onChange:o=>{o&&c&&c.commands.insertContent(`<be-variable name="${o.name}" type="${o.type}"/>`)},children:e.jsx(F,{label:e.jsx(S,{message:"Add attribute"}),children:e.jsx(v,{size:r,iconSize:"sm",children:e.jsx(q,{})})})}),s,!t&&e.jsx(z,{size:r,offset:6})]})}function W(s,t){if(!t)switch(s){case"sm":return"h-36 px-12";case"lg":return"h-50 px-12";default:return"h-42 px-12"}switch(s){case"sm":return"max-h-172 px-12 py-[7px] max-h-74";case"lg":return"max-h-240 min-h-172 px-12 py-10";default:return"max-h-172 px-12 py-10 min-h-90"}}export{X as F,B as T};
