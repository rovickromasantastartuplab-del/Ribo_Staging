import{m as r,j as e,aX as g,ao as b,T as d,r as c,aR as f,Q as j,i as h,s as v,k as T,b4 as A,u as N,L as S,b9 as w,l as P,N as E}from"./client-DtfdVV77.js";import{u as I}from"./use-agent-permissions-Cu2wkS4o.js";import{u as C}from"./use-compact-agents-BbfR0BTv.js";import{b as R}from"./crupdate-resource-layout-BeHzVG7e.js";import{U}from"./update-user-page-actions-CCAKW1qY.js";import{I as k}from"./image-selector-fVyS7PG4.js";import{F as z}from"./file-upload-provider-B4w-VsYu.js";import{u as O}from"./use-url-backed-tabs-BirCk8wN.js";import{T as B,a as D,b as _}from"./tabs-spjnXvK6.js";import{h as F}from"./main-BGmGAxtx.js";import{u as H}from"./use-required-params-BhaT_-q3.js";import{u as L}from"./useSuspenseQuery-Bmt2-NKx.js";import{O as Q}from"./online-status-circle-Nb704kAK.js";import{B as q,a as u}from"./breadcrumb-CaNBY_Ut.js";import"./helpdesk-channel-CQKSbeKg.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./use-unban-users-B2eSKHQ6.js";import"./custom-menu-Dvq-fOnC.js";import"./date-picker-BGiTN72q.js";import"./paginated-resources-DUi9UwyN.js";import"./confirmation-dialog-BzXs9ksK.js";import"./use-active-upload-CGOT7g6R.js";import"./open-upload-window-DE9Q8gNs.js";import"./uploaded-file-DOXWsty7.js";import"./shallow-BH2jDtXM.js";import"./AddAPhoto-Bl3FQpaJ.js";import"./progress-bar-BMzArYUQ.js";import"./file-input-config-DrcTpI3-.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./HourglassEmpty-T3VQEBmq.js";import"./useEffectEvent-Offmqu_S.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";const M=[{uri:"details",label:r("Details")},{uri:"permissions",label:r("Roles & permissions")},{uri:"conversations",label:r("Conversations")},{uri:"security",label:r("Security")},{uri:"date",label:r("Date & time")},{uri:"api",label:r("API")}];function V({user:a,badge:s}){var o,t,m;const i=a.banned_at!==null,n=(t=(o=a.bans)==null?void 0:o[0])==null?void 0:t.comment;return e.jsxs("div",{className:"container mx-auto mb-44 mt-38 flex-shrink-0 px-24",children:[e.jsxs("div",{className:"flex gap-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{user:a}),e.jsx("div",{className:"absolute right-0 top-2",children:s})]}),e.jsxs("div",{children:[!!((m=a.roles)!=null&&m.length)&&e.jsx(g,{radius:"rounded-panel",size:"sm",className:"mb-6 w-max",children:a.roles[0].name}),e.jsx("h1",{className:"text-2xl font-semibold",children:a.name}),e.jsx("div",{className:"mt-4 text-sm text-muted",children:a.email})]})]}),i&&e.jsxs("div",{className:"mt-24 flex w-max items-center gap-8 rounded-panel bg-danger-lighter px-10 py-6 text-sm text-danger-darker",children:[e.jsx(b,{size:"sm"}),n?e.jsx(d,{message:"Suspended: :reason",values:{reason:n}}):e.jsx(d,{message:"Suspended"})]})]})}function W({user:a}){const[s,i]=c.useState(a.image),n=X(a.id);return e.jsx(z,{children:e.jsx(k,{value:s,uploadType:f.avatars,variant:"avatar",stretchPreview:!0,previewSize:"w-90 h-90",placeholderIcon:e.jsx(j,{label:a.name,size:"w-full h-full text-2xl",circle:!0}),showRemoveButton:!0,onChange:(o,t)=>{i(t==null?void 0:t.url),n.mutate({image:(t==null?void 0:t.url)??null,image_entry_id:(t==null?void 0:t.id)??null})}})})}function X(a){return h({mutationFn:s=>T.put(`users/${a}`,s).then(i=>i.data),onError:s=>v(s)})}r("Details"),r("Roles & permissions"),r("Security"),r("Date & time"),r("API");function $({user:a,tabs:s}){const{user:i,hasPermission:n}=A(),{api:o}=N(),t=(o==null?void 0:o.integrated)&&n("api.access"),m=c.useMemo(()=>s.filter(l=>!(l.uri==="api"&&!t||l.uri==="security"&&a.id!==(i==null?void 0:i.id))),[a.id,i==null?void 0:i.id,t,s]),[p,x]=O(m);return e.jsx("div",{className:"container mx-auto px-24",children:e.jsxs(B,{selectedTab:p,onTabChange:x,overflow:"overflow-visible",children:[e.jsx(D,{className:"mb-24",children:m.map(l=>e.jsx(_,{elementType:S,to:l.uri,children:e.jsx(d,{...l.label})},l.uri))}),e.jsx(w,{context:a})]})})}function Ue(){const{agentId:a}=H(["agentId"]),s=L(P.agents.get(a));return I(s.data.agent.id)?e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(F,{children:e.jsx(d,{message:"Edit member"})}),e.jsx(R,{endActions:e.jsx(U,{user:s.data.agent}),children:e.jsxs(q,{size:"xl",children:[e.jsx(u,{to:"../members",children:e.jsx(d,{message:"Team members"})}),e.jsx(u,{children:s.data.agent.name})]})}),e.jsxs("div",{className:"flex-auto overflow-y-auto",children:[e.jsx(V,{badge:e.jsx(y,{agent:s.data.agent}),user:s.data.agent}),e.jsx($,{user:s.data.agent,tabs:M})]})]}):e.jsx(E,{to:"..",replace:!0})}function y({agent:a}){const s=C(a.id);return e.jsx(Q,{isOnline:s,size:"md",color:s?"bg-positive":"bg-danger"})}export{Ue as Component,y as OnlineIndicator};
