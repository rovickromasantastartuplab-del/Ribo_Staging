import{h as u,aZ as g,l as x,j as e,T as s,L as d,Q as h,af as j,aX as f,r as c,av as b,aw as D,aj as y,ax as S,az as p}from"./client-DtfdVV77.js";import{A as T}from"./admin-config-DXsixO44.js";import{T as v}from"./team-index-page-tabs-DGkSG6mK.js";import{D as k}from"./delete-group-dialog-B-QwY0XU.js";import{h as P}from"./helpdesk-channel-CQKSbeKg.js";import{u as A,O as C}from"./online-status-circle-Nb704kAK.js";import{t as w}from"./team-DYmDDGxN.js";import{D as I}from"./settings-links-CRsxvJIZ.js";import{G as N}from"./global-loading-progress-DVC8NxPo.js";import{a as G}from"./name-with-avatar-D8NZSkGp.js";import{D as O}from"./data-table-add-item-button-B_2m2pad.js";import{D as H}from"./data-table-header-CdCZHch7.js";import{D as M}from"./data-table-pagination-footer-B4yyc06A.js";import{u as B}from"./use-datatable-search-params-dzq5X78n.js";import{D as E}from"./data-table-emty-state-message-DsPxSC6g.js";import{a as L,D as z,b as Q,c as $}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as F}from"./use-datatable-query-v3pOHYke.js";import{h as W}from"./main-BGmGAxtx.js";import{T as q}from"./table-CynOKbaN.js";import{A as U}from"./avatar-group-BIYHgzHR.js";import{M as V}from"./MoreHoriz-Df3_bV9s.js";import{S as R}from"./skeleton-D178v0-U.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./tabs-spjnXvK6.js";import"./confirmation-dialog-BzXs9ksK.js";import"./HourglassEmpty-T3VQEBmq.js";import"./external-link-Cxcw6nc_.js";import"./book-open-D91H26Dq.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./Edit-BaEHOLuK.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./custom-menu-Dvq-fOnC.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";const X=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(s,{message:"Group"}),body:a=>{var t;return e.jsx(G,{label:e.jsx(s,{message:a.name}),avatarLabel:a.name,alwaysShowAvatar:!0,description:e.jsx(s,{message:"[one 1 member|other :count members]",values:{count:((t=a.users)==null?void 0:t.length)||0}})})}},{key:"members",header:()=>e.jsx(s,{message:"Members"}),body:a=>{var t;return e.jsx(U,{className:"min-h-40",children:(t=a.users)==null?void 0:t.map(r=>e.jsx(h,{src:r.image,label:r.name,link:`/users/${r.id}`,fallback:"initials"},r.id))})}},{key:"status",header:()=>e.jsx(s,{message:"Status"}),body:a=>{var t;return j().settings.websockets_setup?e.jsx(Z,{group:a}):e.jsx(s,{message:"[one 1 member|other :count members]",values:{count:((t=a.users)==null?void 0:t.length)??1}})}},{key:"default",header:()=>e.jsx(s,{message:"Default"}),hideHeader:!0,body:a=>a.default?e.jsx(f,{className:"w-max",radius:"rounded-panel",size:"sm",children:e.jsx(s,{message:"Default"})}):null},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:a=>e.jsx(_,{group:a})}];function Z({group:a}){var m,l;const r=A(o=>o.presence)[P.name];if(!r)return e.jsx(R,{className:"max-w-200"});const n=((m=a.users)==null?void 0:m.filter(o=>r.find(i=>i.isAgent&&i.modelId===o.id)).length)||0;return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(C,{isOnline:!!n}),e.jsx(s,{message:":count of :total online",values:{count:n,total:((l=a.users)==null?void 0:l.length)||0}})]})}function _({group:a}){const[t,r]=c.useState(!1);return e.jsxs(c.Fragment,{children:[e.jsx(b,{type:"modal",isOpen:t,onOpenChange:r,children:e.jsx(k,{groupId:a.id})}),e.jsxs(D,{children:[e.jsx(y,{size:"md",className:"text-muted",children:e.jsx(V,{})}),e.jsxs(S,{children:[e.jsx(p,{value:"edit",elementType:d,to:`${a.id}/edit`,children:e.jsx(s,{message:"Edit"})}),e.jsx(p,{value:"reports",elementType:d,to:`/dashboard/reports/groups/${a.id}`,children:e.jsx(s,{message:"View reports"})}),!a.default&&e.jsx(p,{value:"delete",className:"text-danger",onSelected:()=>{r(!0)},children:e.jsx(s,{message:"Delete"})})]})]})]})}function ea(){const a=u(),{searchParams:t,sortDescriptor:r,mergeIntoSearchParams:n,setSearchQuery:m,isFiltering:l}=B(g),o=F(x.groups.index(t));return e.jsxs(L,{children:[e.jsx(N,{query:o}),e.jsx(W,{children:e.jsx(s,{message:"Team - Groups"})}),e.jsx(z,{title:e.jsx(s,{message:"Team"}),showSidebarToggleButton:!0,border:"border-none",rightContent:e.jsx(I,{variant:"button",link:T.pages.groups,size:"xs"})}),e.jsx(v,{}),e.jsxs(Q,{children:[e.jsx(H,{searchValue:t.query,onSearchChange:m,actions:e.jsx(J,{})}),e.jsxs($,{children:[e.jsx(q,{columns:X,data:o.items,sortDescriptor:r,onSortChange:n,enableSelection:!1,cellHeight:"h-70",onAction:i=>{a(`${i.id}/edit`)}}),o.isEmpty&&e.jsx(E,{isFiltering:l,className:"mt-44",image:w,title:e.jsx(s,{message:"No groups have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching groups"})}),e.jsx(M,{hideIfOnlyOnePage:!0,query:o,onPageChange:i=>n({page:i}),onPerPageChange:i=>n({perPage:i})})]})]})]})}function J(){return e.jsx(O,{elementType:d,to:"new",children:e.jsx(s,{message:"Add new group"})})}export{ea as Component};
