import{i as D,s as w,q as C,l as g,k as v,j as e,T as t,aQ as S,as as k,D as T,a_ as u,aj as h,L as j,av as P,r as A,p as I,al as R,b1 as d,b2 as m,m as s,h as E,aY as F,bY as N}from"./client-DtfdVV77.js";import{A as M}from"./admin-config-DXsixO44.js";import{a as O}from"./name-with-avatar-D8NZSkGp.js";import{a as q,T as L}from"./table-CynOKbaN.js";import{D as H}from"./Delete-DWP7kvj0.js";import{E as B}from"./Edit-BaEHOLuK.js";import{C as _}from"./confirmation-dialog-BzXs9ksK.js";import{I as Q,i as U,j as z}from"./main-BGmGAxtx.js";import{o as G}from"./online-articles-CqWeBVNj.js";import{D as W}from"./settings-links-CRsxvJIZ.js";import{G as $}from"./global-loading-progress-DVC8NxPo.js";import{D as K}from"./data-table-add-item-button-B_2m2pad.js";import{D as V}from"./data-table-header-CdCZHch7.js";import{D as Y}from"./data-table-pagination-footer-B4yyc06A.js";import{u as J}from"./use-datatable-search-params-dzq5X78n.js";import{D as X}from"./data-table-emty-state-message-DsPxSC6g.js";import{D as Z}from"./datatable-filters-KJfH8nG0.js";import{a as ee,D as ae,b as te,c as se}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as re}from"./use-datatable-query-v3pOHYke.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./skeleton-D178v0-U.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";import"./custom-menu-Dvq-fOnC.js";import"./external-link-Cxcw6nc_.js";import"./book-open-D91H26Dq.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./formatted-number-CIAFur2S.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";function ie(){return D({mutationFn:a=>oe(a),onSuccess:async()=>{await C.invalidateQueries({queryKey:g.cannedReplies.invalidateKey})},onError:a=>w(a)})}function oe(a){return v.delete(`helpdesk/canned-replies/${a.ids.join(",")}`).then(r=>r.data)}const ne=[{key:"name",width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(t,{message:"Saved reply"}),body:a=>e.jsx(le,{reply:a})},{key:"user_id",allowsSorting:!0,width:"w-180",header:()=>e.jsx(t,{message:"Owner"}),body:a=>a.user?e.jsx(O,{image:a.user.image,label:a.user.name,avatarCircle:!0}):null},{key:"shared",allowsSorting:!0,width:"w-80 flex-shrink-0",header:()=>e.jsx(t,{message:"Shared"}),body:a=>a.shared?e.jsx(S,{size:"md",className:"text-positive"}):e.jsx(k,{size:"md",className:"text-danger"})},{key:"updatedAt",allowsSorting:!0,width:"w-124",header:()=>e.jsx(t,{message:"Last updated"}),body:a=>e.jsx("time",{children:e.jsx(T,{date:a.updated_at})})},{key:"actions",header:()=>e.jsx(t,{message:"Actions"}),width:"w-84 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:a=>e.jsxs("div",{className:"text-muted",children:[e.jsx(u,{label:e.jsx(t,{message:"Edit reply"}),children:e.jsx(h,{size:"md",elementType:j,to:`${a.id}/update`,children:e.jsx(B,{})})}),e.jsxs(P,{type:"modal",children:[e.jsx(u,{label:e.jsx(t,{message:"Delete reply"}),children:e.jsx(h,{children:e.jsx(H,{})})}),e.jsx(de,{reply:a})]})]})}];function le({reply:a}){const{isCollapsedMode:r}=A.useContext(q);return e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:I(r?"line-clamp-2":"overflow-hidden overflow-ellipsis whitespace-nowrap font-medium"),children:a.name}),e.jsx("p",{className:"mt-4 max-w-850 whitespace-normal text-xs text-muted",children:a.description})]})}function de({reply:a}){const r=ie(),{close:n}=R();return e.jsx(_,{isDanger:!0,isLoading:r.isPending,title:e.jsx(t,{message:"Delete saved reply"}),body:e.jsx(t,{message:"Are you sure you want to delete this saved reply?"}),confirm:e.jsx(t,{message:"Delete"}),onConfirm:()=>{r.mutate({ids:[a.id]},{onSuccess:()=>n()})}})}const x=[{key:"shared",label:s("Shared"),description:s("Whether reply is marked as shared"),defaultOperator:m.eq,control:{type:d.BooleanToggle,defaultValue:!0}},{key:"user_id",label:s("Owner"),description:s("User this reply was created by"),defaultOperator:m.eq,control:{type:d.SelectModel,model:Q}},{key:"group_id",label:s("Group"),description:s("Group this reply belongs to"),defaultOperator:m.eq,control:{type:d.SelectModel,model:"group"}},U({description:s("Date reply was created")}),z({description:s("Date reply was last updated")})];function na(){const a=E(),n=F().some(i=>{var c;return!!((c=i.handle)!=null&&c.forCurrentUser)}),{searchParams:p,sortDescriptor:y,mergeIntoSearchParams:l,setSearchQuery:f,isFiltering:b}=J(N),o=re({...g.cannedReplies.index({...p,forCurrentUser:n})});return e.jsxs(ee,{children:[e.jsx($,{query:o}),e.jsx(ae,{title:e.jsx(t,{message:"Saved replies"}),showSidebarToggleButton:!0,rightContent:e.jsx(W,{variant:"button",link:M.pages.savedReplies,size:"xs"})}),e.jsxs(te,{children:[e.jsx(V,{actions:e.jsx(me,{}),searchValue:p.query,onSearchChange:f,filters:x}),e.jsx(Z,{filters:x}),e.jsxs(se,{children:[e.jsx(L,{columns:ne,data:o.items,sortDescriptor:y,onSortChange:l,enableSelection:!1,cellHeight:"h-80",onAction:i=>{a(`${i.id}/update`)}}),o.isEmpty&&e.jsx(X,{image:G,isFiltering:b,title:e.jsx(t,{message:"No saved replies have been created yet"}),filteringTitle:e.jsx(t,{message:"No matching replies"})}),e.jsx(Y,{hideIfOnlyOnePage:!0,query:o,onPageChange:i=>l({page:i}),onPerPageChange:i=>l({perPage:i})})]})]})]})}function me(){return e.jsx(K,{elementType:j,to:"new",children:e.jsx(t,{message:"Add reply"})})}export{na as Component};
