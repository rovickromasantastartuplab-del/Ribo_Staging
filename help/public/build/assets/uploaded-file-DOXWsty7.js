var c=Object.defineProperty;var l=(t,e,i)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var n=(t,e,i)=>l(t,typeof e!="symbol"?e+"":e,i);import{bg as d}from"./client-DtfdVV77.js";function m(t){var i;return((i=/(?:\.([^.]+))?$/.exec(t))==null?void 0:i[1])||""}function p(t){const e={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml",log:"text/plain"},i=t.name?m(t.name):null;return t.type?t.type:i&&i in e?e[i]:"application/octet-stream"}class x{constructor(e,i){n(this,"id");n(this,"fingerprint");n(this,"name");n(this,"relativePath","");n(this,"size");n(this,"mime","");n(this,"extension","");n(this,"native");n(this,"lastModified");n(this,"cachedData");this.id=d(),this.name=e.name,this.size=e.size,this.mime=p(e),this.lastModified=e.lastModified,this.extension=m(e.name)||"bin",this.native=e,i=i||e.webkitRelativePath||"",i=i.replace(/^\/+/g,""),i&&i.split("/").length>1&&(this.relativePath=i),this.fingerprint=h({name:this.name,size:this.size,mime:this.mime,lastModified:this.lastModified})}get data(){return new Promise(e=>{this.cachedData&&e(this.cachedData);const i=new FileReader;i.addEventListener("load",()=>{this.cachedData=i.result,e(this.cachedData)}),this.extension==="json"?i.readAsText(this.native):i.readAsDataURL(this.native)})}}class F{constructor(e){n(this,"id");n(this,"fingerprint");n(this,"name");n(this,"relativePath","");n(this,"size");n(this,"mime","");n(this,"extension","");n(this,"native",null);n(this,"lastModified");this.id=d(),this.name=e.name,this.size=e.file_size??0,this.mime=e.mime,this.lastModified=e.updated_at||"",this.extension=e.extension||"bin",this.relativePath=e.path,this.fingerprint=h({name:this.name,size:this.size,mime:this.mime,lastModified:this.lastModified})}get data(){return new Promise((e,i)=>{i("UploadedFileFromEntry does not have file data")})}}function h({name:t,mime:e,size:i,relativePath:a,lastModified:o}){let s="be";return typeof t=="string"&&(s+=`-${r(t.toLowerCase())}`),e&&(s+=`-${e}`),typeof a=="string"&&(s+=`-${r(a.toLowerCase())}`),i!==void 0&&(s+=`-${i}`),o!==void 0&&(s+=`-${o}`),s}function g(t){return t.charCodeAt(0).toString(32)}function r(t){let e="";return t.replace(/[^A-Z0-9]/gi,i=>(e+=`-${g(i)}`,"/"))+e}export{x as U,F as a};
