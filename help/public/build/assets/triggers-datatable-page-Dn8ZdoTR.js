import{r as u,aZ as x,j as e,T as a,av as h,B as j,L as l,D,aj as f,al as y,i as b,s as T,k as w,q as S}from"./client-DtfdVV77.js";import{A as C}from"./admin-config-DXsixO44.js";import{o as g,h as P}from"./main-BGmGAxtx.js";import{D as v}from"./settings-links-CRsxvJIZ.js";import{G as k}from"./global-loading-progress-DVC8NxPo.js";import{D as E}from"./data-table-add-item-button-B_2m2pad.js";import{D as B}from"./data-table-header-CdCZHch7.js";import{D as I}from"./data-table-pagination-footer-B4yyc06A.js";import{u as L}from"./use-datatable-search-params-dzq5X78n.js";import{D as A}from"./data-table-emty-state-message-DsPxSC6g.js";import{a as H,D as q,b as F,c as N}from"./datatable-page-with-header-layout-xcCtlWaX.js";import{u as M}from"./use-datatable-query-v3pOHYke.js";import{T as Q}from"./table-CynOKbaN.js";import{F as R}from"./formatted-number-CIAFur2S.js";import{E as _}from"./Edit-BaEHOLuK.js";import{C as K}from"./confirmation-dialog-BzXs9ksK.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./custom-menu-Dvq-fOnC.js";import"./external-link-Cxcw6nc_.js";import"./book-open-D91H26Dq.js";import"./Add-B1HfWgJf.js";import"./FilterAlt-CRhKT7zD.js";import"./select-filter-panel-hjhYEdoY.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./filter-operator-names-BbrFb9i0.js";import"./select-D9niWe2H.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./normalized-model-field-D3Ui05eZ.js";import"./skeleton-D178v0-U.js";import"./accordion-Dmxnze9z.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./useGlobalListeners-BGMP113F.js";const U=""+new URL("software-engineer-BUg928cK.svg",import.meta.url).href,z=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(a,{message:"Name"}),body:t=>t.name},{key:"times_fired",allowsSorting:!0,header:()=>e.jsx(a,{message:"Times used"}),body:t=>e.jsx(R,{value:t.times_fired})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(D,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:t=>e.jsx(f,{size:"md",className:"text-muted",elementType:l,to:`/admin/triggers/${t.id}/edit`,children:e.jsx(_,{})})}];function Qe(){const[t,s]=u.useState([]),{searchParams:o,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:d}=L(x),m=M({...g.triggers.index({...o})}),p=e.jsxs(h,{type:"modal",children:[e.jsx(j,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(G,{selectedIds:t,onDelete:()=>s([])})]}),c=e.jsx(E,{elementType:l,to:"/admin/triggers/new",children:e.jsx(a,{message:"Add new trigger"})});return e.jsxs(H,{children:[e.jsx(P,{children:e.jsx(a,{message:"Triggers"})}),e.jsx(k,{query:m}),e.jsx(q,{title:e.jsx(a,{message:"Triggers"}),showSidebarToggleButton:!0,rightContent:e.jsx(v,{variant:"button",link:C.pages.triggers,size:"xs"})}),e.jsxs(F,{children:[e.jsx(B,{searchValue:o.query,onSearchChange:d,actions:c,selectedItems:t,selectedActions:p}),e.jsxs(N,{children:[e.jsx(Q,{columns:z,data:m.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:t,onSelectionChange:s,cellHeight:"h-64"}),m.isEmpty?e.jsx(A,{image:U,title:e.jsx(a,{message:"No triggers have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching triggers"})}):null,e.jsx(I,{query:m,onPageChange:n=>r({page:n}),onPerPageChange:n=>r({perPage:n})})]})]})]})}function G({selectedIds:t,onDelete:s}){const{close:o}=y(),i=b({mutationFn:()=>w.delete(`triggers/${t.join(",")}`),onSuccess:()=>{S.invalidateQueries({queryKey:g.triggers.invalidateKey}),s(),o()},onError:r=>T(r)});return e.jsx(K,{isDanger:!0,title:e.jsx(a,{message:"Delete triggers"}),body:e.jsx(a,{message:"Are you sure you want to delete selected triggers?"}),confirm:e.jsx(a,{message:"Delete"}),isLoading:i.isPending,onConfirm:()=>i.mutate()})}export{Qe as Component};
