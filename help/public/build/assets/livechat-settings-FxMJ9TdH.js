import{d as H,j as e,m,T as t,f as N,r as f,p as te,F as d,u as R,B as F,aw as se,ax as ae,az as b,aG as O,l as ie,e as p,aR as P,aj as ne,L as I,aL as J,cw as oe,cx as re}from"./client-DtfdVV77.js";import{A as ce}from"./admin-config-DXsixO44.js";import{D as $}from"./settings-links-CRsxvJIZ.js";import{u as E}from"./settings-layout-FQP6W4_q.js";import{S,a as T,u as le}from"./settings-section-button-CSsdbx0L.js";import{u as V}from"./use-admin-settings-DArjpbC9.js";import{C as K}from"./checkbox-CS7ILu6P.js";import{a as w}from"./settings-panel-gMfbp8IE.js";import{MenuItemsManager as me}from"./menu-settings--Rvw9jBi.js";import{B as de}from"./background-selector-BC7tBApe.js";import{u as Y}from"./use-clipboard-Jb2pyXiK.js";import{A as ue}from"./attributes-manager-D-sW2vlt.js";import{A as ge,P as he}from"./main-BGmGAxtx.js";import{F as D}from"./image-selector-fVyS7PG4.js";import{F as _}from"./select-D9niWe2H.js";import{w as B}from"./widget-navigation-CQEGuGCg.js";import{D as xe}from"./DragIndicator-CvftiD3i.js";import{m as pe,u as je}from"./use-sortable-CsHM4tcn.js";import{ThemeEditor as be}from"./themes-settings-page-BxUYtOSj.js";import{L}from"./external-link-Cxcw6nc_.js";import{A}from"./ArrowRight-BrD9zeUx.js";import{A as fe}from"./ArrowBack-DIhVch2U.js";import{I as ve}from"./Info-maeeGW26.js";import{A as we,a as ye}from"./accordion-Dmxnze9z.js";import{I as Se}from"./install-module-card-CNn61DHr.js";import{A as Ne,a as ke}from"./AssignmentInd-D5m1j73o.js";import{C as Ce}from"./Chat-C94dcr0C.js";import{R as Te}from"./Route-DzO-FrWL.js";import{T as Ie,a as We,b as Ae}from"./tabs-spjnXvK6.js";import"./dashboard-icons-BJ4c3Z5i.js";import"./library-icon-h4d3s9Ef.js";import"./messages-square-icon-D_3IR-rK.js";import"./Delete-DWP7kvj0.js";import"./Home-iO0iebLw.js";import"./SupervisorAccount-Bkn2ibMi.js";import"./Translate-DPB2wdvD.js";import"./TextFields-CM1xUWDR.js";import"./book-open-D91H26Dq.js";import"./custom-menu-Dvq-fOnC.js";import"./use-admin-settings-page-nav-config-D58KRD8y.js";import"./datatable-page-with-header-layout-xcCtlWaX.js";import"./use-toggle-dashboard-left-sidebar-DxaOS7gK.js";import"./toggle-left-sidebar-icon-j-5uTef5.js";import"./file-upload-provider-B4w-VsYu.js";import"./uploaded-file-DOXWsty7.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-DPNnjGhI.js";import"./useMutationState-Bmyxea6H.js";import"./blocker-dialog-B0Vc-LIE.js";import"./confirmation-dialog-BzXs9ksK.js";import"./OpenInFull-mOMLBQ1Z.js";import"./useSuspenseQuery-Bmt2-NKx.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./add-menu-item-dialog-BbUou4e9.js";import"./permission-selector-CRaW7I2O.js";import"./uc-first-pSl3nM3z.js";import"./form-chip-field-C7l8nGPv.js";import"./chip-list-DHXDGW6X.js";import"./Edit-BaEHOLuK.js";import"./use-previous-BLaxBq_s.js";import"./skeleton-D178v0-U.js";import"./use-filter-XfxMyUPQ.js";import"./Add-B1HfWgJf.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./accordtion-animation-BGCK95Hj.js";import"./isScrollable-BSEN4xi5.js";import"./use-droppable-CpvjuNXE.js";import"./useGlobalListeners-BGMP113F.js";import"./color-picker-dialog-CeCHU4u7.js";import"./Color-DrXN9ww8.js";import"./FormatColorFill-DNSNzsFD.js";import"./ArrowDownward-DHtsWMyK.js";import"./ArrowForward-DlUghUiH.js";import"./ArrowUpward-COT5Vlkx.js";import"./Image-Be6lBBa0.js";import"./css-props-from-bg-config-CgypBlFP.js";import"./radio-group-C_T7jNq6.js";import"./radio-DP8xYP6t.js";import"./simple-background-position-selector-D0fdRhCr.js";import"./pretty-attribute-type-DnpvguCK.js";import"./Lock-Dv_tThfr.js";import"./group-array-by-5IjT7qk6.js";import"./use-active-upload-CGOT7g6R.js";import"./open-upload-window-DE9Q8gNs.js";import"./shallow-BH2jDtXM.js";import"./AddAPhoto-Bl3FQpaJ.js";import"./progress-bar-BMzArYUQ.js";import"./file-input-config-DrcTpI3-.js";import"./websocket-updates-notifier-3Xk6dITh.js";import"./helpdesk-channel-CQKSbeKg.js";import"./Help-DMvOY11L.js";import"./HelpOutline-DkAeNvPf.js";import"./MoreVert-BVDYtk4z.js";import"./RestartAlt-DTi82oFC.js";import"./Tune-B3kaKuXY.js";import"./theme-value-to-hex-rRzfvjBj.js";import"./font-selector-fL3ytPy7.js";import"./OpenInNew-C06CZDpe.js";const Pe=m("When agent has not responded for :minutes minutes, transfer customer to another available agent."),Le=m("When there are no messages for :minutes minutes, mark chat as inactive."),Fe=m("When there are no messages for :minutes minutes, close the chat.");function Ve(){var i,n,o,r,l,c;const{data:a}=V(),s=H({defaultValues:{client:{lc:{timeout:{agent:((n=(i=a.client.lc)==null?void 0:i.timeout)==null?void 0:n.agent)??null,inactive:((r=(o=a.client.lc)==null?void 0:o.timeout)==null?void 0:r.inactive)??null,archive:((c=(l=a.client.lc)==null?void 0:l.timeout)==null?void 0:c.archive)??null}}}}});return e.jsxs(S.Form,{form:s,children:[e.jsx(z,{name:"client.lc.timeout.agent",defaultValue:5,label:Pe,description:e.jsx(t,{message:"If chat is in a group with manual assignment, chat will be put into queue instead."})}),e.jsx(z,{name:"client.lc.timeout.inactive",defaultValue:10,label:Le,description:e.jsx(t,{message:"Inactive chats are not included in agents' concurrent chats limit."})}),e.jsx(z,{name:"client.lc.timeout.archive",defaultValue:15,label:Fe,description:e.jsx(t,{message:"Customers can reopen closed chats by sending a new message to that chat."})})]})}function z({name:a,defaultValue:s,label:i,description:n}){const{getValues:o,setValue:r}=N(),[l,c]=f.useState(()=>!!o(a)),g=()=>{l?(c(!1),r(a,null,{shouldDirty:!0})):(c(!0),r(a,s,{shouldDirty:!0}))};return e.jsxs("div",{className:"mb-16 flex h-100 select-none items-start gap-14 rounded-panel border p-16",onClick:()=>g(),children:[e.jsx(K,{checked:l}),e.jsxs("div",{className:te(!l&&"opacity-60"),children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(t,{message:i.message,values:{minutes:e.jsx(d,{name:a,size:"2xs",type:"number",className:"mx-4 inline-block max-w-60",onClick:h=>h.stopPropagation()})}})}),e.jsx("div",{className:"text-xs text-muted",children:n})]})]})}function Me(){const{base_url:a}=R(),[s,i]=Y(`${a}/livechat`,{successDuration:1e3});return e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:e.jsx(t,{message:"Share a link to direct chat page without needing to install chat widget on your website."})}),e.jsx(F,{className:"mb-24 mt-6",variant:"outline",color:"primary",size:"xs",onClick:()=>i(),children:s?e.jsx(t,{message:"Link copied!"}):e.jsx(t,{message:"Copy chat link"})}),e.jsx(d,{name:"client.chatPage.title",label:e.jsx(t,{message:"Title"}),className:"mb-16"}),e.jsx(d,{name:"client.chatPage.subtitle",label:e.jsx(t,{message:"Subtitle"}),className:"mb-16",inputElementType:"textarea",rows:2})]})}function ze(){return e.jsxs("div",{children:[e.jsx(d,{name:"client.chatWidget.defaultMessage",label:e.jsx(t,{message:"Welcome message"}),className:"mb-16",required:!0}),e.jsx(d,{name:"client.chatWidget.inputPlaceholder",label:e.jsx(t,{message:"Input placeholder"}),className:"mb-16",required:!0}),e.jsx(d,{name:"client.chatWidget.agentsAwayMessage",label:e.jsx(t,{message:"No agents available"}),className:"mb-16",inputElementType:"textarea",rows:4,required:!0}),e.jsx(d,{name:"client.chatWidget.inQueueMessage",label:e.jsx(t,{message:"Customer is in queue"}),inputElementType:"textarea",rows:6,required:!0})]})}const De=[],He=ie.attributes.normalizedList({for:"agent"}),W=[{key:"client.chatWidget.forms.preChat",label:m("Pre-chat form")},{key:"client.chatWidget.forms.postChat",label:m("Post-chat form")}];function Re(){const a=E(o=>o.setPreviewRoute),[s,i]=f.useState(W[0].key),n=W.find(o=>o.key===s)??W[0];return e.jsxs("div",{children:[e.jsxs(se,{selectionMode:"single",selectedValue:s,onSelectionChange:o=>{o.endsWith("preChat")?a(x.preChatForm.route):a(x.postChatForm.route),i(o)},children:[e.jsx(F,{variant:"outline",endIcon:e.jsx(ge,{}),className:"mb-24",children:e.jsx(t,{...n.label})}),e.jsx(ae,{children:W.map(o=>e.jsx(b,{value:o.key,children:e.jsx(t,{...o.label})},o.key))})]}),e.jsx(Ee,{formKey:n.key},n.key)]})}function Ee({formKey:a}){const{setValue:s}=N(),i=O({name:`${a}.attributes`})||De,n=o=>{s(`${a}.attributes`,o,{shouldDirty:!0})};return e.jsxs("div",{children:[e.jsx(d,{name:`${a}.information`,label:e.jsx(t,{message:"Information"}),inputElementType:"textarea",rows:2,className:"mb-12"}),e.jsx("div",{className:"mb-4 text-sm",children:e.jsx(t,{message:"Attributes"})}),e.jsx(ue,{queryOptions:He,selectedAttributeIds:i,onChange:n}),e.jsx("div",{className:"mt-24 border-t pt-24",children:e.jsx(p,{name:`${a}.disabled`,description:e.jsx(t,{message:"Form will not be visible to customers when disabled."}),children:e.jsx(t,{message:"Disabled"})})})]})}function _e(){return e.jsxs("div",{children:[e.jsx(D,{name:"client.chatWidget.launcherIcon",label:e.jsx(t,{message:"Custom icon"}),uploadType:P.brandingImages,showRemoveButton:!0,className:"mb-16"}),e.jsxs(_,{selectionMode:"single",name:"client.chatWidget.position",label:e.jsx(t,{message:"Position"}),className:"mb-16",children:[e.jsx(b,{value:"left",children:e.jsx(t,{message:"Left"})}),e.jsx(b,{value:"right",children:e.jsx(t,{message:"Right"})})]}),e.jsx(d,{type:"number",name:"client.chatWidget.spacing.side",label:e.jsx(t,{message:"Side spacing"}),endAdornment:e.jsx("div",{className:"text-sm",children:"px"}),className:"mb-16"}),e.jsx(d,{type:"number",name:"client.chatWidget.spacing.bottom",label:e.jsx(t,{message:"Bottom spacing"}),endAdornment:e.jsx("div",{className:"text-sm",children:"px"}),className:"mb-16"}),e.jsx(p,{name:"client.chatWidget.hide",description:e.jsx(t,{message:"When enabled, chat launcher will be hidden by default and will need to be shown manually via API."}),children:e.jsx(t,{message:"Hide launcher"})})]})}function Be(){return e.jsxs("div",{children:[e.jsxs(_,{name:"client.chatWidget.defaultScreen",selectionMode:"single",label:e.jsx(t,{message:"Default screen"}),className:"mb-16",children:[B.map(a=>e.jsx(b,{value:a.route,children:e.jsx(t,{...a.label})},a.route)),e.jsx(b,{value:"conversations/new",children:e.jsx(t,{message:"New chat"})}),e.jsx(b,{value:"tickets/new",children:e.jsx(t,{message:"New ticket"})})]}),e.jsx(p,{name:"client.chatWidget.hideNavigation",className:"mb-16",children:e.jsx(t,{message:"Hide bottom navigation"})}),e.jsx(Ue,{})]})}function Ue(){const a=B.map(r=>r.route),s=N(),i=()=>s.getValues("client.chatWidget.screens")||[],[n,o]=f.useState(()=>{const r=i(),l=c=>r.includes(c)?r.indexOf(c):r.length;return[...a].sort((c,g)=>l(c)-l(g))});return e.jsxs("div",{children:[e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Screens"})}),n.map(r=>e.jsx(qe,{item:r,items:n,onToggle:(l,c)=>{const g=i(),h=c?[...g,l]:g.filter(j=>j!==l);s.setValue("client.chatWidget.screens",h,{shouldDirty:!0})},onSortEnd:(l,c)=>{const g=pe(n,l,c);o(g);const h=i(),j=g.filter(v=>h.includes(v)).map(v=>v);s.setValue("client.chatWidget.screens",j,{shouldDirty:!0})}},r))]})}function qe({item:a,items:s,onToggle:i,onSortEnd:n}){const o=f.useRef(null),{watch:r}=N(),{sortableProps:l,dragHandleRef:c}=je({item:a,items:s,type:"widgetScreensSortable",ref:o,onSortEnd:n,strategy:"liveSort"}),h=(r("client.chatWidget.screens")||[]).includes(a),j=B.find(v=>v.route===a).label;return e.jsx(T,{ref:o,elementType:"div",startIcon:e.jsx(ne,{ref:c,size:"sm",children:e.jsx(xe,{className:"text-muted hover:cursor-move"})}),endIcon:e.jsx(K,{checked:h,onChange:()=>i(a,!h)}),...l,children:e.jsx(t,{...j})})}function Ge(){const{setActiveSection:a}=k();return e.jsxs("div",{children:[e.jsx(Qe,{}),e.jsx(w,{margin:"mb-16",size:"sm",children:e.jsx(t,{message:"Themes"})}),e.jsxs(_,{selectionMode:"single",name:"client.chatWidget.defaultTheme",label:e.jsx(t,{message:"Default widget theme"}),className:"mb-16",children:[e.jsx(b,{value:"light",children:e.jsx(t,{message:"Light"})}),e.jsx(b,{value:"dark",children:e.jsx(t,{message:"Dark"})}),e.jsx(b,{value:"system",children:e.jsx(t,{message:"System"})})]}),e.jsx(p,{className:"mb-24",name:"client.chatWidget.inheritThemes",description:e.jsx(t,{message:"Use themes configured <a>globally</a>, or set unique colors for chat widget.",values:{a:s=>e.jsx(I,{className:L,to:"/admin/settings/themes",target:"_blank",children:s})}}),children:e.jsx(t,{message:"Use global themes"})}),e.jsx(T,{onClick:()=>a("themesEditor"),endIcon:e.jsx(A,{className:"text-muted"}),children:e.jsx(t,{message:"Customize widget themes"})})]})}function $e(){return e.jsxs(M,{backLabel:e.jsx(t,{message:"Style"}),children:[e.jsx(t,{message:"Customize widget themes"}),e.jsx(be,{size:"lg",type:"chatWidget"})]})}function Qe(){return e.jsxs("div",{className:"mb-28 border-b border-b-divider-lighter pb-28",children:[e.jsxs(w,{margin:"mb-16",size:"sm",children:[e.jsx(t,{message:"Logos"}),e.jsx(t,{message:"Use a JPG, PNG, or GIF smaller than 100KB. 50px by 50px works best."})]}),e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(D,{name:"client.chatWidget.logo_dark",label:e.jsx(t,{message:"Light mode"}),uploadType:P.brandingImages,className:"min-w-[186px] max-w-max",defaultValue:"images/logo-dark-mobile.png"}),e.jsx(D,{name:"client.chatWidget.logo_light",label:e.jsx(t,{message:"Dark mode"}),uploadType:P.brandingImages,className:"min-w-[186px] max-w-max",defaultValue:"images/logo-light-mobile.png"})]})]})}const x={home:{route:"lc/widget",label:m("Home")},conversation:{route:"lc/widget/conversations/new",label:m("Conversation")},preChatForm:{route:"lc/widget/conversations/new?form=preChat",label:m("Pre-chat form")},postChatForm:{route:"lc/widget/conversations/new?form=postChat",label:m("Post-chat form")},messages:{route:"lc/widget/conversations",label:m("Messages")},chatPage:{route:"livechat",label:m("Chat page")}},y=[{name:"widget",label:m("Widget"),categories:[{label:m("Home screen"),route:x.home.route,name:"homeScreen",sections:["background","messages","links"],component:Je},{label:m("Chat screen"),route:x.conversation.route,name:"chatScreen",component:ze},{label:m("Launcher"),route:x.home.route,name:"launcher",component:_e},{label:m("Style"),route:x.home.route,name:"style",sections:["themesEditor"],component:Ge},{label:m("Active screens"),route:x.home.route,name:"screens",component:Be},{label:m("Forms"),route:x.preChatForm.route,name:"forms",component:Re},{label:m("Chat page"),route:x.chatPage.route,name:"chatPage",component:Me}]},{name:"timeouts",label:m("Timeouts")},{name:"install",label:m("Install")},{name:"security",label:m("Security")}];function k(){const a=E(u=>u.setPreviewRoute),[s,i]=J(),n=s.get("tab")||"appearance";let o=y.findIndex(u=>u.name===n);o===-1&&(o=0);const r=u=>{const C=y[u];C&&(i({tab:C.name},{replace:!0}),a(x.home.route))},l=y[o],c="categories"in l?l.categories:[],g=s.get("category"),h=c.findIndex(u=>u.name===g),j=c[h],v=u=>{if(!u){i({tab:n},{replace:!0}),a(x.home.route);return}const C=c.find(ee=>ee.name===u);C&&(i({category:u,tab:n},{replace:!0}),a(C.route))},U=j&&"sections"in j?j.sections:[],q=s.get("section"),X=U.findIndex(u=>u===q),Z=u=>{g&&(u===null?i({tab:n,category:g},{replace:!0}):U.includes(u)&&i({section:u,tab:n,category:g},{replace:!0}))};let G=x.home.route;return h>-1&&c[h].route&&(G=c[h].route),{activeTabName:n,activeTabIndex:o,setActiveTab:r,activeCategoryName:g,activeCategoryIndex:h,setActiveCategory:v,activeSectionName:q,activeSectionIndex:X,setActiveSection:Z,activeUri:G}}function Oe(){const[a]=J(),s=a.get("tab"),i=a.get("category");if(s&&i){const n=y.find(r=>r.name===s),o=n&&"categories"in n?n.categories.find(r=>r.name===i):null;if(o!=null&&o.route)return o.route}return x.home.route}function M({backLabel:a,children:s}){const{setActiveSection:i}=k();return e.jsxs("div",{children:[e.jsx(F,{variant:"outline",onClick:()=>i(null),startIcon:e.jsx(fe,{}),className:"mb-24",children:a}),e.jsx(w,{children:s[0]}),s[1]]})}function Je(){const{setActiveSection:a}=k(),s=N(),i=O({control:s.control,name:"client.chatWidget.showHcCard"});return e.jsxs("div",{children:[e.jsx(p,{className:"mb-24",name:"client.chatWidget.showAvatars",description:e.jsx(t,{message:"Whether active agent avatars should be visible."}),children:e.jsx(t,{message:"Show avatars"})}),e.jsx(T,{onClick:()=>a("background"),endIcon:e.jsx(A,{className:"text-muted"}),children:e.jsx(t,{message:"Background"})}),e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Content"})}),e.jsx(T,{onClick:()=>a("messages"),endIcon:e.jsx(A,{className:"text-muted"}),children:e.jsx(t,{message:"Messages"})}),e.jsx(T,{onClick:()=>a("links"),endIcon:e.jsx(A,{className:"text-muted"}),children:e.jsx(t,{message:"Links"})}),e.jsx(p,{className:"mt-14",name:"client.chatWidget.showHcCard",children:e.jsx(t,{message:"Show help center card"})}),i&&e.jsx(p,{className:"mt-14",name:"client.chatWidget.hideHomeArticles",children:e.jsx(t,{message:"Hide suggested articles"})}),e.jsx(p,{name:"client.chatWidget.homeShowTickets",className:"mt-14",children:e.jsx(t,{message:"Show tickets section"})})]})}function Ke(){const{watch:a,setValue:s}=N();return e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Background"}),e.jsx(de,{uploadType:P.brandingImages,value:a("client.chatWidget.background"),onChange:i=>{const n=oe(i);delete n.label,s("client.chatWidget.background",n,{shouldDirty:!0})},underTabs:e.jsx(p,{name:"client.chatWidget.fadeBg",className:"mb-20",children:e.jsx(t,{message:"Fade background"})})})]})}function Ye(){return e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Messages"}),e.jsxs("div",{children:[e.jsx(d,{name:"client.chatWidget.greeting",label:e.jsx(t,{message:"Greeting"}),className:"mb-16",description:e.jsx(t,{message:"Greeting for when user name is available."})}),e.jsx(d,{name:"client.chatWidget.greetingAnonymous",label:e.jsx(t,{message:"Anonymous greeting"}),className:"mb-16",description:e.jsx(t,{message:"Greeting for when user name is not available."})}),e.jsx(d,{name:"client.chatWidget.introduction",label:e.jsx(t,{message:"Introduction"})}),e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Chats"})}),e.jsx(d,{name:"client.chatWidget.homeNewChatTitle",label:e.jsx(t,{message:"New chat title"}),className:"mb-16"}),e.jsx(d,{name:"client.chatWidget.homeNewChatSubtitle",label:e.jsx(t,{message:"New chat description"})}),e.jsx(w,{margin:"mt-24 mb-16",size:"sm",children:e.jsx(t,{message:"Tickets"})}),e.jsx(p,{name:"client.chatWidget.homeShowTickets",className:"mb-16",children:e.jsx(t,{message:"Show tickets section"})}),e.jsx(d,{name:"client.chatWidget.homeNewTicketTitle",label:e.jsx(t,{message:"New ticket title"}),className:"mb-16"}),e.jsx(d,{name:"client.chatWidget.homeNewTicketSubtitle",label:e.jsx(t,{message:"New ticket description"})}),e.jsxs("div",{className:"mt-24 text-sm text-muted",children:[e.jsx(ve,{size:"xs",className:"mr-4"}),e.jsx(t,{message:"You can translate these messages from <a>localizations page.</a>",values:{a:a=>e.jsx(I,{className:L,to:"/admin/localizations",target:"_blank",children:a})}})]})]})]})}function Xe(){return e.jsx(f.Fragment,{children:e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Links"}),e.jsx(me,{formPath:"client.chatWidget.homeLinks"})]})})}const Ze=y[0].categories;function et(){var n,o,r,l;const{data:a}=V(),s=a.client.chatWidget??{},i=H({defaultValues:{themes:a.themes.filter(c=>c.type==="chatWidget"),client:{chatWidget:{logo_light:s.logo_light??"",logo_dark:s.logo_dark??"",showAvatars:s.showAvatars??!0,background:s.background??{},fadeBg:s.fadeBg??!0,showHcCard:s.showHcCard??!0,hideHomeArticles:s.hideHomeArticles??!1,greeting:s.greeting??"",greetingAnonymous:s.greetingAnonymous??"",introduction:s.introduction??"",homeNewChatTitle:s.homeNewChatTitle??"",homeNewChatSubtitle:s.homeNewChatSubtitle??"",homeShowTickets:s.homeShowTickets??!1,homeNewTicketTitle:s.homeNewTicketTitle??"",homeNewTicketSubtitle:s.homeNewTicketSubtitle??"",homeLinks:s.homeLinks??[],launcherIcon:s.launcherIcon??"",position:s.position??"right",spacing:{side:((n=s.spacing)==null?void 0:n.side)??"16",bottom:((o=s.spacing)==null?void 0:o.bottom)??"16"},hide:s.hide??!1,defaultTheme:s.defaultTheme??"light",inheritThemes:s.inheritThemes??!1,defaultScreen:s.defaultScreen??"/",hideNavigation:s.hideNavigation??!1,screens:s.screens??[],forms:s.forms??{preChat:{disabled:!1,attributes:[]},postChat:{disabled:!1,attributes:[]}},defaultMessage:s.defaultMessage??"",inputPlaceholder:s.inputPlaceholder??"",agentsAwayMessage:s.agentsAwayMessage??"",inQueueMessage:s.inQueueMessage??""},chatPage:{title:((r=a.client.chatPage)==null?void 0:r.title)??"",subtitle:((l=a.client.chatPage)==null?void 0:l.subtitle)??""}}}});return e.jsx(S.Form,{form:i,mergePreviewSettings:!1,children:e.jsx(tt,{})})}function tt(){const{activeSectionName:a,activeCategoryName:s,setActiveCategory:i}=k();return a==="background"?e.jsx(Ke,{}):a==="messages"?e.jsx(Ye,{}):a==="links"?e.jsx(Xe,{}):a==="themesEditor"?e.jsx($e,{}):e.jsx(we,{expandedValues:s?[s]:[],onExpandedChange:([n])=>{i(n)},size:"lg",variant:"outline",children:Ze.map(n=>{const o=n.component;return e.jsx(ye,{label:e.jsx(t,{...n.label}),value:n.name,children:e.jsx(o,{})},n.name)})})}function st(){return e.jsxs("div",{className:"prose-col prose prose-sm dark:prose-invert prose-p:text-main",children:[e.jsx("p",{children:e.jsx(t,{message:"To install livechat widget on your site, copy and paste this code snippet before the </body> tag on every page you want the widget to appear."})}),e.jsx(Q,{}),e.jsx("p",{children:e.jsx(t,{message:"If your helpdesk is on a different domain than the loader script, or you need to specify the domain manuallly for some other reason, you can specify it via settings:"})}),e.jsx(Q,{showDomainSettings:!0})]})}function Q({showDomainSettings:a=!1}){const s=f.useRef(null),{base_url:i}=R();return f.useEffect(()=>{s.current&&re(s.current,"dark",!0)},[]),e.jsx("pre",{ref:s,children:e.jsxs("code",{children:[a&&`<script>
  window.BeChatSettings = {
    widgetDomain: "https://your-site.com",
  };
<\/script>
`,`<script src="${i}/livechat-loader.js"><\/script>`]})})}const at=({currentLocation:a,nextLocation:s})=>{const i=new URLSearchParams(a.search).get("tab"),n=new URLSearchParams(s.search).get("tab");return i===n};function ea(){const a=Oe(),{modules:s}=R();return s.livechat.installed?e.jsxs(S,{title:e.jsx(t,{message:"Livechat"}),gridCols:"grid-cols-[1fr,auto]",allowNavigation:at,defaultRoute:a,availableRoutes:x,docsLink:ce.settings.liveChat,children:[e.jsxs(S.Content,{width:"w-auto",children:[e.jsxs("div",{className:"mb-24",children:[e.jsxs("div",{className:"flex items-center gap-8 text-sm",children:[e.jsx(Te,{size:"sm",className:"text-primary"}),e.jsx(I,{to:"/admin/triggers",className:L,target:"_blank",children:e.jsx(t,{message:"Route conversations to groups by creating a trigger"})})]}),e.jsxs("div",{className:"mt-14 flex items-center gap-8 text-sm",children:[e.jsx(Ne,{size:"sm",className:"text-primary"}),e.jsx(I,{to:"/dashboard/team/groups/1/edit",className:L,target:"_blank",children:e.jsx(t,{message:"Set conversation assignment strategy"})})]})]}),e.jsx(it,{})]}),e.jsx(ot,{})]}):e.jsx(lt,{})}function it(){const{activeTabIndex:a,setActiveTab:s}=k();return e.jsxs(f.Fragment,{children:[e.jsx(Ie,{selectedTab:a,onTabChange:s,children:e.jsx(We,{children:y.map(i=>e.jsx(Ae,{children:e.jsx(t,{...i.label})},i.name))})}),e.jsx("div",{className:"pt-24",children:e.jsx(nt,{})})]})}function nt(){const{activeTabName:a}=k();switch(a){case"timeouts":return e.jsx(Ve,{});case"security":return e.jsx(rt,{});case"install":return e.jsx(st,{});default:return e.jsx(et,{})}}function ot(){const a=E(i=>i.setIframeWindow),s=le();return e.jsx("div",{className:"col-[2/-1] row-[2/-1] hidden w-580 grid-rows-subgrid border-l @6xl/with-preview:grid",children:s&&e.jsxs(f.Fragment,{children:[e.jsx(S.PreviewHeader,{padding:"p-10",className:"border-b shadow"}),e.jsx("div",{className:"col-[1/-1] row-[2/3] bg-alt",children:e.jsx("iframe",{src:s,className:"mx-auto h-full w-[432px]",ref:i=>a((i==null?void 0:i.contentWindow)??null)})})]})})}function rt(){var i,n;const{data:a}=V(),s=H({defaultValues:{client:{lc:{trusted_domains:((i=a==null?void 0:a.client.lc)==null?void 0:i.trusted_domains)??"",enforce_hmac:((n=a==null?void 0:a.client.lc)==null?void 0:n.enforce_hmac)??!1}}}});return e.jsxs(S.Form,{form:s,children:[e.jsx(d,{name:"client.lc.trusted_domains",label:e.jsx(t,{message:"Trusted domains"}),inputElementType:"textarea",rows:4,description:e.jsx(t,{message:"List your trusted domains and subdomains, separated by commas. To mark all your subdomains as trusted, use an asterisk as a placeholder like this: *.example.com. If you leave this field blank, your chat widget can be added to any domain."})}),e.jsxs("div",{className:"mt-24 border-t pt-24",children:[e.jsx(p,{name:"client.lc.enforce_hmac",description:e.jsx(t,{message:"When identifiying logged in users in widget, always verify identity using secret key.",values:{a:o=>e.jsx(I,{className:"underline",to:"https://support.vebto.com/hc/articles/42/71/239/identifying-logged-in-users-in-livechat-widget",target:"_blank",children:o})}}),children:e.jsx(t,{message:"Enforce identity verification"})}),e.jsxs("div",{className:"mb-24 mt-12 flex flex-col gap-8 text-sm",children:[e.jsx($,{size:"sm",icon:e.jsx(he,{}),link:"https://support.vebto.com/hc/articles/42/71/239/identifying-logged-in-users-in-livechat-widget",children:e.jsx(t,{message:"Identifying logged in users"})}),e.jsx($,{size:"sm",icon:e.jsx(ke,{}),link:"https://support.vebto.com/hc/articles/42/71/238/enforcing-identity-verification-in-livechat-widget",children:e.jsx(t,{message:"Enforce identity verifications"})})]}),e.jsx(ct,{})]})]})}function ct(){const a=V(),[s,i]=Y(a.data.server.widget_hmac_secret??"");return e.jsx(F,{variant:"outline",onClick:()=>i(),children:s?e.jsx(t,{message:"Copied key to clipboard!"}):e.jsx(t,{message:"Copy secret key"})})}function lt(){return e.jsx(Se,{title:"Connect in Real-Time with Live Chat",description:"Don't wait for an email. Add Live Chat to talk with visitors in real-time, solve their problems instantly, and capture more leads. Use page tracking and automated campaigns to proactively engage and boost conversions.",icon:e.jsx(Ce,{size:"lg"}),getModuleLabel:e.jsx(t,{message:"Get LiveChat addon"}),moduleName:"livechat"})}export{ea as Component,lt as NotInstalledCard};
