import{j as e,T as a,b7 as j,aX as N,x as T,h as b,B as _,L as C,ac as I,r as l,aa as D,ab as B,m as z,l as F,az as f}from"./client-DtfdVV77.js";import{v as M,h as P}from"./custom-menu-Dvq-fOnC.js";import{H as q}from"./hc-search-bar-Bi18-IXo.js";import{s as H}from"./search-D3bB1V5N.js";import{D as L}from"./data-table-pagination-footer-B4yyc06A.js";import{u as Q}from"./use-datatable-search-params-dzq5X78n.js";import{D as R}from"./data-table-emty-state-message-DsPxSC6g.js";import{N as A}from"./main-BGmGAxtx.js";import{T as E}from"./table-CynOKbaN.js";import{u as w}from"./useSuspenseQuery-Bmt2-NKx.js";import{B as $,a as y}from"./breadcrumb-CaNBY_Ut.js";import{S as V}from"./select-D9niWe2H.js";import"./article-link-kVBPNf7I.js";import"./slugify-string-CGmMIJK7.js";import"./article-path-CQn_uF_m.js";import"./category-link-DefoIvjU.js";import"./use-keybind-DRgaCeX0.js";import"./useGlobalListeners-BGMP113F.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./combobox-CFh39yI7.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./checkbox-CS7ILu6P.js";import"./CheckBoxOutlineBlank-DU0ZdwTb.js";import"./skeleton-D178v0-U.js";import"./ArrowDownward-DHtsWMyK.js";import"./useEffectEvent-Offmqu_S.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";const K=[{key:"summary",visibleInMode:"all",header:()=>e.jsx(a,{message:"Summary"}),body:s=>e.jsx(X,{conversation:s}),width:"flex-3 min-w-280"},{key:"id",allowsSorting:!0,header:()=>e.jsx(a,{message:"ID"}),width:"w-90",body:s=>`#${s.id}`},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(a,{message:"Created"}),width:"w-100",body:s=>e.jsx(j,{date:s.created_at,style:"narrow"})},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(a,{message:"Last updated"}),width:"w-100",body:s=>e.jsx(j,{date:s.updated_at,style:"narrow"})},{key:"status",sortingKey:"status_category",allowsSorting:!0,header:()=>e.jsx(a,{message:"Status"}),visibleInMode:"all",width:"w-112",body:s=>e.jsx("div",{className:"w-max",children:e.jsx(N,{size:"sm",color:s.status_category>=T.pending?"primary":void 0,radius:"rounded-button",className:"min-w-64 text-center font-medium capitalize",children:e.jsx(a,{message:s.customer_status_label??s.status_label})})})}];function X({conversation:s}){return e.jsxs("div",{className:"pr-14",children:[e.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:s.subject}),s.latest_message&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap pt-4 font-normal text-muted",children:s.latest_message.body})]})}function ke(){const s=b();return e.jsxs("div",{children:[e.jsx(A,{menuPosition:"header",children:e.jsx(q,{})}),e.jsxs("main",{className:"container mx-auto px-24 pb-48",children:[e.jsxs($,{size:"sm",className:"mb-48 mt-34",children:[e.jsx(y,{onSelected:()=>s("/hc"),children:e.jsx(a,{message:"Help center"})}),e.jsx(y,{onSelected:()=>s("/hc/tickets"),children:e.jsx(a,{message:"Tickets"})})]}),e.jsxs("div",{className:"mb-34 flex items-start justify-between gap-12",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:e.jsx(a,{message:"My tickets"})}),e.jsx(_,{elementType:C,to:"/hc/tickets/new",size:"sm",variant:"outline",children:e.jsx(a,{message:"New ticket"})})]}),e.jsx(Y,{})]})]})}function Y(){var u,p,x,h;const{trans:s}=I(),i=l.useRef(null),n=b(),{searchParams:t,mergeIntoSearchParams:m,setSearchQuery:c,sortDescriptor:v}=Q(M),o=w(P.customerConversations.index(t)),d=o.data.pagination.data,S=!!t.query||!!t.statusId,k=d.length?e.jsxs(l.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx(E,{className:"min-w-[870px]",columns:K,data:d,sortDescriptor:v,onSortChange:r=>m(r),enableSelection:!1,onAction:r=>n(`/hc/tickets/${r.id}`),cellHeight:"h-70"})}),(((p=(u=o.data)==null?void 0:u.pagination)==null?void 0:p.next_page)||((h=(x=o.data)==null?void 0:x.pagination)==null?void 0:h.prev_page))&&e.jsx(L,{className:"mt-12 w-full",query:o,onPageChange:r=>m({page:r})})]}):e.jsx(G,{isFiltering:S});return e.jsxs(l.Fragment,{children:[e.jsxs("form",{className:"mb-34 items-end justify-between gap-24 md:flex",onSubmit:r=>{var g;r.preventDefault(),c((g=i.current)==null?void 0:g.value)},children:[e.jsx(D,{className:"flex-auto max-md:mb-24",inputRef:i,defaultValue:t.query,onBlur:()=>c(),placeholder:s(z("Search tickets")),startAdornment:e.jsx(B,{})}),e.jsx(J,{value:t.statusId,onChange:r=>m({statusId:r})})]}),k]})}function G({isFiltering:s}){return e.jsx(R,{isFiltering:s,size:"sm",className:"mt-48",image:H,title:e.jsx(a,{message:"You have not created any tickets yet"}),filteringTitle:e.jsx(a,{message:"No tickets match your search query or filters"})})}function J({value:s="",onChange:i}){const n=w(F.statuses.dropdownList("user"));return e.jsxs(V,{className:"flex-shrink-0 md:min-w-172",selectionMode:"single",selectedValue:s??"",onSelectionChange:t=>i(t),children:[e.jsx(f,{value:"",children:e.jsx(a,{message:"All tickets"})}),n.data.statuses.map(t=>e.jsx(f,{value:`${t.id}`,children:e.jsx(a,{message:t.label})},t.id))]})}export{ke as Component};
