import{j as e,aG as p,f as v,T as a,r as A,aj as h,as as S,aw as R,B as w,ax as _,az as r,be as V,b2 as M,b1 as x,av as E,al as T,am as $,an as B,ap as O,c0 as L,F as b,e as P,X as H,l as Q,Q as G}from"./client-DtfdVV77.js";import{d as W,e as q,u as X}from"./main-BGmGAxtx.js";import{d as Y,u as I}from"./use-all-available-columns-CB_-a0g_.js";import{A as z}from"./Add-B1HfWgJf.js";import{D as J}from"./DragHandle-CczVUV80.js";import{u as K,m as U}from"./use-sortable-CsHM4tcn.js";import{F as Z}from"./filter-operator-names-BbrFb9i0.js";import{N as ee,I as se,C as ae,S as ne,D as te}from"./select-filter-panel-hjhYEdoY.js";import{S as oe,F as g}from"./select-D9niWe2H.js";import{D as ie,d as re}from"./dashboard-icons-BJ4c3Z5i.js";import{E as le}from"./Edit-BaEHOLuK.js";import{F as f}from"./radio-DP8xYP6t.js";import{F as ce}from"./radio-group-C_T7jNq6.js";function D({children:s,description:n}){return e.jsxs("div",{className:"mb-24 mt-64",children:[e.jsx("div",{className:"text-lg",children:s}),n&&e.jsx("div",{className:"text-sm text-muted",children:n})]})}function de(){let s=p({name:"columns"});s!=null&&s.length||(s=Y);const{setValue:n}=v(),l=i=>{n("columns",[...s,i],{shouldDirty:!0})},o=I();return e.jsxs("div",{className:"mb-64",children:[e.jsx(D,{description:e.jsx(a,{message:"Choose which columns appear in the view by default. Drag and drop to reorder them."}),children:e.jsx(a,{message:"Columns"})}),e.jsx(W,{className:"max-w-384 space-y-8",children:s.map(i=>{const m=o.find(d=>d.key===i);return m?e.jsx(me,{columnKey:i,columns:s,label:m.label},i):null})}),e.jsx(ue,{selectedColumns:s,onSelected:l})]})}function me({columnKey:s,columns:n,label:l}){const{setValue:o}=v(),i=A.useRef(null),{sortableProps:m,dragHandleRef:d}=K({item:s,items:n,type:"columnsEditor",ref:i,onSortEnd:(t,c)=>{o("columns",U(n,t,c),{shouldDirty:!0})}}),u=t=>{o("columns",n.filter(c=>c!==t),{shouldDirty:!0})};return e.jsx(q,{ref:i,...m,padding:"p-6",className:"rounded-input border text-sm capitalize",startIcon:e.jsx(h,{size:"xs",iconSize:"sm",ref:d,children:e.jsx(J,{})}),endSection:e.jsx(h,{size:"xs",iconSize:"sm",onClick:()=>u(s),children:e.jsx(S,{})}),children:e.jsx(a,{...l})})}function ue({selectedColumns:s,onSelected:n}){const o=I().filter(i=>!s.includes(i.key));return e.jsxs(R,{children:[e.jsx(w,{size:"xs",variant:"flat",color:"primary",startIcon:e.jsx(z,{}),className:"mt-12",disabled:!o.length,children:e.jsx(a,{message:"Add column"})}),e.jsx(_,{children:o.map(i=>e.jsx(r,{value:i.key,onSelected:()=>n(i.key),children:e.jsx(a,{...i.label})},i.key))})]})}function xe({filters:s}){const{fields:n,append:l,remove:o,update:i}=V({name:"conditions"}),m=t=>({key:t.key,operator:t.defaultOperator,value:t.control.type===x.Select?t.control.options[0].value:""}),d=t=>{const c=s[0];l({...m(c),match_type:t})},u=(t,c,j)=>{const y=s.find(k=>k.key===c);y&&i(t,{...m(y),match_type:j})};return e.jsxs("div",{children:[e.jsx(D,{description:e.jsx(a,{message:"Control which conversations appear in your view by using conditions."}),children:e.jsx(a,{message:"Conditions"})}),e.jsxs("div",{className:"mb-44",children:[e.jsx(N,{type:"all"}),n.map((t,c)=>t.match_type==="all"&&e.jsx(F,{index:c,filters:s,onRemove:()=>o(c),onKeyChange:j=>u(c,j,"all")},t.id)),e.jsx(C,{onClick:()=>d("all")})]}),e.jsxs("div",{className:"mb-44",children:[e.jsx(N,{type:"any"}),n.map((t,c)=>t.match_type==="any"&&e.jsx(F,{index:c,filters:s,onRemove:()=>o(c),onKeyChange:j=>u(c,j,"any")},t.id)),e.jsx(C,{onClick:()=>d("any")})]})]})}function C({onClick:s}){return e.jsx(w,{variant:"outline",startIcon:e.jsx(z,{}),onClick:()=>s(),size:"xs",className:"mt-12",children:e.jsx(a,{message:"Add condition"})})}function F({index:s,filters:n,onRemove:l,onKeyChange:o}){var u;const i=p({name:`conditions.${s}.key`}),m=p({name:`conditions.${s}.operator`}),d=n.find(t=>t.key===i);return e.jsxs("div",{className:"items-center gap-x-14 border-b border-b-divider-lighter py-14 max-md:space-y-12 md:flex",children:[e.jsx(oe,{selectionMode:"single",className:"max-w-280 flex-auto",selectedValue:i,onSelectionChange:t=>o(t),children:n.map(t=>e.jsx(r,{value:t.key,children:e.jsx(a,{...t.label})},t.key))}),!!((u=d==null?void 0:d.operators)!=null&&u.length)&&e.jsx(g,{selectionMode:"single",className:"max-w-180 flex-auto",name:`conditions.${s}.operator`,children:d.operators.map(t=>e.jsx(r,{value:t,capitalizeFirst:!0,children:e.jsx(a,{...Z[t]})},t))}),d&&m!==M.notNull&&e.jsx("div",{className:"max-w-280 flex-auto",children:e.jsx(je,{filter:d,index:s})}),e.jsx(h,{color:"danger",onClick:()=>l(),children:e.jsx(S,{})})]})}function je({filter:s,index:n}){switch(s.control.type){case x.DateRangePicker:return e.jsx(te,{filter:s,size:"md",name:`conditions.${n}.value`});case x.BooleanToggle:return e.jsxs(g,{name:`conditions.${n}.value`,selectionMode:"single",size:"md",children:[e.jsx(r,{value:!0,children:e.jsx(a,{message:"Yes"})}),e.jsx(r,{value:!1,children:e.jsx(a,{message:"No"})})]});case x.Select:return e.jsx(ne,{filter:s,size:"md",name:`conditions.${n}.value`});case x.ChipField:return e.jsx(ae,{filter:s,size:"md",name:`conditions.${n}.value`});case x.Input:return e.jsx(se,{filter:s,size:"md",name:`conditions.${n}.value`});case x.SelectModel:return e.jsx(ee,{filter:s,size:"md",name:`conditions.${n}.value`});default:return null}}function N({type:s}){return e.jsx("h2",{className:"border-b pb-8 text-sm font-bold",children:e.jsx(a,{message:s==="all"?"Conversation must meet <b>all</b> of these conditions to appear in the view":"Conversation can meet <b>any</b> of these conditions to appear in the view",values:{b:n=>e.jsx("span",{className:"mx-4 rounded border bg-alt px-6 py-2 font-bold",children:n})}})})}function pe(){const{setValue:s}=v(),n=p({name:"icon"}),l=n?e.jsx(ie,{name:n}):e.jsx(le,{});return e.jsxs(E,{type:"popover",onClose:o=>{o&&s("icon",o,{shouldDirty:!0})},children:[e.jsx(h,{variant:"outline",radius:"rounded-l-input",children:l}),e.jsx(he,{})]})}function he(){const{close:s}=T();return e.jsxs($,{size:"sm",children:[e.jsx(B,{children:e.jsx(a,{message:"Select icon"})}),e.jsx(O,{padding:"px-14 pb-14",children:e.jsx("div",{className:"grid grid-cols-8 gap-8",children:Object.entries(re).map(([n,l])=>e.jsx(h,{size:"md",onClick:()=>s(n),children:e.jsx(l,{})},n))})})]})}function _e({isInternal:s}){const n=X();return n.length?e.jsxs("div",{children:[e.jsx(b,{autoFocus:!0,className:"mb-24",label:e.jsx(a,{message:"Name"}),name:"name",startAppend:e.jsx(pe,{})}),e.jsx(b,{className:"mb-24",label:e.jsx(a,{message:"Description"}),name:"description",inputElementType:"textarea",rows:1}),e.jsx(ge,{}),!s&&e.jsx(ve,{}),e.jsx(ye,{}),!s&&e.jsx(xe,{filters:n}),e.jsx(de,{})]}):e.jsx(L,{screen:!1,className:"absolute inset-0 my-auto"})}function ge(){return e.jsx(P,{className:"mt-24",name:"pinned",description:e.jsx(a,{message:"Pinned view will appear at the top of inbox sidebar."}),children:e.jsx(a,{message:"Pinned"})})}function ve(){var l;const s=p({name:"access"}),n=H(Q.groups.normalizedList);return e.jsxs("div",{className:"my-24 flex items-center gap-12",children:[e.jsxs(g,{selectionMode:"single",className:"max-w-224 flex-auto",name:"access",label:e.jsx(a,{message:"Who has access"}),children:[e.jsx(r,{value:"anyone",children:e.jsx(a,{message:"Any agent"})}),e.jsx(r,{value:"owner",children:e.jsx(a,{message:"Only view owner"})}),e.jsx(r,{value:"group",children:e.jsx(a,{message:"Agents in specific group"})})]}),s=="group"&&e.jsx(g,{selectionMode:"single",name:"group_id",className:"max-w-264 flex-auto",label:e.jsx(a,{message:"Which group has access"}),children:(l=n.data)==null?void 0:l.groups.map(o=>e.jsx(r,{value:o.id,startIcon:e.jsx(G,{size:"xs",label:o.name}),children:o.name},o.id))})]})}function ye(){return e.jsxs("div",{className:"my-24 max-w-224",children:[e.jsxs(g,{name:"order_by",selectionMode:"single",label:e.jsx(a,{message:"Order by"}),children:[e.jsx(r,{value:"id",children:e.jsx(a,{message:"ID"})}),e.jsx(r,{value:"status_category",children:e.jsx(a,{message:"Status category"})}),e.jsx(r,{value:"conversations.updated_at",children:e.jsx(a,{message:"Latest update"})}),e.jsx(r,{value:"conversations.created_at",children:e.jsx(a,{message:"Request date"})}),e.jsx(r,{value:"closed_at",children:e.jsx(a,{message:"Solved date"})}),e.jsx(r,{value:"priority",children:e.jsx(a,{message:"Priority"})}),e.jsx(r,{value:"assignee_id",children:e.jsx(a,{message:"Assigne"})}),e.jsx(r,{value:"group_id",children:e.jsx(a,{message:"Group"})}),e.jsx(r,{value:"user_id",children:e.jsx(a,{message:"Requester"})}),e.jsx(r,{value:"type",children:e.jsx(a,{message:"Conversation type"})}),e.jsx(r,{value:"rating",children:e.jsx(a,{message:"Rating"})})]}),e.jsxs(ce,{name:"order_dir",orientation:"vertical",size:"sm",className:"mt-12",children:[e.jsx(f,{value:"asc",children:e.jsx(a,{message:"Ascending"})}),e.jsx(f,{value:"desc",children:e.jsx(a,{message:"Descending"})})]})]})}export{_e as C};
