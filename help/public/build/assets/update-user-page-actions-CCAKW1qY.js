import{ac as d,i as c,s as g,q as m,t as x,m as p,k as D,r as i,j as e,av as j,aw as f,B as h,T as t,ae as U,ax as y,az as u,bF as v,al as S,h as b}from"./client-DtfdVV77.js";import{u as C,B as w}from"./use-unban-users-B2eSKHQ6.js";import{D as I}from"./paginated-resources-DUi9UwyN.js";import{C as T}from"./confirmation-dialog-BzXs9ksK.js";function A(){const{trans:s}=d();return c({mutationFn:a=>B(a.userId),onSuccess:async()=>{await m.invalidateQueries({queryKey:I("users")}),x(s(p("User deleted")))},onError:a=>g(a)})}function B(s){return D.delete(`users/${s}`).then(a=>a.data)}function M({user:s,children:a}){const r=C([s.id]),n=s.banned_at!==null,[l,o]=i.useState(!1);return e.jsxs(i.Fragment,{children:[e.jsx(j,{type:"modal",isOpen:l,onOpenChange:o,children:e.jsx(E,{userId:s.id})}),e.jsxs(f,{children:[e.jsx(h,{className:"ml-auto",variant:"outline",size:"sm",endIcon:e.jsx(U,{}),children:e.jsx(t,{message:"Actions"})}),e.jsxs(y,{children:[a,e.jsx(u,{value:"toggleSuspension",onSelected:()=>{n?r.mutate():v(w,{userIds:[s.id]})},children:n?e.jsx(t,{message:"Unsuspend user"}):e.jsx(t,{message:"Suspend user"})}),e.jsx(u,{value:"delete",onSelected:()=>{o(!0)},children:e.jsx(t,{message:"Delete user"})})]})]})]})}function E({userId:s}){const a=A(),{close:r}=S(),n=b();return e.jsx(T,{isDanger:!0,isLoading:a.isPending,title:e.jsx(t,{message:"Delete user"}),confirm:e.jsx(t,{message:"Delete"}),body:e.jsx(t,{message:"Are you sure you want to delete this user?"}),onConfirm:()=>{a.mutate({userId:s},{onSuccess:()=>{r(),n("..",{relative:"path"})}})}})}export{E as D,M as U};
