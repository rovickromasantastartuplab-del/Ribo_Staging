import{h as w,j as e,T as u,r as n,p as j,aj as b,at as k,a as y,b as I,as as S,L as f,ak as L,c as C,u as E,b4 as A,R as M}from"./client-DtfdVV77.js";import{A as _,a as B}from"./article-page-feedback-BwJoJxrd.js";import{g as D,a as P}from"./article-link-kVBPNf7I.js";import{g as T}from"./category-link-DefoIvjU.js";import{B as H,a as v}from"./breadcrumb-CaNBY_Ut.js";import{H as R}from"./hc-search-bar-Bi18-IXo.js";import{D as z}from"./dashboard-content-H4cBDn8K.js";import{D as $}from"./dashboard-layout-lBpQk7BD.js";import{D as N,N as O,L as q}from"./main-BGmGAxtx.js";import{M as F}from"./MenuOpen-C_gqQJXO.js";import{D as Q}from"./dashboard-sidenav-q-Yy9ZLk.js";import{h as G}from"./custom-menu-Dvq-fOnC.js";import{P as V}from"./page-meta-tags-B6Ej9u6-.js";import{u as W}from"./useSuspenseQuery-Bmt2-NKx.js";import{L as J}from"./external-link-Cxcw6nc_.js";import{E as K}from"./Edit-BaEHOLuK.js";import"./bullet-seprated-items-ClWbAIQG.js";import"./formatted-bytes-CFeeP1Iy.js";import"./pretty-bytes-bO14ePu9.js";import"./AttachFile-D1Gtc63k.js";import"./slugify-string-CGmMIJK7.js";import"./useEffectEvent-Offmqu_S.js";import"./ChevronRight-C5OrfRtB.js";import"./MoreHoriz-Df3_bV9s.js";import"./article-path-CQn_uF_m.js";import"./use-keybind-DRgaCeX0.js";import"./useGlobalListeners-BGMP113F.js";import"./is-ctrl-key-pressed-CaS-AM38.js";import"./combobox-CFh39yI7.js";import"./combobox-end-adornment-CWQ4Xgal.js";import"./use-previous-BLaxBq_s.js";function U({path:s}){const a=w();return e.jsxs(H,{size:"sm",className:"-ml-6 text-muted",currentIsClickable:!0,inactiveMuted:!1,children:[e.jsx(v,{onSelected:()=>a("/hc"),children:e.jsx(u,{message:"Help center"})}),s.map(r=>r.hide_from_structure?null:e.jsx(v,{onSelected:()=>a(T(r)),children:e.jsx(u,{message:r.name})},`${r.parent_id}-${r.id}`))]})}function X({children:s,className:a,hideToggleButton:r,...o}){const{isMobileMode:l,leftSidenavStatus:i,setLeftSidenavStatus:c,name:t,leftSidenavCanBeCompact:m}=n.useContext(N),d=m&&!l,p=!r&&(l||m),h=()=>{c(i==="open"?"closed":"open")},x=()=>{const g=i==="compact"?"open":"compact";k(`${t}.sidenav.compact`,g==="compact"),c(g)};return e.jsx(O,{className:j("dashboard-grid-navbar",a),border:"border-b",size:"sm",toggleButton:p?e.jsx(b,{size:"md",onClick:()=>{d?x():h()},children:e.jsx(F,{})}):void 0,...o,children:s})}function Y({children:s,leftSidenav:a,rightSidenav:r,categoryId:o}){return e.jsxs($,{height:"h-auto",gridClassName:"hc-grid",name:"hc-article",blockBodyOverflow:!1,children:[e.jsx(X,{color:"bg",menuPosition:"header",className:"sticky top-0 z-10 flex-shrink-0",size:"md",children:e.jsx(R,{categoryId:o})}),e.jsx(Q,{position:"left",size:"w-auto",overflow:"overflow-initial",className:"justify-end",children:a}),e.jsx(z,{isScrollable:!1,children:e.jsx("div",{className:"min-w-0 max-w-672 px-16 py-16 md:py-64 lg:max-w-none lg:px-32 xl:px-64",children:s})}),r]})}function Z({categoryNav:s,isCompact:a}){const{articleId:r}=y(),o=I(),{setLeftSidenavStatus:l}=n.useContext(N),i=n.useRef(null),c=n.useRef(!1);return n.useEffect(()=>{var t;i.current&&r&&!c.current&&((t=i.current.querySelector(`[data-id="${r}"]`))==null||t.scrollIntoView({block:"center"}),c.current=!0)},[r]),e.jsx(n.Fragment,{children:e.jsxs("div",{className:"compact-scrollbar sticky w-350 overflow-y-auto overflow-x-hidden py-24 pl-24 pr-32 stable-scrollbar md:h-[calc(100dvh-64px)] lg:top-64 lg:py-64 lg:pl-32 xl:pl-48 xl:pr-64",id:"article-sidenav",ref:i,children:[e.jsxs("div",{className:"mb-34 flex items-center justify-between gap-8 lg:hidden",children:[e.jsx(q,{color:o?"light":"dark",logoType:a?"compact":"wide",size:"h-36"}),e.jsx(b,{onClick:()=>l("closed"),children:e.jsx(S,{})})]}),e.jsx("nav",{className:"text-base lg:text-sm",children:e.jsx("ul",{role:"list",className:"space-y-36",children:s.map(t=>{var m;return e.jsxs("li",{children:[e.jsx("h2",{className:"pl-16 font-semibold",children:e.jsx(u,{message:t.name})}),e.jsx("ul",{className:"mt-8 space-y-2 lg:mt-16",children:(m=t.articles)==null?void 0:m.map(d=>{const p=`${d.id}`===r;return e.jsx("li",{"data-id":d.id,children:e.jsx(f,{to:D(d,{section:t}),className:j("block w-full rounded-panel py-6 pl-16 pr-12 leading-6 hover:bg-hover",p?"bg-selected font-semibold text-main":"text-muted"),children:d.title})},d.id)})})]},t.id)})})})]})})}const ee=n.forwardRef((s,a)=>e.jsxs(L,{...s,ref:a,children:[e.jsx("path",{d:"M15 12H3"}),e.jsx("path",{d:"M17 18H3"}),e.jsx("path",{d:"M21 6H3"})]}));function De(){var d,p,h,x;const{hash:s}=C(),a=E(),{hasPermission:r,hasRole:o}=A(),{categoryId:l,sectionId:i,articleId:c}=y(),t=W(G.articles.getForArticlePage({articleId:c,categoryId:l,sectionId:i})),m=r("articles.update")||t.data.article.managed_by_role&&o(t.data.article.managed_by_role);return n.useEffect(()=>(document.documentElement.style.setProperty("--html-spt","84px"),()=>{document.documentElement.style.removeProperty("--html-spt")}),[t.data,s]),e.jsxs(Y,{leftSidenav:e.jsx(Z,{categoryNav:t.data.categoryNav}),rightSidenav:e.jsx(te,{nav:t.data.pageNav}),categoryId:(p=(d=t.data.article.path)==null?void 0:d[0])==null?void 0:p.id,children:[e.jsx(V,{query:t}),e.jsxs("article",{children:[e.jsxs("header",{className:"mb-36",children:[!!((h=t.data.article.path)!=null&&h.length)&&e.jsx(U,{path:t.data.article.path}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("h1",{className:"text-4xl font-bold",children:t.data.article.title}),m&&e.jsx(b,{className:"text-muted",elementType:f,to:P(t.data.article),children:e.jsx(K,{})})]})]}),e.jsx(se,{body:t.data.article.body}),e.jsx(_,{articleId:t.data.article.id,attachments:t.data.article.attachments})]},"article"),!((x=a.article)!=null&&x.hide_new_ticket_link)&&e.jsx("div",{className:"my-50 border-y py-50",children:e.jsx(u,{message:"Have more questions? <a>Submit a request</a>",values:{a:g=>e.jsx(f,{className:J,to:"/hc/tickets/new",children:g})}})}),e.jsx(B,{articleId:t.data.article.id})]})}function te({nav:s}){const[a,r]=n.useState(null);return n.useEffect(()=>{if(!s)return;const o=new IntersectionObserver(i=>{for(const c of i){const t=document.getElementById(`to-${c.target.id}`);t&&c.isIntersecting&&r(t.id.replace(/^to-/,""))}},{rootMargin:"0px 0px -50% 0px"}),l=s.map(i=>document.getElementById(i.slug)).filter(Boolean);return l.forEach(i=>{o.observe(i)}),()=>{l.forEach(i=>o.unobserve(i))}},[s]),e.jsx("div",{className:"dashboard-grid-sidenav-right compact-scrollbar hidden w-224 xl:flex xl:w-288",children:s!=null&&s.length?e.jsxs("nav",{className:"sticky top-64 h-[calc(100dvh-64px)] w-full py-64 pr-32 xl:pr-64",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(ee,{size:"xs"}),e.jsx("h2",{className:"font-display text-sm font-medium",children:e.jsx(u,{message:"On this page"})})]}),e.jsx("ol",{role:"list",className:"mt-16 space-y-12 text-sm text-muted",children:s==null?void 0:s.map(o=>{const l=o.slug===a;return e.jsx("li",{className:o.indent?"pl-20":"mt-8",children:e.jsx(f,{className:j("cursor-pointer",l?"font-medium text-main":"hover:text-main"),to:`#${o.slug}`,id:`to-${o.slug}`,children:o.display_name})},o.slug)})})]}):null})}function se({body:s}){const a=n.useRef(null);return n.useEffect(()=>{setTimeout(()=>{a.current&&M(a.current)},30)},[s]),n.useEffect(()=>{a.current&&a.current.addEventListener("click",r=>{const o=r.target;if(o.tagName==="IMG"){const l=o.getAttribute("src");l&&window.open(l,"_blank")}})},[]),e.jsx("div",{className:"prose-pre:bg-slate-900 prose max-w-none dark:prose-invert prose-pre:rounded-panel prose-pre:shadow-lg prose-img:cursor-pointer prose-img:rounded-panel prose-img:border prose-img:border-lighter prose-img:bg-alt/80 prose-img:p-8 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-divider",children:e.jsx("div",{ref:a,className:"article-body whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:s}})})}export{De as Component};
