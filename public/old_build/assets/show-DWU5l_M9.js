import{r as h,j as e}from"./ui-C-VW1P-5.js";import{P as pe}from"./page-template-CDM26U5Q.js";import{u as ue,K as ge,C as m,c as x,F as je,a as y,b as w,$ as _,B as p,T as ee,I as se,S as k,d as be,X as Ne}from"./app-BQKKzqf3.js";import{T as fe,a as ve,b as g,c as j,d as ye,e as i}from"./table-Cm3ifs76.js";import{C as te}from"./CrudDeleteModal-Bjo4FQXD.js";import{D as we}from"./dollar-sign-BO1aYhXH.js";import{P as z}from"./package-BHhWwbAI.js";import{C as B}from"./calendar-BZ7v_rN9.js";import{B as _e}from"./building-DYqVTalU.js";import{U as Se}from"./user-B-NTs7Zv.js";import{E as Ce}from"./eye-off-Dy-fpfrJ.js";import{S as Te}from"./send-Ci4mpdkr.js";import{S as De}from"./square-pen-DbvvCy40.js";import{A as ke}from"./arrow-left-CYc20UlY.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";function xs(){var Q,F,G,J,K,V,X,W,Y,Z;const{t:s}=ue(),{quote:a,streamItems:u,auth:l}=ge().props,E=((Q=l==null?void 0:l.user)==null?void 0:Q.type)==="company",[A,ae]=h.useState(!0),[re,q]=h.useState(!1),[le,U]=h.useState(!1),[ie,ne]=h.useState(null),[S,$]=h.useState(""),[de,I]=h.useState(null),[L,H]=h.useState(""),oe=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Quotes"),href:route("quotes.index")},{title:a.quote_number}],O=t=>{const r={draft:"bg-gray-50 text-gray-600 ring-gray-500/10",sent:"bg-blue-50 text-blue-700 ring-blue-700/10",accepted:"bg-green-50 text-green-700 ring-green-600/20",rejected:"bg-red-50 text-red-700 ring-red-600/10",expired:"bg-yellow-50 text-yellow-800 ring-yellow-600/20"};return e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${r[t]||r.draft}`,children:s((t==null?void 0:t.charAt(0).toUpperCase())+(t==null?void 0:t.slice(1)))||s("Draft")})},n=t=>{var r;return((r=window.appSettings)==null?void 0:r.formatCurrency(Number(t||0)))||`$${Number(t||0).toFixed(2)}`},ce=()=>{var o;let t=0,r=0,d=0;return(o=a.products)==null||o.forEach(c=>{const C=Number(c.pivot.total_price)||0,b=Number(c.pivot.discount_amount)||0,N=C-b;t+=N,d+=b,c.tax&&(r+=N*Number(c.tax.rate)/100)}),{subtotal:t,totalTax:r,totalDiscount:d,grandTotal:t+r}},{subtotal:me,totalTax:xe,totalDiscount:R,grandTotal:he}=ce();return e.jsxs(pe,{title:a.quote_number,breadcrumbs:oe,actions:[{label:s("Back to Quotes"),icon:e.jsx(ke,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>window.history.back()}],children:[e.jsxs("div",{className:"mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 leading-tight",children:a.name}),e.jsx("p",{className:"text-base text-gray-600 mt-2 leading-relaxed max-w-3xl",children:a.description||s("No description provided")})]}),e.jsxs("div",{className:"text-right ml-6",children:[O(a.status),e.jsx("p",{className:"text-sm font-medium text-gray-700 mt-2 font-mono",children:a.quote_number})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(m,{className:"border-l-4 border-l-green-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Total Amount")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold text-green-600 leading-none",children:n(a.total_amount)})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-4",children:e.jsx(we,{className:"h-5 w-5 text-green-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-blue-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Products")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold text-blue-600 leading-none",children:((F=a.products)==null?void 0:F.length)||0})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-4",children:e.jsx(z,{className:"h-5 w-5 text-blue-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-orange-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Valid Until")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-orange-600 leading-tight",children:((G=window.appSettings)==null?void 0:G.formatDateTime(a.valid_until,!1))||new Date(a.valid_until).toLocaleDateString()})]}),e.jsx("div",{className:"rounded-full bg-orange-100 p-4",children:e.jsx(B,{className:"h-5 w-5 text-orange-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-purple-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Created")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-orange-600 leading-tight",children:((J=window.appSettings)==null?void 0:J.formatDateTime(a.created_at,!1))||new Date(a.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-4",children:e.jsx(je,{className:"h-5 w-5 text-purple-600"})})]})})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsx(w,{className:"text-lg font-semibold",children:s("Quote Information")})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Quote Number")}),e.jsx("p",{className:"text-sm mt-1",children:a.quote_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Status")}),e.jsx("div",{className:"mt-1",children:O(a.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created By")}),e.jsx("p",{className:"text-sm mt-1",children:((K=a.creator)==null?void 0:K.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Assigned To")}),e.jsx("p",{className:"text-sm mt-1",children:((V=a.assigned_user)==null?void 0:V.name)||s("Unassigned")})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Subtotal")}),e.jsx("p",{className:"text-sm mt-1",children:n(a.subtotal)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Discount Amount")}),e.jsxs("p",{className:"text-sm mt-1",children:["-",n(R)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created At")}),e.jsx("p",{className:"text-sm mt-1",children:((X=window.appSettings)==null?void 0:X.formatDateTime(a.created_at,!1))||new Date(a.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Updated At")}),e.jsx("p",{className:"text-sm mt-1",children:((W=window.appSettings)==null?void 0:W.formatDateTime(a.updated_at,!1))||new Date(a.updated_at).toLocaleDateString()})]})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(_e,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Related Data")]})}),e.jsx(x,{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.account&&e.jsxs("div",{className:"p-6 bg-green-50 rounded-xl border border-green-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Account")}),e.jsx(_,{href:route("accounts.show",a.account.id),className:"text-base font-medium text-green-700 hover:text-green-900 hover:underline transition-colors",children:a.account.name})]}),a.contact&&e.jsxs("div",{className:"p-6 bg-purple-50 rounded-xl border border-purple-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Contact")}),e.jsx(_,{href:route("contacts.show",a.contact.id),className:"text-base font-medium text-purple-700 hover:text-purple-900 hover:underline transition-colors",children:a.contact.name})]}),a.shipping_provider_type&&e.jsxs("div",{className:"p-6 bg-orange-50 rounded-xl border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Shipping Provider")}),e.jsx(_,{href:route("shipping-provider-types.show",a.shipping_provider_type.id),className:"text-base font-medium text-orange-700 hover:text-orange-900 hover:underline transition-colors",children:a.shipping_provider_type.name})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(Se,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Billing & Shipping Details")]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Billing Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),a.billing_contact?e.jsx(_,{href:route("contacts.show",a.billing_contact.id),className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline mt-1 transition-colors",children:a.billing_contact.name}):e.jsx("p",{className:"text-sm mt-1",children:s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_country||s("-")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Shipping Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),a.shipping_contact?e.jsx(_,{href:route("contacts.show",a.shipping_contact.id),className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline mt-1 transition-colors",children:a.shipping_contact.name}):e.jsx("p",{className:"text-sm mt-1",children:s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_country||s("-")})]})]})]})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(z,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Products")]})}),e.jsx(x,{className:"p-0",children:a.products&&a.products.length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsxs(fe,{children:[e.jsx(ve,{children:e.jsxs(g,{className:"bg-gray-100",children:[e.jsx(j,{className:"text-base font-bold text-gray-900 py-4 px-6 w-1/3",children:s("Product")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Quantity")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Unit Price")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Discount")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Tax")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4 w-1/6",children:s("Total")})]})}),e.jsxs(ye,{children:[a.products.map((t,r)=>{const d=Number(t.pivot.total_price)||0,o=Number(t.pivot.discount_amount)||0,c=d-o;return e.jsxs(g,{className:"border-b hover:bg-gray-50",children:[e.jsx(i,{className:"font-semibold text-base text-gray-900 py-4 px-6",children:t.name}),e.jsx(i,{className:"text-right text-base font-medium py-4 px-4",children:t.pivot.quantity}),e.jsx(i,{className:"text-right text-base font-semibold py-4 px-4",children:n(t.pivot.unit_price)}),e.jsx(i,{className:"text-right py-4 px-4",children:t.pivot.discount_type&&t.pivot.discount_type!=="none"&&t.pivot.discount_value>0?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.pivot.discount_type==="percentage"?`${Number(t.pivot.discount_value)}%`:n(Number(t.pivot.discount_value))}),e.jsxs("div",{className:"text-red-600 font-bold",children:["(-",n(o),")"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:s("No Discount")})}),e.jsx(i,{className:"text-right text-base py-4 px-4",children:t.tax?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.tax.name}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["(",t.tax.rate,"%)"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:s("No Tax")})}),e.jsx(i,{className:"text-right font-bold text-base py-4 px-4",children:o>0?e.jsxs("div",{children:[e.jsx("div",{className:"line-through text-gray-400 text-sm font-medium",children:n(d)}),e.jsx("div",{className:"text-green-600 font-semibold",children:n(c)})]}):e.jsx("span",{className:"text-green-600 font-semibold",children:n(d)})})]},r)}),e.jsxs(g,{className:"bg-gray-50 border-t-2",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Total Discount"),":"]}),e.jsxs(i,{className:"text-right font-semibold text-base text-red-600 py-3 px-4",children:["-",n(R)]})]}),e.jsxs(g,{className:"bg-gray-50",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Subtotal"),":"]}),e.jsx(i,{className:"text-right font-semibold text-base py-3 px-4",children:n(me)})]}),e.jsxs(g,{className:"bg-gray-50",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Total Tax"),":"]}),e.jsx(i,{className:"text-right font-semibold text-base py-3 px-4",children:n(xe)})]}),e.jsxs(g,{className:"bg-green-50 border-t-2",children:[e.jsxs(i,{colSpan:5,className:"text-right font-bold text-lg py-4 px-4",children:[s("Grand Total"),":"]}),e.jsx(i,{className:"text-right py-4 px-4",children:e.jsx("span",{className:"text-green-600 font-bold text-xl",children:n(he)})})]})]})]})}):e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(z,{className:"h-16 w-16 mx-auto mb-6 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:s("No products added to this quote")})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(B,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Activity Stream")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>ae(!A),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),s(A?"Hide":"Show")]}),u&&u.length>0&&E&&e.jsxs(p,{variant:"destructive",size:"sm",onClick:()=>U(!0),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),s("Delete Stream")]})]})]})}),A&&e.jsxs(x,{className:"p-0",children:[e.jsx("div",{className:"sticky top-0 bg-white z-10 p-6 pb-6 border-b mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((Y=l==null?void 0:l.user)==null?void 0:Y.avatar)||"/images/avatar/default.png",alt:((Z=l==null?void 0:l.user)==null?void 0:Z.name)||"User",className:"w-full h-full object-cover",onError:t=>{var d;const r=t.target;r.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((d=l==null?void 0:l.user)==null?void 0:d.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),e.jsx("div",{className:"flex-1",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),S.trim()&&k.post(route("quotes.comments.store",a.id),{comment:S},{preserveScroll:!0,onSuccess:()=>$("")})},children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{placeholder:s("Add a comment..."),value:S,onChange:t=>$(t.target.value),className:"flex-1"}),e.jsx(p,{type:"submit",size:"sm",disabled:!S.trim(),children:e.jsx(Te,{className:"h-4 w-4"})})]})})})]})}),e.jsx("div",{className:"p-6 pt-0 max-h-96 overflow-y-auto",children:u&&u.length>0?e.jsx("div",{className:"space-y-2",children:u.map((t,r)=>{var o,c,C,b,N;const d=f=>{const T=new Date(f),v=Math.floor((new Date().getTime()-T.getTime())/(1e3*60));if(v<1)return s("Just now");if(v<60)return s("{{count}} {{unit}} ago",{count:v,unit:s(v===1?"minute":"minutes")});const D=Math.floor(v/60);if(D<24)return s("{{count}} {{unit}} ago",{count:D,unit:s(D===1?"hour":"hours")});const M=Math.floor(D/24);return M<7?s("{{count}} {{unit}} ago",{count:M,unit:s(M===1?"day":"days")}):T.toLocaleDateString()};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((o=t.user)==null?void 0:o.avatar)||"/images/avatar/default.png",alt:((c=t.user)==null?void 0:c.name)||"User",className:"w-full h-full object-cover",onError:f=>{var P;const T=f.target;T.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((P=t.user)==null?void 0:P.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),r<u.length-1&&e.jsx("div",{className:"w-px h-8 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:((C=t.user)==null?void 0:C.name)||s("System")}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:d(t.created_at)})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",dangerouslySetInnerHTML:{__html:t.title.replace(new RegExp(`^(${((b=t.user)==null?void 0:b.name)||"System"})`,"g"),'<span class="font-bold text-base">$1</span>')}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20",children:s(t.activity_type.charAt(0).toUpperCase()+t.activity_type.slice(1))}),E&&e.jsx(p,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{ne(t),q(!0)},children:e.jsx(ee,{className:"h-3 w-3"})})]})]}),t.description&&e.jsx("div",{className:"mb-2",children:t.field_changed==="status"||t.field_changed==="name"||t.field_changed==="assigned_to"||t.description.includes("into")?e.jsx("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:t.description}}):t.activity_type==="comment"?e.jsx("div",{children:de===t.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{value:L,onChange:f=>H(f.target.value),className:"flex-1"}),e.jsx(p,{size:"sm",onClick:()=>{k.put(route("quotes.comments.update-activity",{quote:a.id,activity:t.id}),{comment:L},{preserveScroll:!0}),I(null)},children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>I(null),children:e.jsx(Ne,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:t.description}),t.user_id===((N=l==null?void 0:l.user)==null?void 0:N.id)&&e.jsx(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:()=>{I(t.id),H(t.description)},children:e.jsx(De,{className:"h-3 w-3"})})]})}):e.jsx("p",{className:"text-sm text-gray-600",children:t.description})})]})]})]},t.id||r)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(B,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm",children:s("No activities found")})]})})]})]})]}),e.jsx(te,{isOpen:re,onClose:()=>q(!1),onConfirm:()=>{k.delete(route("quotes.delete-activity",{quote:a.id,activity:ie.id}),{preserveScroll:!0}),q(!1)},itemName:s("this activity"),entityName:s("activity")}),e.jsx(te,{isOpen:le,onClose:()=>U(!1),onConfirm:()=>{k.delete(route("quotes.delete-activities",a.id),{preserveScroll:!0}),U(!1)},itemName:s("all activities for {{name}}",{name:a.name}),entityName:s("activities")})]})}export{xs as default};
