import{r as g,j as e}from"./ui-C-VW1P-5.js";import{u as M,K as E,ak as K,L as p,I as S,B as x,X as C,a8 as O,a6 as U,t as o,S as z}from"./app-BQKKzqf3.js";import{T as q}from"./textarea-BvlD1v8z.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";function R({settings:h={}}){const{t}=M(),N=E().props,m={metaKeywords:"",metaDescription:"",metaImage:""},n=Object.keys(h).length>0?h:N.settings||{},[i,l]=g.useState(()=>({metaKeywords:n.metaKeywords||m.metaKeywords,metaDescription:n.metaDescription||m.metaDescription,metaImage:n.metaImage||m.metaImage})),[f,j]=g.useState(null),[I,u]=g.useState(!1);g.useEffect(()=>{if(Object.keys(n).length>0){const a=Object.keys(m).reduce((s,r)=>(s[r]=n[r]||m[r],s),{});l(s=>({...s,...a}))}},[n]);const v=(a,s)=>{l(r=>({...r,[a]:s}))},w=a=>{var c;const s=(c=a.target.files)==null?void 0:c[0];if(!s)return;if(!s.type.startsWith("image/")){o.error("Please select a valid image file");return}if(s.size>5*1024*1024){o.error("Image size should be less than 5MB");return}const r=URL.createObjectURL(s);u(!1),j(r),l(d=>({...d,metaImage:r}))},b=()=>{j(null),u(!1),l(a=>({...a,metaImage:""}))},D=a=>{if(a.preventDefault(),!i.metaKeywords.trim()){o.error(t("Meta Keywords is required"));return}if(!i.metaDescription.trim()){o.error(t("Meta Description is required"));return}if(!i.metaImage.trim()){o.error(t("Meta Image is required"));return}z.post(route("settings.seo.update"),i,{preserveScroll:!0,onSuccess:s=>{var d,y;const r=(d=s.props.flash)==null?void 0:d.success,c=(y=s.props.flash)==null?void 0:y.error;r?o.success(r):c&&o.error(c)},onError:s=>{const r=s.error||Object.values(s).join(", ")||t("Failed to update SEO settings");o.error(r)}})};return e.jsx(K,{title:t("SEO Settings"),description:t("Configure SEO settings to improve your website's search engine visibility"),action:e.jsxs(x,{type:"submit",form:"seo-settings-form",size:"sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("Save Changes")]}),children:e.jsx("form",{id:"seo-settings-form",onSubmit:D,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(p,{htmlFor:"metaKeywords",children:[t("Meta Keywords")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"metaKeywords",type:"text",value:i.metaKeywords,onChange:a=>v("metaKeywords",a.target.value),placeholder:t("Enter keywords separated by commas"),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(p,{htmlFor:"metaDescription",children:[t("Meta Description")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(q,{id:"metaDescription",value:i.metaDescription,onChange:a=>v("metaDescription",a.target.value),placeholder:t("Enter a brief description for search engines (max 160 characters)"),maxLength:160,rows:3,required:!0}),e.jsxs("div",{className:"text-sm text-muted-foreground text-right",children:[i.metaDescription.length,"/160"]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(p,{htmlFor:"metaImage",children:[t("Meta Image")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-4",children:[(i.metaImage||f)&&e.jsxs("div",{className:"border rounded-md p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t("Current Image")}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:b,className:"h-6 w-6 p-0",children:e.jsx(C,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center justify-center h-32 border rounded",children:I?e.jsx("div",{className:"text-muted-foreground text-sm",children:"Failed to load image"}):e.jsx("img",{src:f||i.metaImage,alt:"Meta Image Preview",className:"max-h-full max-w-full object-contain",onError:()=>u(!0)})})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{id:"metaImageUpload",type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:w}),e.jsxs(x,{type:"button",variant:"outline",className:"w-full justify-start",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),i.metaImage?t("Change Image"):t("Upload Image")]})]})})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Recommended size: 1200x630px for optimal social media sharing. Max file size: 5MB")})]})]})]})})})}export{R as default};
