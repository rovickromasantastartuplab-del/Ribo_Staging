import{r as x,j as e}from"./ui-C-VW1P-5.js";import{P,F as q}from"./page-template-CDM26U5Q.js";import{u as H,K,S as d,C as i,a as n,b as m,c as o,F as D,B as _,t as r}from"./app-BQKKzqf3.js";import{C as R}from"./CrudFormModal-BgN_j_X-.js";import{C as V}from"./CrudDeleteModal-Bjo4FQXD.js";import{A as G}from"./arrow-left-CYc20UlY.js";import{B as J}from"./building-DYqVTalU.js";import{T as Q}from"./tag-Cr3RI_n7.js";import{T as W}from"./target-BI71-IGe.js";import{U as X}from"./user-B-NTs7Zv.js";import{D as C}from"./download-CUJ4p28I.js";import{E as Y}from"./eye-DxUCHEvv.js";import{C as Z}from"./calendar-BZ7v_rN9.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./dollar-sign-BO1aYhXH.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";import"./radio-group-CSjni1r3.js";import"./circle-BMwBABJJ.js";import"./checkbox-mSB0gHip.js";import"./scroll-area-vUH8MN0-.js";function qe(){var u,h,f,j,g,b,N,v,w,y;const{t:s}=H(),{auth:c,document:t,users:S=[],accounts:A=[],folders:T=[],types:F=[],opportunities:O=[]}=K().props;c!=null&&c.permissions;const[E,p]=x.useState(!1),[M,k]=x.useState(!1),[B,ee]=x.useState("view"),I=()=>{if(t.attachment_url){const a=window.document.createElement("a");a.href=route("documents.download",t.id),a.download="",window.document.body.appendChild(a),a.click(),window.document.body.removeChild(a)}else r.error(s("No attachment available for download"))},U=a=>{r.loading(s("Updating document...")),d.put(route("documents.update",t.id),a,{onSuccess:l=>{p(!1),r.dismiss(),l.props.flash.success?r.success(s(l.props.flash.success)):l.props.flash.error&&r.error(s(l.props.flash.error))},onError:l=>{r.dismiss(),typeof l=="string"?r.error(l):r.error(s("Failed to update: {{errors}}",{errors:Object.values(l).join(", ")}))}})},z=()=>{r.loading(s("Deleting document...")),d.delete(route("documents.destroy",t.id),{onSuccess:a=>{r.dismiss(),a.props.flash.success?r.success(s(a.props.flash.success)):a.props.flash.error&&r.error(s(a.props.flash.error)),d.get(route("documents.index"))},onError:a=>{r.dismiss(),typeof a=="string"?r.error(a):r.error(s("Failed to delete: {{errors}}",{errors:Object.values(a).join(", ")}))}})},L=[{label:s("Back to Documents"),icon:e.jsx(G,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>d.get(route("documents.index"))}],$=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Documents"),href:route("documents.index")},{title:t.name}];return e.jsxs(P,{title:t.name,url:`/documents/${t.id}`,actions:L,breadcrumbs:$,children:[e.jsxs("div",{className:"mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:t.name}),e.jsx("p",{className:"text-sm mt-2",children:((u=t.type)==null?void 0:u.type_name)||s("No type specified")})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${t.status==="active"?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/10"}`,children:t.status==="active"?s("Active"):s("Inactive")})})]})}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(n,{className:"bg-gray-50 border-b",children:e.jsx(m,{className:"text-lg font-semibold",children:s("Document Information")})}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Account")}),e.jsx("p",{className:"text-sm mt-1",children:((h=t.account)==null?void 0:h.name)||s("-")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Folder")}),e.jsx("p",{className:"text-sm mt-1",children:((f=t.folder)==null?void 0:f.name)||s("-")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Type")}),e.jsx("p",{className:"text-sm mt-1",children:((j=t.type)==null?void 0:j.type_name)||s("-")})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Opportunity")}),e.jsx("p",{className:"text-sm mt-1",children:((g=t.opportunity)==null?void 0:g.name)||s("-")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Assigned To")}),e.jsx("p",{className:"text-sm mt-1",children:((b=t.assigned_user)==null?void 0:b.name)||s("Unassigned")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Status")}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${t.status==="active"?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/10"}`,children:t.status==="active"?s("Active"):s("Inactive")})})]})]})]})})]}),t.description&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(n,{className:"bg-gray-50 border-b",children:e.jsxs(m,{className:"flex items-center text-lg font-semibold",children:[e.jsx(D,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Description")]})}),e.jsx(o,{className:"p-6",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.description})})]}),t.attachment_url&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(n,{className:"bg-gray-50 border-b",children:e.jsxs(m,{className:"flex items-center text-lg font-semibold",children:[e.jsx(C,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Attachment")]})}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.attachment_name||s("Attachment")}),t.attachment_size&&e.jsxs("p",{className:"text-sm text-gray-500",children:[(t.attachment_size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{onClick:()=>window.open(t.attachment_url,"_blank"),variant:"outline",size:"sm",className:"bg-white",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),s("View")]}),e.jsxs(_,{onClick:I,variant:"outline",size:"sm",className:"bg-white",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),s("Download")]})]})]})})]}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(n,{className:"bg-gray-50 border-b",children:e.jsxs(m,{className:"flex items-center text-lg font-semibold",children:[e.jsx(Z,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Important Dates")]})}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.publish_date&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Publish Date")}),e.jsx("p",{className:"text-sm mt-1",children:((N=window.appSettings)==null?void 0:N.formatDateTime(t.publish_date,!1))||new Date(t.publish_date).toLocaleDateString()})]}),t.expiration_date&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Expiration Date")}),e.jsx("p",{className:"text-sm mt-1",children:((v=window.appSettings)==null?void 0:v.formatDateTime(t.expiration_date,!1))||new Date(t.expiration_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created At")}),e.jsx("p",{className:"text-sm mt-1",children:((w=window.appSettings)==null?void 0:w.formatDateTime(t.created_at,!1))||new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Updated At")}),e.jsx("p",{className:"text-sm mt-1",children:((y=window.appSettings)==null?void 0:y.formatDateTime(t.updated_at,!1))||new Date(t.updated_at).toLocaleDateString()})]})]})})]}),t.creator&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(n,{className:"bg-gray-50 border-b",children:e.jsx(m,{className:"text-lg font-semibold",children:s("Created By")})}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary text-white flex items-center justify-center text-sm font-bold",children:t.creator.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.creator.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.creator.email})]})]})})]})]}),e.jsx(R,{isOpen:E,onClose:()=>p(!1),onSubmit:U,formConfig:{fields:[{name:"name",label:s("Document Name"),type:"text",required:!0},{name:"account_id",label:s("Account"),type:"select",options:[{value:"null",label:s("No Account")},...A.map(a=>({value:a.id,label:a.name}))]},{name:"folder_id",label:s("Folder"),type:"select",options:[{value:"null",label:s("No Folder")},...T.map(a=>({value:a.id,label:a.name}))]},{name:"type_id",label:s("Type"),type:"select",options:[{value:"null",label:s("No Type")},...F.map(a=>({value:a.id,label:a.type_name}))]},{name:"opportunity_id",label:s("Opportunity"),type:"select",options:[{value:"null",label:s("No Opportunity")},...O.map(a=>({value:a.id,label:a.name}))]},{name:"publish_date",label:s("Publish Date"),type:"date"},{name:"expiration_date",label:s("Expiration Date"),type:"date"},{name:"attachment",label:s("Attachment"),type:"media-picker",placeholder:s("Select file...")},{name:"assigned_to",label:s("Assign To"),type:"select",options:[{value:"null",label:s("Unassigned")},...S.map(a=>({value:a.id,label:`${a.name} (${a.email})`}))]},{name:"description",label:s("Description"),type:"textarea"},{name:"status",label:s("Status"),type:"select",options:[{value:"active",label:s("Active")},{value:"inactive",label:s("Inactive")}]}],modalSize:"xl"},initialData:t,title:s("Edit Document"),mode:B}),e.jsx(V,{isOpen:M,onClose:()=>k(!1),onConfirm:z,itemName:t.name||"",entityName:s("document")})]})}export{qe as default};
