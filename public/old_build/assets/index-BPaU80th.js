import{r as p,j as e}from"./ui-C-VW1P-5.js";import{P as T}from"./page-template-CDM26U5Q.js";import{u as D,K as P,S as m,s as F,v as _,B as A,T as I,w as M,t as u}from"./app-BQKKzqf3.js";import{P as E}from"./pagination-mhOv5uX0.js";import{S as B}from"./search-and-filter-bar-CB2HkcPS.js";import{C as O}from"./CrudDeleteModal-Bjo4FQXD.js";import{M as f}from"./mail-DI9tSiFs.js";import{f as V}from"./utils-DCj7OOX3.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./dollar-sign-BO1aYhXH.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./calendar-BZ7v_rN9.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./user-B-NTs7Zv.js";import"./use-favicon-D-Hpb8YY.js";import"./grid-3x3-B93v7dH2.js";import"./list-D15qstQa.js";function be({newsletters:a}){var g,x;const{t}=D(),{filters:l={}}=P().props,[b,n]=p.useState(null),[s,y]=p.useState(l.search||""),[j,d]=p.useState(!1),[o,N]=p.useState(null),v=r=>{N(r),d(!0)},S=()=>{n(o.id),m.delete(route("newsletters.destroy",o.id),{onSuccess:()=>{u.success(t("Newsletter subscription deleted successfully")),n(null),d(!1)},onError:()=>{u.error(t("Failed to delete newsletter subscription")),n(null),d(!1)}})},k=r=>{r.preventDefault(),h()},h=()=>{const r={page:1};s&&(r.search=s),l.per_page&&(r.per_page=l.per_page),m.get(route("newsletters.index"),r,{preserveState:!0,preserveScroll:!0})},C=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Landing Page")},{title:t("Newsletters")}],c=[{key:"email",label:t("Email"),render:r=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:r})]})},{key:"created_at",label:t("Subscribed At"),render:r=>V(new Date(r),{addSuffix:!0})}];return e.jsxs(T,{title:t("Newsletters"),url:"/newsletters",breadcrumbs:C,noPadding:!0,children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:e.jsx(B,{searchTerm:s,onSearchChange:y,onSearch:k,filters:[],showFilters:!1,setShowFilters:()=>{},hasActiveFilters:()=>!1,activeFilterCount:()=>0,onResetFilters:()=>{},onApplyFilters:h,currentPerPage:((g=l.per_page)==null?void 0:g.toString())||"10",onPerPageChange:r=>{const i={page:1,per_page:parseInt(r)};s&&(i.search=s),m.get(route("newsletters.index"),i,{preserveState:!0,preserveScroll:!0})},showViewToggle:!1,activeView:"list",onViewChange:()=>{}})}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[c.map(r=>e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:r.label},r.key)),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:t("Actions")})]})}),e.jsxs("tbody",{children:[(x=a==null?void 0:a.data)==null?void 0:x.map(r=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-gray-800",children:[c.map(i=>e.jsx("td",{className:"px-4 py-3",children:i.render?i.render(r[i.key],r):r[i.key]},`${r.id}-${i.key}`)),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs(F,{children:[e.jsx(_,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>v(r),disabled:b===r.id,children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(M,{children:t("Delete")})]})})]},r.id)),(!(a!=null&&a.data)||a.data.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:c.length+1,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(f,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:t("No newsletter subscriptions")}),e.jsx("div",{children:t("Newsletter subscriptions from your landing page will appear here.")})]})})})]})]})}),e.jsx(E,{from:(a==null?void 0:a.from)||0,to:(a==null?void 0:a.to)||0,total:(a==null?void 0:a.total)||0,links:a==null?void 0:a.links,entityName:t("subscriptions"),onPageChange:r=>m.get(r)})]}),e.jsx(O,{isOpen:j,onClose:()=>d(!1),onConfirm:S,itemName:(o==null?void 0:o.email)||"",entityName:"newsletter subscription"})]})}export{be as default};
