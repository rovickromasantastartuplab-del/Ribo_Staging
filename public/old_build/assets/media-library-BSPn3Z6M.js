import{r as n,j as e}from"./ui-C-VW1P-5.js";import{P as ce}from"./page-template-CDM26U5Q.js";import{u as me,K as xe,al as o,P as S,C as X,c as q,a7 as he,I as H,V as F,B as m,X as ue,p as A,D as W,l as K,n as $,o as G,a8 as V}from"./app-BQKKzqf3.js";import{D as pe,a as fe,b as ge,c as v,d as je}from"./language-switcher-BX314FqS.js";import{H as J}from"./hard-drive-CBRsIzd1.js";import{E as Ne}from"./ellipsis-BsqioQZd.js";import{I as Q}from"./info-ZEKNfV81.js";import{C as E}from"./copy-D-hAzd4M.js";import{D as Y}from"./download-CUJ4p28I.js";import{C as be}from"./calendar-BZ7v_rN9.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./settings-G3vQs6CU.js";import"./dollar-sign-BO1aYhXH.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./user-B-NTs7Zv.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";function es(){const{t:a}=me(),{csrf_token:L}=xe().props,[T,w]=n.useState([]),[x,I]=n.useState([]),[Z,_]=n.useState(!1),[d,ee]=n.useState(""),[h,g]=n.useState(1),[se,j]=n.useState(!1),[P,y]=n.useState(!1),[p,C]=n.useState(!1),[ae,U]=n.useState(!1),[l,te]=n.useState(null),N=12,z=n.useCallback(async()=>{_(!0);try{const s=await fetch(route("api.media.index"),{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();w(t),I(t)}catch(s){console.error("Failed to load media:",s),o.error(a("Failed to load media"))}finally{_(!1)}},[]);n.useEffect(()=>{z()},[z]),n.useEffect(()=>{const s=T.filter(t=>t.name.toLowerCase().includes(d.toLowerCase())||t.file_name.toLowerCase().includes(d.toLowerCase()));I(s),g(1)},[d,T]);const R=async s=>{y(!0);const t=Array.from(s).filter(i=>i.type.startsWith("image/")?!0:(o.error(a("{{fileName}} is not an image file",{fileName:i.name})),!1));if(t.length===0){y(!1);return}const r=new FormData;t.forEach(i=>{r.append("files[]",i)});try{const i=await fetch(route("api.media.batch"),{method:"POST",body:r,credentials:"same-origin",headers:{"X-CSRF-TOKEN":L,"X-Requested-With":"XMLHttpRequest"}}),c=await i.json();i.ok?(w(f=>[...c.data,...f]),o.success(c.message||a("Files uploaded successfully")),c.errors&&c.errors.length>0&&c.errors.forEach(f=>{o.error(f)})):c.errors&&c.errors.length>0?c.errors.forEach(f=>{o.error(f)}):o.error(c.message||a("Failed to upload files"))}catch{o.error(a("Error uploading files"))}y(!1),j(!1)},D=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?C(!0):s.type==="dragleave"&&C(!1)},re=s=>{s.preventDefault(),s.stopPropagation(),C(!1),s.dataTransfer.files&&s.dataTransfer.files[0]&&R(s.dataTransfer.files)},le=async s=>{try{(await fetch(route("api.media.destroy",s),{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":L,"X-Requested-With":"XMLHttpRequest"}})).ok?(w(r=>r.filter(i=>i.id!==s)),o.success(a("Media deleted successfully"))):o.error(a("Failed to delete media"))}catch{o.error(a("Error deleting media"))}},M=s=>{navigator.clipboard.writeText(s),o.success(a("Image URL copied to clipboard"))},O=(s,t)=>{const r=document.createElement("a");r.href=route("api.media.download",s),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),o.success(a("Download started"))},ie=s=>{te(s),U(!0)},k=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,i)).toFixed(2))+" "+r[i]},ne=s=>new Date(s).toLocaleString(),u=Math.ceil(x.length/N),b=(h-1)*N,B=x.slice(b,b+N),oe=[{title:a("Dashboard"),href:"/dashboard"},{title:a("Media Library")}],de=[{label:a("Upload Media"),icon:e.jsx(S,{className:"h-4 w-4"}),variant:"default",onClick:()=>j(!0)}];return e.jsx(ce,{title:a("Media Library"),url:"/examples/media-library-demo",breadcrumbs:oe,actions:de,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{children:e.jsx(q,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(H,{placeholder:a("Search media files..."),value:d,onChange:s=>ee(s.target.value),className:"pl-10"})]}),d&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a('Showing results for "{{term}}"',{term:d})})]}),e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-md",children:e.jsx(F,{className:"h-4 w-4 text-primary"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[x.length," ",a("Files")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-green-500/10 rounded-md",children:e.jsx(J,{className:"h-4 w-4 text-green-600"})}),e.jsx("span",{className:"text-sm font-semibold",children:k(x.reduce((s,t)=>s+t.size,0))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-md",children:e.jsx(F,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[x.filter(s=>s.mime_type.startsWith("image/")).length," ",a("Images")]})]})]})]})})}),e.jsx(X,{children:e.jsx(q,{className:"p-6",children:Z?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:a("Loading media...")})]}):B.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(F,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a("No media files found")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:d?a('No results found for "{{term}}"',{term:d}):a("Get started by uploading your first media file")}),!d&&e.jsxs(m,{onClick:()=>j(!0),size:"lg",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),a("Upload Media")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:B.map(s=>{var t;return e.jsxs("div",{className:"group relative bg-card border rounded-lg overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"relative aspect-square bg-muted",children:[e.jsx("img",{src:s.thumb_url,alt:s.name,className:"w-full h-full object-cover",onError:r=>{r.currentTarget.src=s.url}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-200"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(pe,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(m,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0 bg-background/95 hover:bg-background shadow-md",children:e.jsx(Ne,{className:"h-4 w-4"})})}),e.jsxs(ge,{align:"end",className:"w-40",children:[e.jsxs(v,{onClick:()=>ie(s),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),a("View Info")]}),e.jsxs(v,{onClick:()=>M(s.url),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("Copy Link")]}),e.jsxs(v,{onClick:()=>O(s.id,s.file_name),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),a("Download")]}),e.jsx(je,{}),e.jsxs(v,{onClick:()=>le(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),a("Delete")]})]})]})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(A,{variant:"secondary",className:"text-xs bg-background/95",children:s.mime_type.split("/")[1].toUpperCase()})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium truncate",title:s.name,children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(J,{className:"h-3 w-3"}),k(s.size)]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"h-3 w-3"}),((t=window.appSettings)==null?void 0:t.formatDateTime(s.created_at,!1))||new Date(s.created_at).toLocaleDateString()]})})]})]},s.id)})}),u>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[a("Showing")," ",e.jsx("span",{className:"font-semibold",children:b+1})," ",a("to")," ",e.jsx("span",{className:"font-semibold",children:Math.min(b+N,x.length)})," ",a("of")," ",e.jsx("span",{className:"font-semibold",children:x.length})," ",a("files")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",disabled:h===1,onClick:()=>g(s=>Math.max(s-1,1)),children:a("Previous")}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(u,5)},(s,t)=>{let r;return u<=5||h<=3?r=t+1:h>=u-2?r=u-4+t:r=h-2+t,e.jsx(m,{variant:h===r?"default":"outline",size:"sm",className:"w-10 h-8",onClick:()=>g(r),children:r},r)})}),e.jsx(m,{variant:"outline",size:"sm",disabled:h===u,onClick:()=>g(s=>Math.min(s+1,u)),children:a("Next")})]})]})]})})}),e.jsx(W,{open:se,onOpenChange:j,children:e.jsxs(K,{className:"max-w-lg",children:[e.jsx($,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),a("Upload Media Files")]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 ${p?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:re,children:[e.jsxs("div",{className:`transition-all duration-200 ${p?"scale-110":""}`,children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(V,{className:`h-8 w-8 transition-colors ${p?"text-blue-500":"text-gray-400"}`})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a(p?"Drop files here":"Upload your images")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:a("Drag and drop your images here, or click to browse")}),e.jsx(H,{type:"file",multiple:!0,accept:"image/*",onChange:s=>s.target.files&&R(s.target.files),className:"hidden",id:"file-upload-modal"}),e.jsx(m,{type:"button",onClick:()=>{var s;return(s=document.getElementById("file-upload-modal"))==null?void 0:s.click()},disabled:P,size:"lg",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),a("Uploading...")]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),a("Choose Files")]})})]}),p&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-xl"})]})})]})}),e.jsx(W,{open:ae,onOpenChange:U,children:e.jsxs(K,{className:"max-w-lg",children:[e.jsx($,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),a("Media Information")]})}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center bg-gray-50 rounded-lg p-4",children:e.jsx("img",{src:l.thumb_url,alt:l.name,className:"max-w-full h-48 object-contain rounded-md shadow-sm",onError:s=>{s.currentTarget.src=l.url}})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Name")}),e.jsx("span",{className:"text-sm text-right max-w-xs truncate",title:l.file_name,children:l.file_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Type")}),e.jsx(A,{variant:"secondary",children:l.mime_type})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Size")}),e.jsx("span",{className:"text-sm",children:k(l.size)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("Uploaded")}),e.jsx("span",{className:"text-sm",children:ne(l.created_at)})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground block mb-2",children:a("URL")}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[e.jsx("code",{className:"text-xs text-muted-foreground flex-1 truncate",children:l.url}),e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>M(l.url),className:"h-6 w-6 p-0",children:e.jsx(E,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(m,{variant:"outline",onClick:()=>M(l.url),className:"flex-1",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("Copy Link")]}),e.jsxs(m,{variant:"outline",onClick:()=>O(l.id,l.file_name),className:"flex-1",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),a("Download")]})]})]})]})})]})})}export{es as default};
