import{r as _,j as e}from"./ui-C-VW1P-5.js";import{P as O}from"./page-template-CDM26U5Q.js";import{u as Q,K as R,S as h,C as S,a as k,b as C,c as N,I as p,ab as D,B as E,t as l}from"./app-BQKKzqf3.js";import{T as $}from"./textarea-BvlD1v8z.js";import{S as o,a as m,b as u,c as x,d as n}from"./select-ivmaqUw7.js";import{A as z}from"./arrow-left-CYc20UlY.js";import"./vendor-CxtKjBZA.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-up-5kET5X99.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./dollar-sign-BO1aYhXH.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./calendar-BZ7v_rN9.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./user-B-NTs7Zv.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";import"./index-IS-ASe-l.js";function ke(){var T,q,w,F,A;const{t}=Q(),{product:i,categories:j,brands:g,taxes:v,users:b,auth:f,mainImage:V,additionalImages:I}=R().props,B=((T=f==null?void 0:f.user)==null?void 0:T.type)==="company",[r,U]=_.useState({name:i.name||"",sku:i.sku||"",description:i.description||"",price:i.price||"",stock_quantity:i.stock_quantity||"",category_id:((q=i.category_id)==null?void 0:q.toString())||"",brand_id:((w=i.brand_id)==null?void 0:w.toString())||"",tax_id:((F=i.tax_id)==null?void 0:F.toString())||"",status:i.status||"active",assigned_to:((A=i.assigned_to)==null?void 0:A.toString())||""}),[P,M]=_.useState(()=>i.main_image_id&&V?i.main_image_id:""),[y,K]=_.useState(()=>i.additional_image_ids&&I?i.additional_image_ids.filter(c=>I.some(a=>a.id===c)):[]),H=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Products"),href:route("products.index")},{title:i.name},{title:t("Edit")}],d=(s,c)=>{U(a=>({...a,[s]:c}))},L=s=>{s.preventDefault();const c={...r,main_image_id:P||null,additional_image_ids:y.length>0?y:null,_method:"PUT"};l.loading(t("Updating product...")),h.post(route("products.update",i.id),c,{onSuccess:a=>{l.dismiss(),a.props.flash.success?l.success(t(a.props.flash.success)):a.props.flash.error&&l.error(t(a.props.flash.error)),h.visit(route("products.index"))},onError:a=>{l.dismiss(),typeof a=="string"?l.error(a):l.error(`Failed to update product: ${Object.values(a).join(", ")}`)}})};return e.jsx(O,{title:t("Edit Product"),breadcrumbs:H,actions:[{label:t("Back to Products"),icon:e.jsx(z,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>h.visit(route("products.index"))}],children:e.jsxs("form",{onSubmit:L,className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(C,{children:t("Basic Information")})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Product Name")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"name",value:r.name,onChange:s=>d("name",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:[t("SKU")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"sku",value:r.sku,onChange:s=>d("sku",s.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:t("Description")}),e.jsx($,{id:"description",value:r.description,onChange:s=>d("description",s.target.value),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Price")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"price",type:"number",step:"0.01",min:"0",value:r.price,onChange:s=>d("price",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stock_quantity",className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Stock Quantity")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"stock_quantity",type:"number",min:"0",value:r.stock_quantity,onChange:s=>d("stock_quantity",s.target.value),required:!0})]})]})]})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(C,{children:t("Product Images")})}),e.jsxs(N,{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(D,{label:t("Main Image"),value:P,onChange:s=>M(s),placeholder:t("Select main image..."),showPreview:!0,returnType:"id"})}),e.jsx("div",{children:e.jsx(D,{label:t("Additional Images"),value:y,onChange:s=>K(s),placeholder:t("Select additional images..."),multiple:!0,showPreview:!0,returnType:"id"})})]})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(C,{children:t("Categories & Settings")})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Category")}),e.jsxs(o,{value:r.category_id,onValueChange:s=>d("category_id",s),children:[e.jsx(m,{children:e.jsx(u,{placeholder:t("Select category")})}),e.jsx(x,{children:j==null?void 0:j.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Brand")}),e.jsxs(o,{value:r.brand_id,onValueChange:s=>d("brand_id",s),children:[e.jsx(m,{children:e.jsx(u,{placeholder:t("Select brand")})}),e.jsx(x,{children:g==null?void 0:g.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Tax")}),e.jsxs(o,{value:r.tax_id,onValueChange:s=>d("tax_id",s),children:[e.jsx(m,{children:e.jsx(u,{placeholder:t("Select tax")})}),e.jsx(x,{children:v==null?void 0:v.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.rate,"%)"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Assign To")}),e.jsxs(o,{value:r.assigned_to,onValueChange:s=>d("assigned_to",s),children:[e.jsx(m,{children:e.jsx(u,{placeholder:t("Select user")})}),e.jsx(x,{children:b==null?void 0:b.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.email,")"]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Status")}),e.jsxs(o,{value:r.status,onValueChange:s=>d("status",s),children:[e.jsx(m,{children:e.jsx(u,{})}),e.jsxs(x,{children:[e.jsx(n,{value:"active",children:t("Active")}),e.jsx(n,{value:"inactive",children:t("Inactive")})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>h.visit(route("products.index")),children:t("Cancel")}),e.jsx(E,{type:"submit",children:t("Update Product")})]})]})})}export{ke as default};
