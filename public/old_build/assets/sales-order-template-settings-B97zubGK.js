import{r as m,j as e}from"./ui-C-VW1P-5.js";import{u as y,K as _,m as v,ak as C,L as n,ab as L,B as N,a6 as w,t as c}from"./app-BQKKzqf3.js";import{S as I,a as D,b as E,c as k,d as q}from"./select-ivmaqUw7.js";import{S as P}from"./switch-T0u5R7d_.js";import R from"./Template1-anPZeVzs.js";import B from"./Template2-EZOat_u9.js";import Q from"./Template3-DlPUGTqk.js";import F from"./Template4-DWfsBKSA.js";import H from"./Template5-fO6pdQZ8.js";import U from"./Template6-CJvwboVz.js";import $ from"./Template7--VDUjNgB.js";import A from"./Template8-CwwL9PyY.js";import M from"./Template9-BeWmvPPg.js";import K from"./Template10-Czrofriy.js";import{I as X}from"./IframePortal-BwGjSup1.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./QRCodeComponent-CRXf3pHS.js";const z={template1:R,template2:B,template3:Q,template4:F,template5:H,template6:U,template7:$,template8:A,template9:M,template10:K},p={salesOrder:{sales_order_id:"00001",sales_order_number:"SO-2024-000001",issue_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],order_date:new Date().toISOString().split("T")[0],delivery_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],total_tax:60,total_discount:150,sub_total:300,total_amount:210,totalQuantity:3,totalRate:300,totalTaxPrice:60,totalDiscount:150,creator:{name:"<Creator Name>",email:"<Creator Email>"},billing_contact:{name:"<Billing Contact>",email:"<Billing Email>",phone:"<Billing Phone>"},shipping_contact:{name:"<Shipping Contact>",email:"<Shipping Email>",phone:"<Shipping Phone>"},billing_address:"<Billing Address>",billing_city:"<Billing City>",billing_state:"<Billing State>",billing_postal_code:"<Billing Zip>",billing_country:"<Billing Country>",shipping_address:"<Shipping Address>",shipping_city:"<Shipping City>",shipping_state:"<Shipping State>",shipping_postal_code:"<Shipping Zip>",shipping_country:"<Shipping Country>"},items:[{name:"Item 1",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 0",rate:"10 %",price:"$10"}]},{name:"Item 2",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 1",rate:"10 %",price:"$10"}]},{name:"Item 3",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 0",rate:"10 %",price:"$10"}]}],taxesData:{"Tax 0":30,"Tax 1":30},settings:{salesOrderLogo:null}},V={template1:"New York",template2:"Toronto",template3:"Rio",template4:"London",template5:"Istanbul",template6:"Mumbai",template7:"Hong Kong",template8:"Tokyo",template9:"Sydney",template10:"Paris"},W=["003580","666666","6676ef","f50102","f9b034","fbdd03","c1d82f","37a4e4","8a7966","6a737b","050f2c","0e3666","3baeff","3368e6","b84592","f64f81","f66c5f","fac168","46de98","40c7d0","be0028","2f9f45","371676","52325d","511378","0f3866","48c0b6","297cc0","ffffff","000000"];function xe(){const{t:a}=y(),{settings:o}=_().props,[Z,g]=m.useState(!1),[x,h]=m.useState(0),{data:r,setData:i,errors:d,reset:O}=v({salesOrderTemplate:o.salesOrderTemplate||"template1",salesOrderColor:o.salesOrderColor||"ffffff",salesOrderQrEnabled:o.salesOrderQrEnabled==="on"||o.salesOrderQrEnabled===!0,salesOrderLogoId:o.salesOrderLogoId||null,salesOrderLogoUrl:o.salesOrderLogo||null}),f=m.useRef(null);m.useEffect(()=>{if(!f.current)return;const t=new ResizeObserver(([s])=>{h(s.contentRect.height)});return t.observe(f.current),()=>t.disconnect()},[r.salesOrderLogoUrl]);const u=z[r.salesOrderTemplate],S=()=>{if(!u)return null;const t={...p.settings,salesOrderLogo:r.salesOrderLogoUrl,logoDark:o.logoDark},s={invoicePreviewMain:{maxWidth:"1000px"}};return e.jsx("div",{className:"transform scale-90 origin-top pt-10 w-full",children:e.jsx(X,{children:e.jsx(u,{salesOrder:p.salesOrder,items:p.items,taxesData:p.taxesData,settings:t,color:r.salesOrderColor,qr_invoice:r.salesOrderQrEnabled?"on":"off",qrCodeSvg:null,styles:s})})})},b=t=>{i("salesOrderLogoId",t),t?fetch(route("api.media.index")).then(s=>s.json()).then(s=>{const l=s.find(j=>j.id===Number(t));l&&i("salesOrderLogoUrl",l.url)}):i("salesOrderLogoUrl",null),setTimeout(()=>{const s=document.querySelector("[ref]");s&&h(s.offsetHeight)},150)},T=t=>{var s;return t.preventDefault(),g(!0),fetch(route("settings.sales-order-template"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({salesOrderTemplate:r.salesOrderTemplate,salesOrderColor:r.salesOrderColor,salesOrderQrEnabled:r.salesOrderQrEnabled,salesOrderLogoId:r.salesOrderLogoId})}).then(l=>l.json()).then(l=>{l.success?(c.success(l.success),O("salesOrderLogo")):l.error?c.error(l.error):c.error(a(l.message)),g(!1)}).catch(l=>{c.error(a("Failed to update sales order template settings")),g(!1)}),!1};return e.jsx(C,{title:a("Sales Orders Settings"),description:a("Configure sales orders template, colors, and display options"),action:e.jsxs(N,{type:"submit",form:"sales-orders-template-settings-form",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsx("form",{onSubmit:T,id:"sales-orders-template-settings-form",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] lg:items-start gap-6",children:[e.jsxs("div",{ref:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"sales_order_template",children:a("Sales Order Template")}),e.jsxs(I,{value:r.salesOrderTemplate,onValueChange:t=>i("salesOrderTemplate",t),children:[e.jsx(D,{children:e.jsx(E,{placeholder:a("Select template")})}),e.jsx(k,{children:Object.entries(V).map(([t,s])=>e.jsx(q,{value:t,children:s},t))})]}),d.salesOrderTemplate&&e.jsx("p",{className:"text-sm text-red-600",children:d.salesOrderTemplate})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{htmlFor:"sales_order_qr_enabled",className:"text-sm font-medium",children:a("QR Display?")}),e.jsx(P,{id:"sales_order_qr_enabled",checked:r.salesOrderQrEnabled,onCheckedChange:t=>i("salesOrderQrEnabled",t)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("Color Input")}),e.jsx("div",{className:"grid grid-cols-6 gap-1 w-50",children:W.map(t=>e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"salesOrderColor",value:t,checked:r.salesOrderColor===t,onChange:s=>i("salesOrderColor",s.target.value),className:"sr-only"}),e.jsx("div",{className:`w-6 h-6 border-2 ${r.salesOrderColor===t?"border-primary ring-2 ring-primary/20":"border-gray-300"}`,style:{backgroundColor:`#${t}`}})]},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salesOrderLogo",children:a("Sales Order Logo")}),e.jsx(L,{label:"",value:r.salesOrderLogoId||"",onChange:b,placeholder:a("Select sales order logo..."),showPreview:!0,returnType:"id"}),d.salesOrderLogo&&e.jsx("p",{className:"text-sm text-red-600",children:d.salesOrderLogo}),e.jsx("p",{className:"text-xs text-gray-500",children:a("Select a logo for sales orders")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("Preview")}),e.jsx("div",{className:"border rounded-lg overflow-y-auto overflow-x-auto bg-white lg:sticky lg:top-6",style:{height:x-25||"auto"},children:S()})]})]})})})}export{xe as default};
