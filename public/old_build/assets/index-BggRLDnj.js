import{r as h,j as e}from"./ui-C-VW1P-5.js";import{A as W,a as J,b as Q,P as Pe}from"./page-template-CDM26U5Q.js";import{u as oe,D as Oe,l as Fe,n as Ie,o as Ee,q as Te,p as X,r as Ae,B as b,K as Le,S as p,P as Me,s as y,v as S,w as C,T as z,C as $e,t as a}from"./app-BQKKzqf3.js";import{P as Z}from"./pagination-mhOv5uX0.js";import{S as Ue}from"./search-and-filter-bar-CB2HkcPS.js";import{D as ze,a as Re,b as Ve,c as k,d as Be}from"./language-switcher-BX314FqS.js";import{u as qe}from"./use-initials-C9WE3Vip.js";import{C as ee}from"./CrudFormModal-BgN_j_X-.js";import{C as Ge}from"./CrudDeleteModal-Bjo4FQXD.js";import{R as Ke,a as Ye}from"./radio-group-CSjni1r3.js";import{S as He}from"./switch-T0u5R7d_.js";import{C as F}from"./credit-card-CmRw-oUn.js";import{E as se}from"./eye-DxUCHEvv.js";import{A as te,K as re,L as ae}from"./lock-open-CBxZhRNn.js";import{I as ie}from"./info-ZEKNfV81.js";import{L as le}from"./lock-DLCREvz4.js";import{S as R}from"./square-pen-DbvvCy40.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./chevron-right-C7M1oeKV.js";import"./settings-G3vQs6CU.js";import"./dollar-sign-BO1aYhXH.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./calendar-BZ7v_rN9.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./user-B-NTs7Zv.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";import"./grid-3x3-B93v7dH2.js";import"./list-D15qstQa.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./checkbox-mSB0gHip.js";import"./scroll-area-vUH8MN0-.js";import"./circle-BMwBABJJ.js";function We({isOpen:r,onClose:w,onConfirm:i,plans:I,currentPlanId:o,companyName:P}){const{t:n}=oe(),[N,m]=h.useState(null),[v,f]=h.useState(!1),g=I.filter(l=>{const d=l.duration.toLowerCase();return v?d==="yearly":d==="monthly"});h.useEffect(()=>{if(r&&g&&g.length>0){const l=g.find(d=>d.is_current===!0);if(l)m(l.id);else if(o){const d=g.find(O=>O.id===o);m(d?o:g[0].id)}else m(g[0].id)}},[r,I,v]),h.useEffect(()=>{g.length>0&&N&&(g.find(d=>d.id===N)||m(g[0].id))},[v]);const j=()=>{N&&i(N,v?"yearly":"monthly")};return e.jsx(Oe,{open:r,onOpenChange:w,children:e.jsxs(Fe,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsxs(Ee,{children:[n("Upgrade Plan for")," ",P]}),e.jsx(Te,{children:n("Select a new plan for this company")})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:`text-sm font-medium ${v?"text-gray-500":"text-primary"}`,children:n("Monthly")}),e.jsx(He,{checked:v,onCheckedChange:f,className:"data-[state=checked]:bg-primary"}),e.jsx("span",{className:`text-sm font-medium ${v?"text-primary":"text-gray-500"}`,children:n("Yearly")}),v&&e.jsx(X,{variant:"secondary",className:"ml-2 bg-green-100 text-green-800",children:n("Save up to 20%")})]}),e.jsx(Ke,{value:(N==null?void 0:N.toString())||"",onValueChange:l=>m(parseInt(l)),className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:g.length>0?g.map(l=>{var d;return e.jsxs("div",{className:`relative rounded-lg border p-4 cursor-pointer transition-all ${N===l.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300"} ${l.is_current?"bg-blue-50":""}`,onClick:()=>m(l.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{value:l.id.toString(),id:`plan-${l.id}`,className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:l.name})]}),l.is_current&&e.jsx(X,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:n("Current")})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(F,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"text-xl font-bold text-primary",children:((d=window.appSettings)==null?void 0:d.formatCurrency(l.price))||`$${l.price}`}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["/ ",l.duration.toLowerCase()]})]}),l.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:l.description}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:n("Plan Limits")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.max_users===0?"∞":l.max_users}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:n("Users")})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.max_projects===0?"∞":l.max_projects}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:n("Projects")})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.max_contacts===0?"∞":l.max_contacts}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:n("Contacts")})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.max_accounts===0?"∞":l.max_accounts}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:n("Accounts")})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-center col-span-2",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:l.storage_limit?`${l.storage_limit}GB`:"1GB"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:n("Storage")})]})]})]})]},l.id)}):e.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e.jsxs("p",{children:[n("No plans available for")," ",n(v?"yearly":"monthly")," ",n("billing")]})})})})]}),e.jsxs(Ae,{children:[e.jsx(b,{variant:"outline",onClick:w,children:n("Cancel")}),e.jsx(b,{onClick:j,disabled:!N||g.length===0,children:n("Upgrade Plan")})]})]})})}function Rs(){var G,K,Y,H;const{t:r}=oe(),{auth:w,companies:i,plans:I,filters:o={}}=Le().props;w!=null&&w.permissions;const P=qe(),[n,N]=h.useState("list"),[m,v]=h.useState(o.search||""),[f,g]=h.useState(o.start_date?new Date(o.start_date):void 0),[j,l]=h.useState(o.end_date?new Date(o.end_date):void 0),[d,O]=h.useState(o.status||"all"),[ne,V]=h.useState(!1),[de,_]=h.useState(!1),[ce,E]=h.useState(!1),[me,T]=h.useState(!1),[xe,A]=h.useState(!1),[c,L]=h.useState(null),[he,pe]=h.useState([]),[D,M]=h.useState("create"),ge=()=>d!=="all"||m!==""||f!==void 0||j!==void 0,ue=()=>(d!=="all"?1:0)+(m?1:0)+(f?1:0)+(j?1:0),fe=s=>{s.preventDefault(),B()},B=()=>{const s={page:1};m&&(s.search=m),d!=="all"&&(s.status=d),f&&(s.start_date=f.toISOString().split("T")[0]),j&&(s.end_date=j.toISOString().split("T")[0]),o.per_page&&(s.per_page=o.per_page),p.get(route("companies.index"),s,{preserveState:!0,preserveScroll:!0})},je=s=>{O(s);const t={page:1};m&&(t.search=m),s!=="all"&&(t.status=s),f&&(t.start_date=f.toISOString().split("T")[0]),j&&(t.end_date=j.toISOString().split("T")[0]),o.per_page&&(t.per_page=o.per_page),p.get(route("companies.index"),t,{preserveState:!0,preserveScroll:!0})},be=s=>{const t=o.sort_field===s&&o.sort_direction==="asc"?"desc":"asc",u={sort_field:s,sort_direction:t,page:1};m&&(u.search=m),d!=="all"&&(u.status=d),f&&(u.start_date=f.toISOString().split("T")[0]),j&&(u.end_date=j.toISOString().split("T")[0]),o.per_page&&(u.per_page=o.per_page),p.get(route("companies.index"),u,{preserveState:!0,preserveScroll:!0})},x=(s,t)=>{switch(L(t),s){case"login-as":p.get(route("impersonate.start",t.id));break;case"company-info":M("view"),_(!0);break;case"upgrade-plan":ke(t);break;case"reset-password":T(!0);break;case"toggle-status":Se(t);break;case"edit":M("edit"),_(!0);break;case"delete":E(!0);break}},ve=()=>{L(null),M("create"),_(!0)},Ne=s=>{D==="create"?(a.loading(r("Creating company...")),p.post(route("companies.store"),s,{forceFormData:!0,onSuccess:t=>{_(!1),a.dismiss(),t.props.flash.success?a.success(r(t.props.flash.success)):t.props.flash.error&&a.error(r(t.props.flash.error))},onError:t=>{a.dismiss(),typeof t=="string"?a.error(t):a.error(`Failed to create company: ${Object.values(t).join(", ")}`)}})):D==="edit"&&(a.loading(r("Updating company...")),p.put(route("companies.update",c.id),s,{onSuccess:t=>{_(!1),a.dismiss(),t.props.flash.success?a.success(r(t.props.flash.success)):t.props.flash.error&&a.error(r(t.props.flash.error))},onError:t=>{a.dismiss(),typeof t=="string"?a.error(t):a.error(`Failed to update company: ${Object.values(t).join(", ")}`)}}))},we=()=>{a.loading(r("Deleting company...")),p.delete(route("companies.destroy",c.id),{onSuccess:s=>{E(!1),a.dismiss(),s.props.flash.success?a.success(r(s.props.flash.success)):s.props.flash.error&&a.error(r(s.props.flash.error))},onError:s=>{a.dismiss(),typeof s=="string"?a.error(s):a.error(`Failed to delete company: ${Object.values(s).join(", ")}`)}})},ye=s=>{a.loading(r("Resetting password...")),p.put(route("companies.reset-password",c.id),s,{onSuccess:t=>{T(!1),a.dismiss(),t.props.flash.success?a.success(r(t.props.flash.success)):t.props.flash.error&&a.error(r(t.props.flash.error))},onError:t=>{a.dismiss(),typeof t=="string"?a.error(t):a.error(`Failed to reset password: ${Object.values(t).join(", ")}`)}})},Se=s=>{a.loading(r("Updating status...")),p.put(route("companies.toggle-status",s.id),{},{onSuccess:t=>{a.dismiss(),t.props.flash.success?a.success(r(t.props.flash.success)):t.props.flash.error&&a.error(r(t.props.flash.error))},onError:t=>{a.dismiss(),typeof t=="string"?a.error(t):a.error(`Failed to update status: ${Object.values(t).join(", ")}`)}})},Ce=()=>{O("all"),v(""),g(void 0),l(void 0),V(!1),p.get(route("companies.index"),{page:1,per_page:o.per_page},{preserveState:!0,preserveScroll:!0})},ke=s=>{L(s),a.loading(r("Loading plans...")),fetch(route("companies.plans",s.id)).then(t=>t.json()).then(t=>{pe(t.plans),A(!0),a.dismiss()}).catch(t=>{a.dismiss(),a.error(r("Failed to load plans"))})},_e=(s,t)=>{a.loading(r("Upgrading plan...")),p.put(route("companies.upgrade-plan",c.id),{plan_id:s,duration:t},{onSuccess:u=>{A(!1),a.dismiss(),u.props.flash.success?a.success(r(u.props.flash.success)):u.props.flash.error&&a.error(r(u.props.flash.error)),p.reload()},onError:u=>{a.dismiss(),typeof u=="string"?a.error(u):a.error(`Failed to upgrade plan: ${Object.values(u).join(", ")}`)}})},$=[];((G=w==null?void 0:w.user)==null?void 0:G.type)==="superadmin"&&$.push({label:r("User Logs"),icon:e.jsx(se,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>p.visit(route("users.all-logs"))}),$.push({label:r("Add Company"),icon:e.jsx(Me,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>ve()});const De=[{title:r("Dashboard"),href:route("dashboard")},{title:r("Companies")}],q=s=>s!=null&&s.avatar?window.storage(s.avatar):window.asset("/images/avatar/avatar.png"),U=[{key:"name",label:r("Name"),sortable:!0,render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(W,{className:"h-10 w-10",children:[e.jsx(J,{src:q(t)}),e.jsx(Q,{children:P(t.name)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.email})]})]})},{key:"plan_name",label:r("Plan"),render:s=>e.jsx("span",{className:"capitalize",children:s})},{key:"created_at",label:r("Created At"),sortable:!0,render:s=>{var t;return((t=window.appSettings)==null?void 0:t.formatDateTime(s,!1))||new Date(s).toLocaleDateString()}}];return e.jsxs(Pe,{title:r("Companies"),url:"/companies",actions:$,breadcrumbs:De,noPadding:!0,children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:e.jsx(Ue,{searchTerm:m,onSearchChange:v,onSearch:fe,filters:[{name:"status",label:r("Status"),type:"select",value:d,onChange:je,options:[{value:"all",label:r("All Status")},{value:"active",label:r("Active")},{value:"inactive",label:r("Inactive")}]},{name:"start_date",label:r("Start Date"),type:"date",value:f,onChange:s=>g(s)},{name:"end_date",label:r("End Date"),type:"date",value:j,onChange:s=>l(s)}],showFilters:ne,setShowFilters:V,hasActiveFilters:ge,activeFilterCount:ue,onResetFilters:Ce,onApplyFilters:B,currentPerPage:((K=o.per_page)==null?void 0:K.toString())||"10",onPerPageChange:s=>{const t={page:1,per_page:parseInt(s)};m&&(t.search=m),d!=="all"&&(t.status=d),f&&(t.start_date=f.toISOString().split("T")[0]),j&&(t.end_date=j.toISOString().split("T")[0]),p.get(route("companies.index"),t,{preserveState:!0,preserveScroll:!0})},showViewToggle:!0,activeView:n,onViewChange:N})}),n==="list"?e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[U.map(s=>e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",onClick:()=>s.sortable&&be(s.key),children:e.jsxs("div",{className:"flex items-center",children:[s.label,s.sortable&&e.jsx("span",{className:"ml-1",children:o.sort_field===s.key?o.sort_direction==="asc"?"↑":"↓":""})]})},s.key)),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:r("Actions")})]})}),e.jsxs("tbody",{children:[(Y=i==null?void 0:i.data)==null?void 0:Y.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-gray-800",children:[U.map(t=>e.jsx("td",{className:"px-4 py-3",children:t.render?t.render(s[t.key],s):s[t.key]},`${s.id}-${t.key}`)),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("login-as",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Login as Company")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("company-info",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Company Info")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("upgrade-plan",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx(F,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Upgrade Plan")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("reset-password",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Reset Password")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("toggle-status",s),className:"text-amber-500 hover:text-amber-700",children:s.status==="active"?e.jsx(le,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})}),e.jsx(C,{children:s.status==="active"?r("Disable Login"):r("Enable Login")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("edit",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Edit")})]}),e.jsxs(y,{children:[e.jsx(S,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>x("delete",s),children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsx(C,{children:r("Delete")})]})]})})]},s.id)),(!(i!=null&&i.data)||i.data.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:U.length+1,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:r("No companies found")})})]})]})}),e.jsx(Z,{from:(i==null?void 0:i.from)||0,to:(i==null?void 0:i.to)||0,total:(i==null?void 0:i.total)||0,links:i==null?void 0:i.links,entityName:r("companies"),onPageChange:s=>p.get(s)})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(H=i==null?void 0:i.data)==null?void 0:H.map(s=>{var t;return e.jsx($e,{className:"bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs(W,{className:"h-16 w-16",children:[e.jsx(J,{src:q(s)}),e.jsx(Q,{className:"text-lg font-bold text-gray-700",children:P(s.name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.email}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${s.status==="active"?"bg-gray-800":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.status==="active"?r("Active"):r("Inactive")})]})]})]}),e.jsxs(ze,{children:[e.jsx(Re,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"})]})})}),e.jsxs(Ve,{align:"end",className:"w-48 z-50",sideOffset:5,children:[e.jsxs(k,{onClick:()=>x("login-as",s),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Login as Company")})]}),e.jsxs(k,{onClick:()=>x("company-info",s),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Company Info")})]}),e.jsxs(k,{onClick:()=>x("upgrade-plan",s),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Upgrade Plan")})]}),e.jsxs(k,{onClick:()=>x("reset-password",s),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Reset Password")})]}),e.jsxs(k,{onClick:()=>x("toggle-status",s),children:[s.status==="active"?e.jsx(le,{className:"h-4 w-4 mr-2"}):e.jsx(ae,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s.status==="active"?r("Disable Login"):r("Enable Login")})]}),e.jsx(Be,{}),e.jsxs(k,{onClick:()=>x("edit",s),className:"text-amber-600",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Edit")})]}),e.jsxs(k,{onClick:()=>x("delete",s),className:"text-rose-600",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Delete")})]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-md p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(F,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:s.plan_name})]}),s.plan_expiry_date&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:[r("Expires"),": ",((t=window.appSettings)==null?void 0:t.formatDateTime(s.plan_expiry_date,!1))||new Date(s.plan_expiry_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("edit",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),r("Edit")]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("company-info",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),r("View")]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("delete",s),className:"flex-1 h-9 text-sm text-gray-700 border-gray-300",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),r("Delete")]})]})]})},s.id)}),(!(i!=null&&i.data)||i.data.length===0)&&e.jsx("div",{className:"col-span-full p-8 text-center text-gray-500 dark:text-gray-400",children:r("No companies found")})]}),e.jsx("div",{className:"mt-6 bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:e.jsx(Z,{from:(i==null?void 0:i.from)||0,to:(i==null?void 0:i.to)||0,total:(i==null?void 0:i.total)||0,links:i==null?void 0:i.links,entityName:r("companies"),onPageChange:s=>p.get(s)})})]}),e.jsx(ee,{isOpen:de,onClose:()=>_(!1),onSubmit:s=>{s.login_enabled===!1&&delete s.password,s.status=s.login_enabled?"active":"inactive",delete s.login_enabled,Ne(s)},formConfig:{fields:[{name:"name",label:r("Company Name"),type:"text",required:!0},{name:"email",label:r("Email"),type:"email",required:!0},{name:"login_enabled",label:r("Enable Login"),placeholder:"",type:"switch",defaultValue:!0,conditional:s=>s!=="view"&&s!=="edit"},{name:"password",label:r("Password"),type:"password",required:s=>s==="create",conditional:(s,t)=>s!=="view"&&(t==null?void 0:t.login_enabled)===!0&&s!=="edit"}],modalSize:"lg"},initialData:{...c,login_enabled:(c==null?void 0:c.status)==="active"},title:r(D==="create"?"Add New Company":D==="edit"?"Edit Company":"View Company"),mode:D}),e.jsx(Ge,{isOpen:ce,onClose:()=>E(!1),onConfirm:we,itemName:(c==null?void 0:c.name)||"",entityName:"company"}),e.jsx(ee,{isOpen:me,onClose:()=>T(!1),onSubmit:ye,formConfig:{fields:[{name:"password",label:r("New Password"),type:"password",required:!0}],modalSize:"sm"},initialData:{},title:`Reset Password for ${(c==null?void 0:c.name)||"Company"}`,mode:"edit"}),e.jsx(We,{isOpen:xe,onClose:()=>A(!1),onConfirm:_e,plans:he,currentPlanId:c==null?void 0:c.plan_id,companyName:(c==null?void 0:c.name)||""})]})}export{Rs as default};
