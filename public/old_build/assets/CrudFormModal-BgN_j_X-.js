import{r as T,j as t}from"./ui-C-VW1P-5.js";import{p as oe,X as ie,u as le,D as me,l as pe,n as de,o as ue,q as he,L,r as xe,B as D,I as z,ab as ge}from"./app-BQKKzqf3.js";import{T as ye}from"./textarea-BvlD1v8z.js";import{S as J,a as K,b as Y,c as Z,d as W}from"./select-ivmaqUw7.js";import{R as _e,a as je}from"./radio-group-CSjni1r3.js";import{C as be}from"./checkbox-mSB0gHip.js";import{S as ve}from"./switch-T0u5R7d_.js";import{S as Ne}from"./scroll-area-vUH8MN0-.js";function we({options:y,selected:N,onChange:R,placeholder:p="Select options",className:h}){const[B,u]=T.useState(!1),[P,M]=T.useState(""),C=T.useRef(null);T.useEffect(()=>{function m(b){C.current&&!C.current.contains(b.target)&&u(!1)}return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const F=m=>{N.includes(m)||R([...N,m]),M(""),setTimeout(()=>{var $;const b=($=C.current)==null?void 0:$.querySelector("input");b&&b.focus()},10)},o=m=>{R(N.filter(b=>b!==m))},w=y.filter(m=>(P||!N.includes(m.value))&&m.label.toLowerCase().includes(P.toLowerCase()));return t.jsxs("div",{ref:C,className:`relative ${h}`,children:[t.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border rounded-md min-h-[38px] cursor-text",onClick:()=>u(!0),children:[N.map(m=>{const b=y.find($=>$.value===m);return t.jsxs(oe,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[(b==null?void 0:b.label)||m,t.jsx("button",{type:"button",className:"ml-1 rounded-sm",onClick:$=>{$.stopPropagation(),o(m)},children:t.jsx(ie,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},m)}),t.jsx("input",{type:"text",value:P,onChange:m=>M(m.target.value),onFocus:()=>u(!0),placeholder:N.length===0?p:"",className:"flex-1 outline-none bg-transparent min-w-[50px]"})]}),B&&w.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-[200px] overflow-y-auto",children:w.map(m=>t.jsx("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:()=>{F(m.value),u(!0)},children:m.label},m.value))})]})}function Se({field:y,formData:N,handleChange:R}){const p=Array.isArray(N[y.name])?N[y.name]:N[y.name]?[N[y.name].toString()]:[];return t.jsx(we,{options:y.options||[],selected:p,onChange:h=>R(y.name,h),placeholder:y.placeholder||`Select ${y.label}`})}function qe({isOpen:y,onClose:N,onSubmit:R,formConfig:p,initialData:h={},title:B,mode:u,description:P,isSubmitting:M=!1,externalErrors:C}){const{t:F}=le(),[o,w]=T.useState({}),[m,b]=T.useState({}),[$,k]=T.useState({}),G=p.exportRoute?()=>{window.location.href=route(p.exportRoute)}:void 0,f=()=>{if(!p.priceSummary)return 0;const e=o[p.priceSummary.quantityFieldName||"quantity"]||p.priceSummary.quantity||1;return p.priceSummary.unitPrice*e};T.useEffect(()=>{if(y){const e={...h};p.fields.forEach(n=>{n.type==="multi-select"&&e[n.name]&&!Array.isArray(e[n.name])&&(e[n.name]=Array.isArray(e[n.name])?e[n.name]:e[n.name]?[e[n.name].toString()]:[]),u==="create"&&(e[n.name]===void 0||e[n.name]===null)&&n.defaultValue!==void 0&&(e[n.name]=n.defaultValue)}),w(e||{}),b({}),p.fields.forEach(n=>{n.relation&&n.relation.endpoint&&fetch(n.relation.endpoint).then(c=>c.json()).then(c=>{k(j=>({...j,[n.name]:Array.isArray(c)?c:c.data||[]}))}).catch(c=>{})}),u==="edit"&&e.parent_module&&e.parent_module!=="none"&&fetch(route("api.parent-module.records",e.parent_module)).then(n=>n.json()).then(n=>{k(c=>({...c,parent_id:n}))}).catch(n=>console.error("Failed to load parent records:",n)),u==="edit"&&e.attendees&&Array.isArray(e.attendees)&&e.attendees.forEach((n,c)=>{n.type&&fetch(route("api.attendee-types.records",n.type)).then(j=>j.json()).then(j=>{k(i=>({...i,[`attendees_${c}_id`]:j}))}).catch(j=>console.error("Failed to load attendee records:",j))})}},[y,h,p.fields,u]),T.useEffect(()=>{y&&C&&Object.keys(C).length!==0&&b(e=>({...e,...C}))},[C,y]);const _=(e,n)=>{const c={...o,[e]:n};if(e==="products"&&Array.isArray(n)){const a=n.reduce((l,r)=>{const x=parseFloat(r.quantity)||0,V=parseFloat(r.unit_price)||0;return l+x*V},0);c.amount=a}if(e==="parent_module"&&(c.parent_id="",n&&n!=="none"?fetch(route("api.parent-module.records",n)).then(a=>a.json()).then(a=>{k(l=>({...l,parent_id:a}))}).catch(a=>console.error("Failed to load parent records:",a)):k(a=>({...a,parent_id:[]}))),e==="opportunity_id"&&n&&fetch(route("api.opportunities.details",n)).then(a=>a.json()).then(a=>{const l={...c,account_id:a.account_id||"",billing_contact_id:a.billing_contact_id||"",shipping_contact_id:a.shipping_contact_id||"",products:a.products||[]};w(l)}).catch(a=>console.error("Failed to load opportunity details:",a)),e==="quote_id"&&n&&fetch(route("api.quotes.details",n)).then(a=>a.json()).then(a=>{const l={...c,account_id:a.account_id||"",billing_contact_id:a.billing_contact_id||"",shipping_contact_id:a.shipping_contact_id||"",billing_address:a.billing_address||"",billing_city:a.billing_city||"",billing_state:a.billing_state||"",billing_postal_code:a.billing_postal_code||"",billing_country:a.billing_country||"",shipping_address:a.shipping_address||"",shipping_city:a.shipping_city||"",shipping_state:a.shipping_state||"",shipping_postal_code:a.shipping_postal_code||"",shipping_country:a.shipping_country||"",shipping_provider_type_id:a.shipping_provider_type_id||"",products:a.products||[]};w(l)}).catch(a=>console.error("Failed to load quote details:",a)),e==="sales_order_id"&&n){const l=window.location.pathname.includes("/invoices")?"api.invoices.sales-orders.details":"api.sales-orders.details";fetch(route(l,n)).then(r=>r.json()).then(r=>{const x={...c,account_id:r.account_id||"",billing_contact_id:r.billing_contact_id||"",shipping_contact_id:r.shipping_contact_id||"",contact_id:r.contact_id||"",quote_id:r.quote_id||"",opportunity_id:r.opportunity_id||"",billing_address:r.billing_address||"",billing_city:r.billing_city||"",billing_state:r.billing_state||"",billing_postal_code:r.billing_postal_code||"",billing_country:r.billing_country||"",shipping_address:r.shipping_address||"",shipping_city:r.shipping_city||"",shipping_state:r.shipping_state||"",shipping_postal_code:r.shipping_postal_code||"",shipping_country:r.shipping_country||"",shipping_provider_type_id:r.shipping_provider_type_id||"",products:r.products||[]};w(x)}).catch(r=>console.error("Failed to load sales order details:",r))}if(e==="purchase_order_id"&&n&&n!=="none"){const a={...c,return_order_id:""};fetch(route("api.receipt-orders.purchase-orders.details",n)).then(l=>l.json()).then(l=>{const r={...a,account_id:l.account_id||"",contact_id:l.contact_id||"",products:l.products||[]};w(r)}).catch(l=>console.error("Failed to load purchase order details:",l))}if(e==="return_order_id"&&n&&n!=="none"){const a={...c,purchase_order_id:""};fetch(route("api.receipt-orders.return-orders.details",n)).then(l=>l.json()).then(l=>{const r={...a,account_id:l.account_id||"",contact_id:l.contact_id||"",products:l.products||[]};w(r)}).catch(l=>console.error("Failed to load return order details:",l))}e==="quote_id"&&n&&window.location.pathname.includes("/invoices")&&fetch(route("api.invoices.quotes.details",n)).then(a=>a.json()).then(a=>{const l={...c,account_id:a.account_id||"",contact_id:a.contact_id||"",billing_address:a.billing_address||"",billing_city:a.billing_city||"",billing_state:a.billing_state||"",billing_postal_code:a.billing_postal_code||"",billing_country:a.billing_country||"",products:a.products||[]};w(l)}).catch(a=>console.error("Failed to load quote details:",a)),e==="opportunity_id"&&n&&window.location.pathname.includes("/invoices")&&fetch(route("api.invoices.opportunities.details",n)).then(a=>a.json()).then(a=>{const l={...c,account_id:a.account_id||"",contact_id:a.contact_id||"",products:a.products||[]};w(l)}).catch(a=>console.error("Failed to load opportunity details:",a)),e==="project_id"&&n&&window.location.pathname.includes("/project-tasks")&&(c.parent_id="",fetch(route("api.projects.details",n)).then(a=>a.json()).then(a=>{k(l=>{var r;return{...l,parent_id:((r=a.parent_tasks)==null?void 0:r.map(x=>({id:x.id,name:x.title})))||[]}})}).catch(a=>console.error("Failed to load project details:",a))),(e==="opportunity_id"||e==="quote_id"||e==="sales_order_id"||e==="purchase_order_id"||e==="return_order_id"||e==="project_id")&&n?e==="project_id"&&w(c):w(c),m[e]&&b(a=>{const l={...a};return delete l[e],l});const i=p.fields.find(a=>a.name===e);i!=null&&i.onChange&&i.onChange(n)},H=e=>{e.preventDefault();const n={...o};p.fields.forEach(i=>{i.type==="multi-select"&&n[i.name]&&(Array.isArray(n[i.name])||(n[i.name]=[n[i.name].toString()]))}),w(n);const c={};if(p.fields.forEach(i=>{if(i.type==="file"&&u==="edit")return;const a=i.conditional?i.conditional(u,o):!0;if(i.required&&a&&!o[i.name]&&(c[i.name]=`${i.label} is required`),i.type==="file"&&o[i.name]&&i.fileValidation){const l=o[i.name];if(i.fileValidation.maxSize&&l.size>i.fileValidation.maxSize){const r=i.fileValidation.maxSize/1048576;c[i.name]=`File size must be less than ${r}MB`}if(i.fileValidation.mimeTypes&&i.fileValidation.mimeTypes.length>0&&(i.fileValidation.mimeTypes.includes(l.type)||(c[i.name]=`File type must be one of: ${i.fileValidation.mimeTypes.join(", ")}`)),i.fileValidation.extensions&&i.fileValidation.extensions.length>0){const r=l.name,x=r.substring(r.lastIndexOf(".")).toLowerCase();i.fileValidation.extensions.includes(x)||(c[i.name]=`File extension must be one of: ${i.fileValidation.extensions.join(", ")}`)}}}),Object.keys(c).length>0){b(c);return}const j={...o};p.fields.forEach(i=>{i.type==="multi-select"&&j[i.name]&&(Array.isArray(j[i.name])||(j[i.name]=[j[i.name].toString()]))}),R(j)},U=e=>{var n,c,j,i,a;if(e.conditional&&!e.conditional(u,o))return null;if(e.render)return e.render(e,o,_);if(e.type==="custom")return null;if(u==="view"){if(e.type==="multi-select"){const r=(Array.isArray(o[e.name])?o[e.name]:[]).map(x=>{var g;const V=(g=e.options)==null?void 0:g.find(O=>O.value===x);return V?V.label:x}).join(", ");return t.jsx("div",{className:"p-2 border rounded-md bg-gray-50",children:r||"-"})}if(e.type==="array"){const l=o[e.name]||[];return t.jsx("div",{className:"space-y-2",children:l.length>0?t.jsx(t.Fragment,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[t.jsx("thead",{children:t.jsx("tr",{className:"bg-gray-50",children:(n=e.fields)==null?void 0:n.map(r=>t.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:r.label},r.name))})}),t.jsx("tbody",{children:l.map((r,x)=>{var V;return(parseFloat(r.quantity)||0)*(parseFloat(r.unit_price)||0),t.jsx("tr",{children:(V=e.fields)==null?void 0:V.map(g=>{var O;return t.jsx("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:g.type==="calculated"&&g.calculate?g.calculate(r):g.type==="select"&&g.options?((O=g.options.find(E=>E.value==r[g.name]))==null?void 0:O.label)||r[g.name]:g.type==="number"&&g.name==="unit_price"?`$${parseFloat(r[g.name]||0).toFixed(2)}`:r[g.name]||"-"},g.name)})},x)})}),e.renderFooter&&t.jsx("tfoot",{children:e.renderFooter(l,e)})]})})}):t.jsxs("div",{className:"p-4 text-center text-gray-500 border border-gray-200 rounded-lg",children:["No ",e.label.toLowerCase()," added"]})})}return t.jsx("div",{className:"p-2 border rounded-md bg-gray-50",children:e.type==="select"&&e.options?((c=e.options.find(l=>l.value===String(o[e.name])))==null?void 0:c.label)||o[e.name]||"-":o[e.name]||"-"})}switch(e.type){case"text":case"email":case"password":case"time":return t.jsx(z,{id:e.name,name:e.name,type:e.type,placeholder:e.placeholder,value:o[e.name]||"",onChange:s=>_(e.name,s.target.value),required:e.required,className:m[e.name]?"border-red-500":"",disabled:!1});case"date":const l=o[e.name]?o[e.name]instanceof Date?o[e.name].toISOString().split("T")[0]:typeof o[e.name]=="string"&&o[e.name].includes("T")?o[e.name].split("T")[0]:o[e.name]:"";return t.jsx(z,{id:e.name,name:e.name,type:"date",placeholder:e.placeholder,value:l,onChange:s=>_(e.name,s.target.value),required:e.required,className:m[e.name]?"border-red-500":"",disabled:!1});case"number":return t.jsx(z,{id:e.name,name:e.name,type:"number",placeholder:e.placeholder,value:o[e.name]||"",onChange:s=>_(e.name,s.target.value?parseFloat(s.target.value):""),required:e.required,className:m[e.name]?"border-red-500":"",disabled:!1});case"color":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(z,{id:e.name,name:e.name,type:"color",value:o[e.name]||e.defaultValue||"#3B82F6",onChange:s=>_(e.name,s.target.value),required:e.required,className:`w-16 h-10 p-1 ${m[e.name]?"border-red-500":""}`,disabled:!1}),t.jsx(z,{type:"text",value:o[e.name]||e.defaultValue||"#3B82F6",onChange:s=>_(e.name,s.target.value),placeholder:"#3B82F6",className:`flex-1 ${m[e.name]?"border-red-500":""}`,disabled:!1})]});case"textarea":return t.jsx(ye,{id:e.name,name:e.name,placeholder:e.placeholder,value:o[e.name]||"",onChange:s=>_(e.name,s.target.value),required:e.required,className:m[e.name]?"border-red-500":"",disabled:!1});case"select":const r=e.relation?$[e.name]||[]:e.name==="parent_id"?((j=$[e.name])==null?void 0:j.map(s=>({value:s.id.toString(),label:s.name})))||[]:e.options||[],x=String(o[e.name]||""),V=e.relation?r.find(s=>String(s[e.relation.valueField])===x):e.name==="parent_id"&&$[e.name]?$[e.name].find(s=>String(s.id)===x):r.find(s=>String(s.value)===x),g=V?e.relation?V[e.relation.labelField]:e.name==="parent_id"?V.name:V.label:"";return t.jsxs(J,{value:x,onValueChange:s=>_(e.name,s),disabled:!1,children:[t.jsx(K,{className:m[e.name]?"border-red-500":"",children:t.jsx(Y,{placeholder:e.placeholder||`Select ${e.label}`,children:g||e.placeholder||`Select ${e.label}`})}),t.jsx(Z,{className:"z-[60000]",children:e.relation?r.map(s=>t.jsx(W,{value:String(s[e.relation.valueField]),children:s[e.relation.labelField]},s[e.relation.valueField])):r.map(s=>t.jsx(W,{value:String(s.value),children:s.label},s.value))})]},`${e.name}-${x}`);case"radio":return t.jsx(_e,{value:o[e.name]||"",onValueChange:s=>_(e.name,s),disabled:!1,className:"flex gap-4",children:(i=e.options)==null?void 0:i.map(s=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(je,{value:s.value,id:`${e.name}-${s.value}`}),t.jsx(L,{htmlFor:`${e.name}-${s.value}`,children:s.label})]},s.value))});case"checkbox":return t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(be,{id:e.name,checked:!!o[e.name],onCheckedChange:s=>{_(e.name,s),e.onChange&&e.onChange(s)},disabled:!1}),t.jsx(L,{htmlFor:e.name,children:e.placeholder||e.label})]});case"switch":return t.jsx(ve,{id:e.name,checked:!!o[e.name],onCheckedChange:s=>_(e.name,s),disabled:!1});case"multi-select":return t.jsx(Se,{field:e,formData:o,handleChange:_});case"media-picker":const O=o[e.name]||(u==="edit"&&h[e.name]?h[e.name].startsWith("http")?h[e.name]:`/storage/${h[e.name]}`:"");return t.jsx(ge,{value:O,onChange:s=>_(e.name,s),placeholder:e.placeholder||`Select ${e.label}`,showPreview:!0});case"array":const E=o[e.name]||[],se=()=>{var v;const s={};(v=e.fields)==null||v.forEach(A=>{s[A.name]=A.defaultValue||(A.type==="number"?0:"")}),_(e.name,[...E,s])},re=s=>{const v=E.filter((A,d)=>d!==s);_(e.name,v)},X=(s,v,A)=>{const d=[...E];if(d[s]={...d[s],[v]:A},v==="product_id"&&(e.productOptions||p.productOptions)){const S=e.productOptions||p.productOptions,I=S==null?void 0:S.find(q=>q.id==A);I&&(d[s].unit_price=parseFloat(I.price))}e.name==="attendees"&&v==="type"&&(d[s].id="",A?fetch(route("api.attendee-types.records",A)).then(S=>S.json()).then(S=>{k(I=>({...I,[`attendees_${s}_id`]:S}))}).catch(S=>console.error("Failed to load attendee records:",S)):k(S=>({...S,[`attendees_${s}_id`]:[]}))),_(e.name,d)};return t.jsxs("div",{className:"space-y-2",children:[E.map((s,v)=>{var A;return(parseFloat(s.quantity)||0)*(parseFloat(s.unit_price)||0),t.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-sm font-medium",children:[e.label," #",v+1]}),t.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>re(v),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),t.jsx("div",{className:`gap-3 ${e.name==="attendees"?"flex":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2"}`,children:(A=e.fields)==null?void 0:A.map(d=>{var S,I;return t.jsxs("div",{className:"space-y-1",style:e.name==="attendees"?{width:d.name==="type"?"30%":"70%"}:{},children:[t.jsx(L,{className:"text-xs",children:d.label}),d.type==="calculated"?t.jsx("div",{className:"h-10 px-3 py-2 bg-gray-50 border rounded-md text-sm flex items-center",children:d.calculate?d.calculate(s):"-"}):d.type==="select"?t.jsxs(J,{value:String(s[d.name]||""),onValueChange:q=>X(v,d.name,q),children:[t.jsx(K,{className:"h-10",children:t.jsx(Y,{placeholder:`Select ${d.label}`})}),t.jsx(Z,{className:"z-[70000]",children:e.name==="attendees"&&d.name==="id"?(S=$[`attendees_${v}_id`])==null?void 0:S.map(q=>t.jsx(W,{value:String(q.id),children:q.name},q.id)):(I=d.options)==null?void 0:I.map(q=>t.jsx(W,{value:String(q.value),children:q.label},q.value))})]}):t.jsx(z,{type:d.type||"text",value:s[d.name]||"",onChange:q=>X(v,d.name,d.type==="number"?parseFloat(q.target.value)||0:q.target.value),placeholder:d.placeholder,className:"h-10",step:d.step,min:d.min})]},d.name)})})]},v)}),E.length>0&&e.renderSummary&&t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.renderSummary(E,e)}),t.jsxs(D,{type:"button",variant:"outline",onClick:se,className:"w-full",children:["Add ",e.label]})]});case"file":const ce=o[e.name]&&o[e.name]instanceof File&&o[e.name].type.startsWith("image/");return t.jsxs(t.Fragment,{children:[t.jsx(z,{id:e.name,name:e.name,type:"file",accept:(a=e.fileValidation)==null?void 0:a.accept,onChange:s=>{s.target.files&&s.target.files.length>0&&_(e.name,s.target.files[0])},className:m[e.name]?"border-red-500":"",disabled:!1}),u==="edit"&&h[e.name]&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:[F("Current file"),": "]}),t.jsx("a",{href:h[e.name].startsWith("http")?h[e.name]:`/storage/${h[e.name]}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:h.featured_image_original_name||h[e.name]})]}),e.fileValidation&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.fileValidation.extensions&&t.jsxs("span",{children:[F("Allowed extensions"),": ",e.fileValidation.extensions.join(", ")," "]}),e.fileValidation.maxSize&&t.jsxs("span",{children:[F("Max size"),": ",(e.fileValidation.maxSize/(1024*1024)).toFixed(1),"MB"]})]}),ce&&t.jsx("div",{className:"mt-2",children:o[e.name]&&o[e.name]instanceof File?t.jsxs("div",{className:"mt-2",children:[t.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[F("Preview"),":"]}),t.jsx("img",{src:URL.createObjectURL(o[e.name]),alt:"Preview",className:"h-24 w-auto rounded-md object-cover shadow-sm"})]}):u==="edit"&&h[e.name]&&t.jsxs("div",{className:"mt-2",children:[t.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[F("Current image"),":"]}),t.jsx("img",{src:typeof h[e.name]=="string"&&h[e.name].startsWith&&h[e.name].startsWith("http")?h[e.name]:`/storage/${h[e.name]}`,alt:"Current",className:"h-24 w-auto rounded-md object-cover shadow-sm",onError:s=>{s.currentTarget.src="https://placehold.co/200x150?text=Image+Not+Found"}})]})})]});default:return null}},ee=()=>{const e={sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl",full:"sm:max-w-full"};return p.modalSize?e[p.modalSize]:"sm:max-w-md"},te=()=>{const e={};return p.fields.forEach(n=>{const c=n.row||0;e[c]||(e[c]=[]),e[c].push(n)}),Object.entries(e).sort(([n],[c])=>parseInt(n)-parseInt(c))},Q=p.layout||"default",ae=p.columns||1,ne=`crud-modal-${u}-${B.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}`;return G&&(qe.handleExport=G),t.jsx(me,{open:y,onOpenChange:N,children:t.jsxs(pe,{className:`${ee()} max-h-[90vh]`,modalId:ne,children:[t.jsxs(de,{children:[t.jsx(ue,{children:B}),t.jsx(he,{children:P||" "})]}),t.jsx(Ne,{className:"max-h-[70vh] pr-4",children:t.jsxs("form",{onSubmit:H,className:"space-y-4",children:[p.priceSummary&&t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[F("Unit Price"),":"]}),t.jsxs("span",{className:"font-medium",children:["$",p.priceSummary.unitPrice.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[F("Quantity"),":"]}),t.jsx("span",{className:"font-medium",children:o[p.priceSummary.quantityFieldName||"quantity"]||p.priceSummary.quantity||1})]}),t.jsx("div",{className:"border-t pt-2",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"font-semibold",children:[F("Total Price"),":"]}),t.jsxs("span",{className:"font-bold text-lg text-primary",children:["$",f().toFixed(2)]})]})})]}),Q==="grid"?t.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${ae}, 1fr)`,gap:"1rem"},children:p.fields.map(e=>e.conditional&&!e.conditional(u,o)?null:t.jsxs("div",{className:"space-y-2",style:{gridColumn:e.colSpan?`span ${e.colSpan}`:"span 1",width:"100%"},children:[t.jsxs(L,{htmlFor:e.name,className:"text-sm font-medium",children:[e.label," ",e.required&&!(e.type==="file"&&u==="edit")&&t.jsx("span",{className:"text-red-500",children:"*"})]}),U(e),m[e.name]&&t.jsx("p",{className:"text-xs text-red-500",children:m[e.name]})]},e.name))}):Q==="flex"?t.jsx("div",{className:"flex flex-wrap gap-4",children:p.fields.map(e=>e.conditional&&!e.conditional(u,o)?null:t.jsxs("div",{className:"space-y-2",style:{width:e.width||"100%",flexGrow:e.width?0:1},children:[t.jsxs(L,{htmlFor:e.name,className:"text-sm font-medium",children:[e.label," ",e.required&&!(e.type==="file"&&u==="edit")&&t.jsx("span",{className:"text-red-500",children:"*"})]}),U(e),m[e.name]&&t.jsx("p",{className:"text-xs text-red-500",children:m[e.name]})]},e.name))}):te().map(([e,n])=>t.jsx("div",{className:"flex flex-wrap gap-4 mb-4",children:n.map(c=>c.conditional&&!c.conditional(u,o)?null:t.jsxs("div",{className:"space-y-2",style:{width:c.width||"100%"},children:[t.jsxs(L,{htmlFor:c.name,className:"text-sm font-medium",children:[c.label," ",c.required&&!(c.type==="file"&&u==="edit")&&t.jsx("span",{className:"text-red-500",children:"*"})]}),U(c),m[c.name]&&t.jsx("p",{className:"text-xs text-red-500",children:m[c.name]})]},c.name))},e))]})}),t.jsxs(xe,{className:"sm:justify-end",children:[t.jsx(D,{type:"button",variant:"outline",onClick:N,children:F("Cancel")}),u!=="view"&&t.jsx(D,{type:"button",onClick:H,disabled:M,children:F("Save")})]})]})})}export{qe as C};
