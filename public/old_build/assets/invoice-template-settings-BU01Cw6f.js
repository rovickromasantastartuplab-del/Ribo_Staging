import{r as p,j as e}from"./ui-C-VW1P-5.js";import{u as y,K as S,m as C,ak as N,L as c,ab as L,B as I,a6 as _,t as d}from"./app-BQKKzqf3.js";import{S as w,a as E,b as D,c as k,d as q}from"./select-ivmaqUw7.js";import{S as R}from"./switch-T0u5R7d_.js";import B from"./Template1-D_c-WOvd.js";import P from"./Template2-B9YFv7jC.js";import Q from"./Template3-DAVHVFDJ.js";import O from"./Template4-DnICxY72.js";import F from"./Template5-eYwdo_pq.js";import H from"./Template6-BrIsY0x4.js";import U from"./Template7-Dr9JniUw.js";import $ from"./Template8-k_1bfJ4Q.js";import M from"./Template9-CYyq5F5Z.js";import A from"./Template10-CuXgBiEW.js";import{I as K}from"./IframePortal-BwGjSup1.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./QRCodeComponent-CRXf3pHS.js";const V={template1:B,template2:P,template3:Q,template4:O,template5:F,template6:H,template7:U,template8:$,template9:M,template10:A},v={invoice:{invoice_id:"00001",invoice_number:"INV-2024-000001",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],total_tax:60,total_discount:150,sub_total:300,total_amount:210,totalQuantity:3,totalRate:300,totalTaxPrice:60,totalDiscount:150,creator:{name:"<Creator Name>",email:"<Creator Email>"},account:{name:"<Billing Contact>",email:"<Billing Email>",phone:"<Billing Phone>"},billing_address:"<Billing Address>",billing_city:"<Billing City>",billing_state:"<Billing State>",billing_postal_code:"<Billing Zip>",billing_country:"<Billing Country>"},items:[{name:"Item 1",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 0",rate:"10 %",price:"$10"}]},{name:"Item 2",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 1",rate:"10 %",price:"$10"}]},{name:"Item 3",quantity:1,price:100,discount:50,itemTax:[{name:"Tax 0",rate:"10 %",price:"$10"}]}],taxesData:{"Tax 0":30,"Tax 1":30},settings:{invoiceLogo:null}},X={template1:"New York",template2:"Toronto",template3:"Rio",template4:"London",template5:"Istanbul",template6:"Mumbai",template7:"Hong Kong",template8:"Tokyo",template9:"Sydney",template10:"Paris"},z=["003580","666666","6676ef","f50102","f9b034","fbdd03","c1d82f","37a4e4","8a7966","6a737b","050f2c","0e3666","3baeff","3368e6","b84592","f64f81","f66c5f","fac168","46de98","40c7d0","be0028","2f9f45","371676","52325d","511378","0f3866","48c0b6","297cc0","ffffff","000000"];function ue(){const{t:a}=y(),{settings:s}=S().props,[W,g]=p.useState(!1),[h,f]=p.useState(0),{data:o,setData:l,errors:m}=C({invoiceTemplate:s.invoiceTemplate||"template1",invoiceColor:s.invoiceColor||"ffffff",invoiceQrEnabled:s.invoiceQrEnabled==="on"||s.invoiceQrEnabled===!0,invoiceLogoId:s.invoiceLogoId||null,invoiceLogoUrl:s.invoiceLogo||null}),r=p.useRef(null);p.useEffect(()=>{if(!r.current)return;const t=new ResizeObserver(([i])=>{f(i.contentRect.height)});return t.observe(r.current),()=>t.disconnect()},[o.invoiceLogoUrl]);const u=V[o.invoiceTemplate],x=()=>{if(!u)return null;const t={...v.settings,invoiceLogo:o.invoiceLogoUrl,logoDark:s.logoDark},i={invoicePreviewMain:{maxWidth:"1000px"}};return e.jsx("div",{className:"transform scale-90 origin-top pt-10 w-full",children:e.jsx(K,{children:e.jsx(u,{invoice:v.invoice,items:v.items,taxesData:v.taxesData,settings:t,color:o.invoiceColor,qr_invoice:o.invoiceQrEnabled?"on":"off",qrCodeSvg:null,styles:i})})})},b=t=>{l("invoiceLogoId",t),t?fetch(route("api.media.index")).then(i=>i.json()).then(i=>{const n=i.find(T=>T.id===Number(t));n&&l("invoiceLogoUrl",n.url)}):l("invoiceLogoUrl",null),setTimeout(()=>{if(r&&typeof r=="function"){const i=document.querySelector("[ref]");i&&f(i.offsetHeight)}},150)},j=t=>{var i;return t.preventDefault(),g(!0),fetch(route("settings.invoice-template"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({invoiceTemplate:o.invoiceTemplate,invoiceColor:o.invoiceColor,invoiceQrEnabled:o.invoiceQrEnabled,invoiceLogoId:o.invoiceLogoId})}).then(n=>n.json()).then(n=>{n.success?d.success(n.success):n.error?d.error(n.error):d.error(a(n.message)),g(!1)}).catch(n=>{d.error(a("Failed to update invoice template settings")),g(!1)}),!1};return e.jsx(N,{title:a("Invoice Settings"),description:a("Configure invoice template, colors, and display options"),action:e.jsxs(I,{type:"submit",form:"invoice-template-settings-form",size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsx("form",{onSubmit:j,id:"invoice-template-settings-form",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] lg:items-start gap-6",children:[e.jsxs("div",{ref:r,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"invoice_template",children:a("Invoice Template")}),e.jsxs(w,{value:o.invoiceTemplate,onValueChange:t=>l("invoiceTemplate",t),children:[e.jsx(E,{children:e.jsx(D,{placeholder:a("Select template")})}),e.jsx(k,{children:Object.entries(X).map(([t,i])=>e.jsx(q,{value:t,children:i},t))})]}),m.invoiceTemplate&&e.jsx("p",{className:"text-sm text-red-600",children:m.invoiceTemplate})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{htmlFor:"invoice_qr_enabled",className:"text-sm font-medium",children:a("QR Display?")}),e.jsx(R,{id:"invoice_qr_enabled",checked:o.invoiceQrEnabled,onCheckedChange:t=>l("invoiceQrEnabled",t)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("Color Input")}),e.jsx("div",{className:"grid grid-cols-6 gap-1 w-50",children:z.map(t=>e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"invoiceColor",value:t,checked:o.invoiceColor===t,onChange:i=>l("invoiceColor",i.target.value),className:"sr-only"}),e.jsx("div",{className:`w-6 h-6 border-2 ${o.invoiceColor===t?"border-primary ring-2 ring-primary/20":"border-gray-300"}`,style:{backgroundColor:`#${t}`}})]},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"invoiceLogo",children:a("Invoice Logo")}),e.jsx(L,{label:"",value:o.invoiceLogoId||"",onChange:b,placeholder:a("Select invoice logo..."),showPreview:!0,returnType:"id"}),m.invoiceLogo&&e.jsx("p",{className:"text-sm text-red-600",children:m.invoiceLogo}),e.jsx("p",{className:"text-xs text-gray-500",children:a("Select a logo for invoices")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("Preview")}),e.jsx("div",{className:"border rounded-lg overflow-y-auto overflow-x-auto bg-white lg:sticky lg:top-6",style:{height:h-25||"auto"},children:x()})]})]})})})}export{ue as default};
