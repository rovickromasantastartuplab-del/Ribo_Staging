import{r as _,j as e}from"./ui-C-VW1P-5.js";import{u as q,K as ee,t as U,k as se,h as te,d as re}from"./app-BQKKzqf3.js";import R from"./Template1-C_qi4Klx.js";import ae from"./Template2-DDBHMmnj.js";import le from"./Template3-h64ZEYzk.js";import ie from"./Template4-BJh6CdG2.js";import ne from"./Template5-C_n4GoFr.js";import de from"./Template6-DBWTdLhY.js";import oe from"./Template7-C8EPl6IN.js";import ce from"./Template8-C1CogZbi.js";import me from"./Template9-FT2EzxkW.js";import xe from"./Template10-Ciq61FGw.js";import{I as he}from"./IframePortal-BwGjSup1.js";import{C as pe}from"./copy-D-hAzd4M.js";import{P as ge}from"./printer-CMSe0GyN.js";import{C as Q}from"./calendar-BZ7v_rN9.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";import"./QRCodeComponent-CRXf3pHS.js";const ue={template1:R,template2:ae,template3:le,template4:ie,template5:ne,template6:de,template7:oe,template8:ce,template9:me,template10:xe};function Ue({quote:r,templateId:V="template1",color:W="ffffff",qrEnabled:E=!1,settings:H={},themeColor:k="blue",customColor:z=null}){var P,A,$,B,I;const{t:s}=q(),{props:m}=ee(),[C,T]=_.useState(!1),N=m.auth||{},F=(N==null?void 0:N.permissions)||[];_.useEffect(()=>{var t,a;(t=m.flash)!=null&&t.success&&U.success(s(m.flash.success)),(a=m.flash)!=null&&a.error&&U.error(s(m.flash.error))},[m.flash,s]);const v=k==="custom"?z:{blue:"#3b82f6",green:"#10b77f",purple:"#8b5cf6",orange:"#f97316",red:"#ef4444"}[k]||"#3b82f6",l={primary:v,secondary:v},i=t=>{var a;return((a=window.appSettings)==null?void 0:a.formatCurrency(Number(t||0)))||`$${Number(t||0).toFixed(2)}`},h=t=>{var a;return t?((a=window.appSettings)==null?void 0:a.formatDateTime(t,!1))||new Date(t).toLocaleDateString():s("-")},O=()=>{var d;let t=0,a=0,n=0;return(d=r.products)==null||d.forEach(o=>{const c=Number(o.pivot.total_price)||0,p=Number(o.pivot.discount_amount)||0,x=c-p;t+=x,n+=p,o.tax&&(a+=x*Number(o.tax.rate)/100)}),{subtotal:t,totalTax:a,totalDiscount:n,grandTotal:t+a}},{subtotal:D,totalTax:u,totalDiscount:j,grandTotal:L}=O(),S=_.useRef(null),G=()=>{var t;(t=S.current)==null||t.print()},J=async()=>{try{await navigator.clipboard.writeText(window.location.href),T(!0),setTimeout(()=>T(!1),2e3)}catch(t){console.error("Failed to copy link:",t)}},K=r.products.map(t=>{var c;const a=t.pivot.quantity*t.pivot.unit_price,n=t.pivot.discount_amount||0,d=a-n,o=t.tax?d*t.tax.rate/100:0;return{name:t.name,quantity:t.pivot.quantity,price:t.pivot.unit_price,tax:((c=t.tax)==null?void 0:c.rate)||0,discount:n,itemTax:t.tax?[{name:t.tax.name,rate:`${t.tax.rate}%`,price:i(o)}]:[]}}),X=r.products.reduce((t,a)=>{if(a.tax){const n=a.pivot.quantity*a.pivot.unit_price,d=a.pivot.discount_amount||0,c=(n-d)*a.tax.rate/100;t[a.tax.name]=(t[a.tax.name]||0)+c}return t},{}),Y={...r,valid_until:h(r.valid_until||new Date().toISOString()),created_at:h(r.created_at||new Date().toISOString()),sub_total:D,total_tax:u,total_amount:L,totalQuantity:r.products.reduce((t,a)=>t+a.pivot.quantity,0),totalRate:r.products.reduce((t,a)=>t+a.pivot.quantity*a.pivot.unit_price,0),totalTaxPrice:u,totalDiscount:j,total_discount:j},Z=ue[V]||R,M=t=>{const a={draft:"bg-gray-50 text-gray-600 ring-gray-500/10",sent:"bg-blue-50 text-blue-700 ring-blue-700/10",accepted:"bg-green-50 text-green-700 ring-green-600/20",rejected:"bg-red-50 text-red-700 ring-red-600/10",expired:"bg-yellow-50 text-yellow-800 ring-yellow-600/20"};return e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${a[t]||a.draft}`,children:s((t==null?void 0:t.charAt(0).toUpperCase())+(t==null?void 0:t.slice(1)))||s("Draft")})};return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:s("Quote {{quoteNumber}}",{quoteNumber:r.quote_number})}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:from-gray-900 dark:to-gray-800 py-8 print:p-0 print:m-0 print:bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 print-container",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 print:hidden",children:[e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[s("Quote Details")," - ",r.quote_number]}),e.jsx("p",{className:"text-gray-600 mt-1",children:s("View your quote")})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[te(F,"view-quotes")&&e.jsxs("button",{onClick:J,className:"inline-flex items-center px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[C?e.jsx(re,{className:"w-4 h-4 mr-2 text-green-600"}):e.jsx(pe,{className:"w-4 h-4 mr-2"}),s(C?"Copied!":"Copy Link")]}),e.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2.5 text-white rounded-xl text-sm font-medium transition-all duration-200 shadow-sm hover:shadow-md",style:{backgroundColor:v,":hover":{filter:"brightness(0.9)"}},children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),s("Print Quote")]})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx(he,{ref:S,children:e.jsx(Z,{quote:Y,items:K,taxesData:X,settings:H,color:W,qr_invoice:E?"on":"off"})})}),e.jsxs("div",{className:"mx-auto space-y-6 print:hidden",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8 print:hidden",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 leading-tight",children:r.name}),e.jsx("p",{className:"text-base text-gray-600 mt-2 leading-relaxed max-w-3xl",children:r.description||s("No description provided")})]}),e.jsxs("div",{className:"text-right ml-6",children:[M(r.status),e.jsx("p",{className:"text-sm font-medium text-gray-700 mt-2 font-mono",children:r.quote_number})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"border-l-4 hover:shadow-lg transition-shadow bg-white rounded-lg shadow-sm border",style:{borderLeftColor:l.primary},children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Total Amount")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold leading-none",style:{color:l.primary},children:i(r.total_amount)})]}),e.jsx("div",{className:"rounded-full p-4",style:{backgroundColor:`${l.primary}15`},children:e.jsx("svg",{className:"h-5 w-5",style:{color:l.primary},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})}),e.jsx("div",{className:"border-l-4 hover:shadow-lg transition-shadow bg-white rounded-lg shadow-sm border",style:{borderLeftColor:l.secondary},children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Products")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold leading-none",style:{color:l.secondary},children:((P=r.products)==null?void 0:P.length)||0})]}),e.jsx("div",{className:"rounded-full p-4",style:{backgroundColor:`${l.secondary}15`},children:e.jsx("svg",{className:"h-5 w-5",style:{color:l.secondary},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})})}),e.jsx("div",{className:"border-l-4 border-l-orange-500 hover:shadow-lg transition-shadow bg-white rounded-lg shadow-sm border",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Valid Until")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-orange-600 leading-tight",children:h(r.valid_until)})]}),e.jsx("div",{className:"rounded-full bg-orange-100 p-4",children:e.jsx("svg",{className:"h-5 w-5 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})}),e.jsx("div",{className:"border-l-4 border-l-purple-500 hover:shadow-lg transition-shadow bg-white rounded-lg shadow-sm border",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Created")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-purple-600 leading-tight",children:h(r.created_at)})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-4",children:e.jsx(Q,{className:"h-5 w-5 text-purple-600"})})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:s("Quote Information")})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Quote Number")}),e.jsx("p",{className:"text-sm mt-1",children:r.quote_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Status")}),e.jsx("div",{className:"mt-1",children:M(r.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created By")}),e.jsx("p",{className:"text-sm mt-1",children:((A=r.creator)==null?void 0:A.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Assigned To")}),e.jsx("p",{className:"text-sm mt-1",children:(($=r.assignedUser)==null?void 0:$.name)||s("Unassigned")})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Valid Until")}),e.jsx("p",{className:"text-sm mt-1",children:h(r.valid_until)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Subtotal")}),e.jsx("p",{className:"text-sm mt-1",children:i(r.subtotal)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Discount Amount")}),e.jsxs("p",{className:"text-sm mt-1",children:["-",i(j)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Total Tax")}),e.jsx("p",{className:"text-sm mt-1",children:i(u)})]})]})]})})]}),(r.account||r.contact||r.shipping_provider_type)&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4",children:e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx("svg",{className:"h-5 w-5 mr-3 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s("Related Data")]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.account&&e.jsxs("div",{className:"p-6 bg-green-50 rounded-xl border border-green-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Account")}),e.jsx("p",{className:"text-base font-medium text-green-700",children:r.account.name})]}),r.contact&&e.jsxs("div",{className:"p-6 bg-purple-50 rounded-xl border border-purple-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Contact")}),e.jsx("p",{className:"text-base font-medium text-purple-700",children:r.contact.name})]}),r.shipping_provider_type&&e.jsxs("div",{className:"p-6 bg-orange-50 rounded-xl border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Shipping Provider")}),e.jsx("p",{className:"text-base font-medium text-orange-700",children:r.shipping_provider_type.name})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4",children:e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx("svg",{className:"h-5 w-5 mr-3 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s("Billing & Shipping Details")]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Billing Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),e.jsx("p",{className:"text-sm mt-1",children:((B=r.billing_contact)==null?void 0:B.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:r.billing_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:r.billing_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:r.billing_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:r.billing_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:r.billing_country||s("-")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Shipping Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),e.jsx("p",{className:"text-sm mt-1",children:((I=r.shipping_contact)==null?void 0:I.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:r.shipping_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:r.shipping_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:r.shipping_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:r.shipping_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:r.shipping_country||s("-")})]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4",children:e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx("svg",{className:"h-5 w-5 mr-3 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),s("Products")]})}),e.jsx("div",{className:"p-0",children:r.products&&r.products.length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:l.primary},children:[e.jsx("th",{className:"text-base font-bold text-white py-4 px-6 w-1/3 text-left",children:s("Product")}),e.jsx("th",{className:"text-right text-base font-bold text-white py-4 px-4",children:s("Quantity")}),e.jsx("th",{className:"text-right text-base font-bold text-white py-4 px-4",children:s("Unit Price")}),e.jsx("th",{className:"text-right text-base font-bold text-white py-4 px-4",children:s("Discount")}),e.jsx("th",{className:"text-right text-base font-bold text-white py-4 px-4",children:s("Tax")}),e.jsx("th",{className:"text-right text-base font-bold text-white py-4 px-4 w-1/6",children:s("Total")})]})}),e.jsxs("tbody",{children:[r.products.map((t,a)=>{const n=Number(t.pivot.total_price)||0,d=Number(t.pivot.discount_amount)||0,o=n-d;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"font-semibold text-base text-gray-900 py-4 px-6",children:t.name}),e.jsx("td",{className:"text-right text-base font-medium py-4 px-4",children:t.pivot.quantity}),e.jsx("td",{className:"text-right text-base font-semibold py-4 px-4",children:i(t.pivot.unit_price)}),e.jsx("td",{className:"text-right py-4 px-4",children:t.pivot.discount_type&&t.pivot.discount_type!=="none"&&t.pivot.discount_value>0?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.pivot.discount_type==="percentage"?`${Number(t.pivot.discount_value)}%`:i(Number(t.pivot.discount_value))}),e.jsxs("div",{className:"text-red-600 font-bold",children:["(-",i(d),")"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:"-"})}),e.jsx("td",{className:"text-right text-base py-4 px-4",children:t.tax?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.tax.name}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["(",t.tax.rate,"%)"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:s("No Tax")})}),e.jsx("td",{className:"text-right font-bold text-base py-4 px-4",children:d>0?e.jsxs("div",{children:[e.jsx("div",{className:"line-through text-gray-400 text-sm font-medium",children:i(n)}),e.jsx("div",{className:"text-green-600 font-semibold",children:i(o)})]}):e.jsx("span",{className:"text-green-600 font-semibold",children:i(n)})})]},a)}),e.jsxs("tr",{style:{backgroundColor:`${l.primary}10`},children:[e.jsxs("td",{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:[s("Total Discount"),":"]}),e.jsxs("td",{className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:["-",i(j)]})]}),e.jsxs("tr",{style:{backgroundColor:`${l.primary}10`},children:[e.jsxs("td",{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:[s("Subtotal"),":"]}),e.jsx("td",{className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:i(D)})]}),e.jsxs("tr",{style:{backgroundColor:`${l.primary}10`},children:[e.jsxs("td",{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:[s("Total Tax"),":"]}),e.jsx("td",{className:"text-right font-semibold text-base py-3 px-4",style:{color:l.primary},children:i(u)})]}),e.jsxs("tr",{className:"border-t-2",style:{backgroundColor:`${l.primary}15`,borderTopColor:l.primary},children:[e.jsxs("td",{colSpan:5,className:"text-right font-bold text-lg py-4 px-4",style:{color:l.primary},children:[s("Grand Total"),":"]}),e.jsx("td",{className:"text-right py-4 px-4",children:e.jsx("span",{className:"font-bold text-xl",style:{color:l.primary},children:i(L)})})]})]})]})}):e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx("svg",{className:"h-16 w-16 mx-auto mb-6 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("p",{className:"text-lg font-medium",children:s("No products added to this quote")})]})})]}),r.activities&&r.activities.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"bg-gray-50 border-b px-6 py-4",children:e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx(Q,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Activity Stream")]})}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:r.activities.map((t,a)=>{var d,o,c,p;const n=x=>{const b=new Date(x),g=Math.floor((new Date().getTime()-b.getTime())/(1e3*60));if(g<1)return s("Just now");if(g<60)return s("{{count}} {{unit}} ago",{count:g,unit:s(g===1?"minute":"minutes")});const f=Math.floor(g/60);if(f<24)return s("{{count}} {{unit}} ago",{count:f,unit:s(f===1?"hour":"hours")});const w=Math.floor(f/24);return w<7?s("{{count}} {{unit}} ago",{count:w,unit:s(w===1?"day":"days")}):b.toLocaleDateString()};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((d=t.user)==null?void 0:d.avatar)||"/images/avatar/default.png",alt:((o=t.user)==null?void 0:o.name)||"User",className:"w-full h-full object-cover",onError:x=>{var y;const b=x.target;b.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((y=t.user)==null?void 0:y.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),a<r.activities.length-1&&e.jsx("div",{className:"w-px h-8 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:((c=t.user)==null?void 0:c.name)||s("System")}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n(t.created_at)})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",dangerouslySetInnerHTML:{__html:t.title.replace(new RegExp(`^(${((p=t.user)==null?void 0:p.name)||"System"})`,"g"),'<span class="font-bold text-sm">$1</span>')}}),e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20",children:t.activity_type.charAt(0).toUpperCase()+t.activity_type.slice(1)})]}),t.description&&e.jsx("div",{className:"mb-2",children:t.field_changed==="status"||t.field_changed==="name"||t.field_changed==="assigned_to"||t.description.includes("into")?e.jsx("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"text-sm text-gray-600",children:t.description})})]})]})]},t.id||a)})})})]})]})]})})]})}export{Ue as default};
