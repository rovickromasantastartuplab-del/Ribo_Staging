import{r as d,j as e}from"./ui-C-VW1P-5.js";import{u as E,ak as I,L as m,I as j,B as S,a6 as N,S as b,t as c}from"./app-BQKKzqf3.js";import{S as F}from"./switch-T0u5R7d_.js";import{R as G}from"./refresh-cw-BnxOCyDc.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";function O({settings:i={}}){const{t:s}=E(),[p,g]=d.useState(!1),[u,C]=d.useState(!1),[n,f]=d.useState({googleCalendarEnabled:i.googleCalendarEnabled==="1"||i.googleCalendarEnabled==="true",googleCalendarId:i.googleCalendarId||""}),[r,h]=d.useState(null),y=o=>{o.preventDefault(),g(!0);const a=new FormData;a.append("googleCalendarEnabled",n.googleCalendarEnabled?"1":"0"),a.append("googleCalendarId",n.googleCalendarId),r&&a.append("googleCalendarJson",r),b.post(route("settings.google-calendar.update"),a,{preserveScroll:!0,onSuccess:l=>{var x;g(!1),h(null);const t=(x=l.props.flash)==null?void 0:x.success;t&&c.success(t)},onError:l=>{g(!1);const t=l.error||Object.values(l).join(", ")||s("Failed to update Google Calendar settings");c.error(t)}})},v=()=>{C(!0),b.post(route("settings.google-calendar.sync"),{},{preserveScroll:!0,onSuccess:o=>{var l;const a=(l=o.props.flash)==null?void 0:l.success;a&&c.success(a)},onError:o=>{const a=o.error||Object.values(o).join(", ")||s("Sync failed");c.error(a)},onFinish:()=>{C(!1)}})};return e.jsx(I,{title:s("Google Calendar Settings"),description:s("Configure Google Calendar integration for appointment synchronization"),action:e.jsxs(S,{type:"submit",form:"google-calendar-form",disabled:p,size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),s(p?"Saving...":"Save Changes")]}),children:e.jsxs("form",{id:"google-calendar-form",onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{htmlFor:"googleCalendarEnabled",children:s("Enable Google Calendar")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("Enable Google Calendar integration for appointments")})]}),e.jsx(F,{id:"googleCalendarEnabled",checked:n.googleCalendarEnabled,onCheckedChange:o=>f(a=>({...a,googleCalendarEnabled:o}))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"googleCalendarId",children:s("Google Calendar ID")}),e.jsx(j,{id:"googleCalendarId",type:"text",value:n.googleCalendarId,onChange:o=>f(a=>({...a,googleCalendarId:o.target.value})),placeholder:s("Enter your Google Calendar ID or 'primary'"),disabled:!n.googleCalendarEnabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"googleCalendarJson",children:s("Service Account JSON File")}),e.jsx(j,{id:"googleCalendarJson",type:"file",accept:".json",onChange:o=>{var a;return h(((a=o.target.files)==null?void 0:a[0])||null)},disabled:!n.googleCalendarEnabled}),r&&e.jsxs("p",{className:"text-sm text-green-600",children:[s("Selected file"),": ",r.name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("Upload your Google service account JSON credentials")})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(S,{type:"button",variant:"outline",onClick:v,disabled:!n.googleCalendarEnabled||u,children:[e.jsx(G,{className:`mr-2 h-4 w-4 ${u?"animate-spin":""}`}),s(u?"Syncing...":"Test Sync")]})})]})]})})}export{O as default};
