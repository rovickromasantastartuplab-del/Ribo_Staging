import{r as h,j as e}from"./ui-C-VW1P-5.js";import{P as me}from"./page-template-CDM26U5Q.js";import{u as xe,K as he,C as m,c as x,a as y,b as w,$ as _,B as p,T as W,I as Y,S as A,d as pe,X as ue}from"./app-BQKKzqf3.js";import{T as ge,a as je,b as g,c as j,d as be,e as i}from"./table-Cm3ifs76.js";import{C as Z}from"./CrudDeleteModal-Bjo4FQXD.js";import{D as Ne}from"./dollar-sign-BO1aYhXH.js";import{P as B}from"./package-BHhWwbAI.js";import{C as E}from"./calendar-BZ7v_rN9.js";import{T as fe}from"./truck--5x8h15q.js";import{B as ve}from"./building-DYqVTalU.js";import{U as ye}from"./user-B-NTs7Zv.js";import{E as we}from"./eye-off-Dy-fpfrJ.js";import{S as _e}from"./send-Ci4mpdkr.js";import{S as Ce}from"./square-pen-DbvvCy40.js";import{A as Se}from"./arrow-left-CYc20UlY.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./mail-DI9tSiFs.js";import"./users-CrY8npWB.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";function cs(){var F,G,J,K,X,V;const{t:s}=xe(),{salesOrder:a,streamItems:u,auth:l}=he().props,$=((F=l==null?void 0:l.user)==null?void 0:F.type)==="company",[O,ee]=h.useState(!0),[se,U]=h.useState(!1),[te,I]=h.useState(!1),[ae,re]=h.useState(null),[C,H]=h.useState(""),[le,P]=h.useState(null),[R,q]=h.useState(""),ie=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Sales Orders"),href:route("sales-orders.index")},{title:a.order_number}],L=t=>{const r={draft:"bg-gray-50 text-gray-600 ring-gray-500/10",confirmed:"bg-blue-50 text-blue-700 ring-blue-700/10",processing:"bg-yellow-50 text-yellow-800 ring-yellow-600/20",shipped:"bg-purple-50 text-purple-700 ring-purple-700/10",delivered:"bg-green-50 text-green-700 ring-green-600/20",cancelled:"bg-red-50 text-red-700 ring-red-600/10"};return e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${r[t]||r.draft}`,children:s((t==null?void 0:t.charAt(0).toUpperCase())+(t==null?void 0:t.slice(1)))||s("Draft")})},n=t=>{var r;return((r=window.appSettings)==null?void 0:r.formatCurrency(Number(t||0)))||`$${Number(t||0).toFixed(2)}`},S=t=>{var r;return t?((r=window.appSettings)==null?void 0:r.formatDateTime(t,!1))||new Date(t).toLocaleDateString():s("-")},ne=()=>{var o;let t=0,r=0,d=0;return(o=a.products)==null||o.forEach(c=>{const T=Number(c.pivot.total_price)||0,b=Number(c.pivot.discount_amount)||0,N=T-b;t+=N,d+=b,c.tax&&(r+=N*Number(c.tax.rate)/100)}),{subtotal:t,totalTax:r,totalDiscount:d,grandTotal:t+r}},{subtotal:de,totalTax:oe,totalDiscount:Q,grandTotal:ce}=ne();return e.jsxs(me,{title:a.order_number,breadcrumbs:ie,actions:[{label:s("Back to Sales Orders"),icon:e.jsx(Se,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>window.history.back()}],children:[e.jsxs("div",{className:"mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-bold",children:a.name}),e.jsx("p",{className:"text-base text-gray-600 mt-2 leading-relaxed max-w-3xl",children:a.description||s("No description provided")})]}),e.jsxs("div",{className:"text-right ml-6",children:[L(a.status),e.jsx("p",{className:"text-sm font-medium text-gray-700 mt-2 font-mono",children:a.order_number})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(m,{className:"border-l-4 border-l-green-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Total Amount")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold text-green-600 leading-none",children:n(a.total_amount)})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-4",children:e.jsx(Ne,{className:"h-5 w-5 text-green-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-blue-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Products")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold text-blue-600 leading-none",children:((G=a.products)==null?void 0:G.length)||0})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-4",children:e.jsx(B,{className:"h-5 w-5 text-blue-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-orange-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Order Date")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-orange-600 leading-tight",children:S(a.order_date)})]}),e.jsx("div",{className:"rounded-full bg-orange-100 p-4",children:e.jsx(E,{className:"h-5 w-5 text-orange-600"})})]})})}),e.jsx(m,{className:"border-l-4 border-l-purple-500",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:s("Delivery Date")}),e.jsx("h3",{className:"mt-2 text-lg font-bold text-orange-600 leading-tight",children:S(a.delivery_date)})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-4",children:e.jsx(fe,{className:"h-5 w-5 text-purple-600"})})]})})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsx(w,{className:"text-lg font-semibold",children:s("Sales Order Information")})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Order Number")}),e.jsx("p",{className:"text-sm mt-1",children:a.order_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Status")}),e.jsx("div",{className:"mt-1",children:L(a.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created By")}),e.jsx("p",{className:"text-sm mt-1",children:((J=a.creator)==null?void 0:J.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Assigned To")}),e.jsx("p",{className:"text-sm mt-1",children:((K=a.assignedUser)==null?void 0:K.name)||s("Unassigned")})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Subtotal")}),e.jsx("p",{className:"text-sm mt-1",children:n(a.subtotal)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Discount Amount")}),e.jsxs("p",{className:"text-sm mt-1",children:["-",n(Q)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created At")}),e.jsx("p",{className:"text-sm mt-1",children:S(a.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Updated At")}),e.jsx("p",{className:"text-sm mt-1",children:S(a.updated_at)})]})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(ve,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Related Data")]})}),e.jsx(x,{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.account&&e.jsxs("div",{className:"p-6 bg-green-50 rounded-xl border border-green-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Account")}),e.jsx(_,{href:route("accounts.show",a.account.id),className:"text-base font-medium text-green-700 hover:text-green-900 hover:underline transition-colors",children:a.account.name})]}),a.quote&&e.jsxs("div",{className:"p-6 bg-purple-50 rounded-xl border border-purple-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Quote")}),e.jsx(_,{href:route("quotes.show",a.quote.id),className:"text-base font-medium text-purple-700 hover:text-purple-900 hover:underline transition-colors",children:a.quote.name})]}),a.shipping_provider_type&&e.jsxs("div",{className:"p-6 bg-orange-50 rounded-xl border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:s("Shipping Provider")}),e.jsx(_,{href:route("shipping-provider-types.show",a.shipping_provider_type.id),className:"text-base font-medium text-orange-700 hover:text-orange-900 hover:underline transition-colors",children:a.shipping_provider_type.name})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(ye,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Billing & Shipping Details")]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Billing Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),a.billing_contact?e.jsx(_,{href:route("contacts.show",a.billing_contact.id),className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline mt-1 transition-colors",children:a.billing_contact.name}):e.jsx("p",{className:"text-sm mt-1",children:s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:a.billing_country||s("-")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200",children:s("Shipping Details")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Contact")}),a.shipping_contact?e.jsx(_,{href:route("contacts.show",a.shipping_contact.id),className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline mt-1 transition-colors",children:a.shipping_contact.name}):e.jsx("p",{className:"text-sm mt-1",children:s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_address||s("-")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("City")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_city||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("State")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_state||s("-")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Postal Code")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_postal_code||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Country")}),e.jsx("p",{className:"text-sm mt-1",children:a.shipping_country||s("-")})]})]})]})]})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(B,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Products")]})}),e.jsx(x,{className:"p-0",children:a.products&&a.products.length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsxs(ge,{children:[e.jsx(je,{children:e.jsxs(g,{className:"bg-gray-100",children:[e.jsx(j,{className:"text-base font-bold text-gray-900 py-4 px-6 w-1/3",children:s("Product")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Quantity")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Unit Price")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Discount")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4",children:s("Tax")}),e.jsx(j,{className:"text-right text-base font-bold text-gray-900 py-4 px-4 w-1/6",children:s("Total")})]})}),e.jsxs(be,{children:[a.products.map((t,r)=>{const d=Number(t.pivot.total_price)||0,o=Number(t.pivot.discount_amount)||0,c=d-o;return e.jsxs(g,{className:"border-b hover:bg-gray-50",children:[e.jsx(i,{className:"font-semibold text-base text-gray-900 py-4 px-6",children:t.name}),e.jsx(i,{className:"text-right text-base font-medium py-4 px-4",children:t.pivot.quantity}),e.jsx(i,{className:"text-right text-base font-semibold py-4 px-4",children:n(t.pivot.unit_price)}),e.jsx(i,{className:"text-right py-4 px-4",children:t.pivot.discount_type&&t.pivot.discount_type!=="none"&&t.pivot.discount_value>0?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.pivot.discount_type==="percentage"?`${Number(t.pivot.discount_value)}%`:n(Number(t.pivot.discount_value))}),e.jsxs("div",{className:"text-red-600 font-bold",children:["(-",n(o),")"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:s("No Discount")})}),e.jsx(i,{className:"text-right text-base py-4 px-4",children:t.tax?e.jsxs("div",{className:"text-base",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.tax.name}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["(",t.tax.rate,"%)"]})]}):e.jsx("span",{className:"text-gray-500 font-medium",children:s("No Tax")})}),e.jsx(i,{className:"text-right font-bold text-base py-4 px-4",children:o>0?e.jsxs("div",{children:[e.jsx("div",{className:"line-through text-gray-400 text-sm font-medium",children:n(d)}),e.jsx("div",{className:"text-green-600 font-semibold",children:n(c)})]}):e.jsx("span",{className:"text-green-600 font-semibold",children:n(d)})})]},r)}),e.jsxs(g,{className:"bg-gray-50 border-t-2",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Total Discount"),":"]}),e.jsxs(i,{className:"text-right font-semibold text-base text-red-600 py-3 px-4",children:["-",n(Q)]})]}),e.jsxs(g,{className:"bg-gray-50",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Subtotal"),":"]}),e.jsx(i,{className:"text-right font-semibold text-base py-3 px-4",children:n(de)})]}),e.jsxs(g,{className:"bg-gray-50",children:[e.jsxs(i,{colSpan:5,className:"text-right font-semibold text-base py-3 px-4",children:[s("Total Tax"),":"]}),e.jsx(i,{className:"text-right font-semibold text-base py-3 px-4",children:n(oe)})]}),e.jsxs(g,{className:"bg-green-50 border-t-2",children:[e.jsxs(i,{colSpan:5,className:"text-right font-bold text-lg py-4 px-4",children:[s("Grand Total"),":"]}),e.jsx(i,{className:"text-right py-4 px-4",children:e.jsx("span",{className:"text-green-600 font-bold text-xl",children:n(ce)})})]})]})]})}):e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(B,{className:"h-16 w-16 mx-auto mb-6 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:s("No products added to this sales order")})]})})]}),e.jsxs(m,{className:"shadow-sm",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(w,{className:"flex items-center text-lg font-semibold",children:[e.jsx(E,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Activity Stream")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>ee(!O),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),s(O?"Hide":"Show")]}),u&&u.length>0&&$&&e.jsxs(p,{variant:"destructive",size:"sm",onClick:()=>I(!0),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),s("Delete Stream")]})]})]})}),O&&e.jsxs(x,{className:"p-0",children:[e.jsx("div",{className:"sticky top-0 bg-white z-10 p-6 pb-6 border-b mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((X=l==null?void 0:l.user)==null?void 0:X.avatar)||"/images/avatar/default.png",alt:((V=l==null?void 0:l.user)==null?void 0:V.name)||"User",className:"w-full h-full object-cover",onError:t=>{var d;const r=t.target;r.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((d=l==null?void 0:l.user)==null?void 0:d.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),e.jsx("div",{className:"flex-1",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),C.trim()&&A.post(route("sales-orders.comments.store",a.id),{comment:C},{preserveScroll:!0,onSuccess:()=>H("")})},children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{placeholder:s("Add a comment..."),value:C,onChange:t=>H(t.target.value),className:"flex-1"}),e.jsx(p,{type:"submit",size:"sm",disabled:!C.trim(),children:e.jsx(_e,{className:"h-4 w-4"})})]})})})]})}),e.jsx("div",{className:"p-6 pt-0 max-h-96 overflow-y-auto",children:u&&u.length>0?e.jsx("div",{className:"space-y-2",children:u.map((t,r)=>{var o,c,T,b,N;const d=f=>{const D=new Date(f),v=Math.floor((new Date().getTime()-D.getTime())/(1e3*60));if(v<1)return s("Just now");if(v<60)return s("{{count}} {{unit}} ago",{count:v,unit:s(v===1?"minute":"minutes")});const k=Math.floor(v/60);if(k<24)return s("{{count}} {{unit}} ago",{count:k,unit:s(k===1?"hour":"hours")});const z=Math.floor(k/24);return z<7?s("{{count}} {{unit}} ago",{count:z,unit:s(z===1?"day":"days")}):D.toLocaleDateString()};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((o=t.user)==null?void 0:o.avatar)||"/images/avatar/default.png",alt:((c=t.user)==null?void 0:c.name)||"User",className:"w-full h-full object-cover",onError:f=>{var M;const D=f.target;D.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((M=t.user)==null?void 0:M.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),r<u.length-1&&e.jsx("div",{className:"w-px h-8 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:((T=t.user)==null?void 0:T.name)||s("System")}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:d(t.created_at)})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",dangerouslySetInnerHTML:{__html:t.title.replace(new RegExp(`^(${((b=t.user)==null?void 0:b.name)||"System"})`,"g"),'<span class="font-bold text-sm">$1</span>')}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20",children:t.activity_type.charAt(0).toUpperCase()+t.activity_type.slice(1)}),$&&e.jsx(p,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{re(t),U(!0)},children:e.jsx(W,{className:"h-3 w-3"})})]})]}),t.description&&e.jsx("div",{className:"mb-2",children:t.field_changed==="status"||t.field_changed==="name"||t.field_changed==="assigned_to"||t.description.includes("into")?e.jsx("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:t.description}}):t.activity_type==="comment"?e.jsx("div",{children:le===t.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{value:R,onChange:f=>q(f.target.value),className:"flex-1"}),e.jsx(p,{size:"sm",onClick:()=>{A.put(route("sales-orders.comments.update-activity",{salesOrder:a.id,activity:t.id}),{comment:R},{preserveScroll:!0}),P(null)},children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>P(null),children:e.jsx(ue,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:t.description}),t.user_id===((N=l==null?void 0:l.user)==null?void 0:N.id)&&e.jsx(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:()=>{P(t.id),q(t.description)},children:e.jsx(Ce,{className:"h-3 w-3"})})]})}):e.jsx("p",{className:"text-sm text-gray-600",children:t.description})})]})]})]},t.id||r)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm",children:s("No activities found")})]})})]})]})]}),e.jsx(Z,{isOpen:se,onClose:()=>U(!1),onConfirm:()=>{A.delete(route("sales-orders.delete-activity",{salesOrder:a.id,activity:ae.id}),{preserveScroll:!0}),U(!1)},itemName:s("this activity"),entityName:s("activity")}),e.jsx(Z,{isOpen:te,onClose:()=>I(!1),onConfirm:()=>{A.delete(route("sales-orders.delete-activities",a.id),{preserveScroll:!0}),I(!1)},itemName:s("all activities for {{name}}",{name:a.name}),entityName:s("activities")})]})}export{cs as default};
