import{j as t}from"./ui-C-VW1P-5.js";import{Q as F}from"./QRCodeComponent-CRXf3pHS.js";import{u as I,e as M}from"./app-BQKKzqf3.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";function K({invoice:s,items:a,taxesData:W,settings:k,color:o,qr_invoice:D,qrCodeSvg:Q,styles:h}){var j,y,m,b,f,u,w,A,C,N,_,T,B,$,q,H,S;const{t:l}=I(),{logoDark:z}=M(),L=o==="ffffff"||o==="fbdd03"||o==="c1d82f"||o==="46de98"||o==="40c7d0"||o==="fac168"?"#000000":"#ffffff",x=o==="ffffff"?"#000000":`#${o}`,g=((j=s.payments)==null?void 0:j.reduce((r,i)=>{const c=Number(i.amount)||0;return i.status==="completed"?r+c:r},0))||0,P=Math.max(0,(Number(s.total_amount)||0)-g),n=r=>{var i;return typeof r=="string"&&r.startsWith("<")?r:((i=window.appSettings)==null?void 0:i.formatCurrency(Number(r)))||`$${Number(r)}`},d=(r,i="")=>typeof r=="string"&&r.startsWith("<")?r:r||i,e={root:{fontFamily:"Lato, sans-serif",margin:0,padding:0,boxSizing:"border-box"},invoicePreviewMain:{width:"100%",margin:"0 auto",background:"#ffff",boxShadow:"0 0 10px #ddd",...h==null?void 0:h.invoicePreviewMain},invoiceHeader:{padding:"15px 30px"},headerTable:{width:"100%",borderCollapse:"collapse"},headerCell:{padding:"15px 30px",verticalAlign:"top"},invoiceBody:{padding:"30px 25px 30px 25px"},table:{width:"100%",borderCollapse:"collapse",marginTop:"30px"},tableHeader:{background:`#${o}`,color:L},th:{padding:"0.75rem",textAlign:"left",fontSize:"13px",fontWeight:"600"},td:{padding:"0.75rem",textAlign:"left",borderTop:`1px solid ${x}`},qrCode:{maxWidth:"114px",maxHeight:"114px",marginLeft:"0",marginRight:"0",marginTop:"15px",background:"#ffffff"},noSpace:{padding:0}};return t.jsx("div",{style:e.root,children:t.jsxs("div",{className:"invoice-preview-main",id:"boxes",style:e.invoicePreviewMain,children:[t.jsxs("div",{className:"invoice-header",style:e.invoiceHeader,children:[t.jsx("table",{className:"vertical-align-top",style:e.headerTable,children:t.jsx("tbody",{children:t.jsxs("tr",{children:[t.jsxs("td",{style:e.headerCell,children:[t.jsx("h3",{style:{textTransform:"uppercase",fontSize:"20px",fontWeight:"bold"},children:l("INVOICE")}),t.jsx("div",{className:"view-qrcode",style:{...e.qrCode,marginLeft:"0",marginRight:"0"},children:D==="on"&&t.jsx(F,{text:window.location.href,size:114})})]}),t.jsx("td",{className:"text-right",style:{...e.headerCell,textAlign:"right"},children:t.jsx("img",{src:k.invoiceLogo||z,style:{maxWidth:"150px",maxHeight:"150px"},alt:"Logo"})})]})})}),t.jsx("table",{className:"vertical-align-top",style:e.headerTable,children:t.jsx("tbody",{children:t.jsxs("tr",{children:[t.jsxs("td",{style:e.headerCell,children:[t.jsxs("strong",{children:[l("From"),":"]}),t.jsxs("p",{style:{margin:"10px 0",lineHeight:"1.5"},children:[d((y=s.creator)==null?void 0:y.name)&&t.jsxs(t.Fragment,{children:[d(s.creator.name),t.jsx("br",{})]}),d((m=s.creator)==null?void 0:m.email)&&t.jsx(t.Fragment,{children:d(s.creator.email)})]})]}),t.jsx("td",{style:e.headerCell,children:t.jsx("table",{className:"no-space",style:{width:"100%"},children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"text-right",style:{...e.noSpace}}),t.jsxs("td",{className:"text-right",style:{...e.noSpace,textAlign:"right"},children:[l("Number"),": ",d(s.invoice_number)]})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e.noSpace}),t.jsxs("td",{className:"text-right",style:{...e.noSpace,textAlign:"right"},children:[l("Invoice Date"),": ",d(s.invoice_date),t.jsx("br",{}),l("Due Date"),": ",d(s.due_date)]})]})]})})})]})})})]}),t.jsxs("div",{style:e.invoiceBody,children:[t.jsx("table",{style:{width:"100%"},children:t.jsx("tbody",{children:t.jsxs("tr",{children:[t.jsxs("td",{style:{verticalAlign:"top"},children:[t.jsxs("strong",{style:{marginBottom:"10px",display:"block"},children:[l("Bill To"),":"]}),t.jsxs("p",{style:{margin:0,lineHeight:"1.5"},children:[d(((b=s.account)==null?void 0:b.name)||((f=s.contact)==null?void 0:f.name)),t.jsx("br",{}),d(((u=s.account)==null?void 0:u.email)||((w=s.contact)==null?void 0:w.email)),t.jsx("br",{}),d(((A=s.account)==null?void 0:A.phone)||((C=s.contact)==null?void 0:C.phone)),t.jsx("br",{}),d(s.billing_address),t.jsx("br",{}),d(s.billing_postal_code),t.jsx("br",{}),d(s.billing_city)," ",d(s.billing_state)," ",d(s.billing_country)]})]}),t.jsxs("td",{style:{verticalAlign:"top",textAlign:"right"},children:[t.jsxs("strong",{style:{marginBottom:"10px",display:"block"},children:[l("Company"),":"]}),t.jsxs("p",{style:{margin:0,lineHeight:"1.5"},children:[d((N=s.creator)==null?void 0:N.name),t.jsx("br",{}),d((_=s.creator)==null?void 0:_.email),t.jsx("br",{})]})]})]})})}),t.jsx("table",{style:e.table,children:t.jsxs("tbody",{children:[t.jsxs("tr",{style:e.tableHeader,children:[t.jsx("th",{style:e.th,children:l("Item")}),t.jsx("th",{style:e.th,children:l("Quantity")}),t.jsx("th",{style:e.th,children:l("Rate")}),t.jsxs("th",{style:e.th,children:[l("Tax")," (%)"]}),t.jsx("th",{style:e.th,children:l("Discount")}),t.jsxs("th",{style:e.th,children:[l("Price")," ",t.jsx("small",{style:{display:"block",fontSize:"12px"},children:l("before tax & discount")})]})]}),a.map((r,i)=>{var c;return t.jsxs("tr",{children:[t.jsx("td",{style:e.td,children:d(r.name)}),t.jsx("td",{style:e.td,children:d(r.quantity)}),t.jsx("td",{style:e.td,children:n(r.price)}),t.jsx("td",{style:e.td,children:(c=r.itemTax)==null?void 0:c.map((p,R)=>t.jsxs("span",{children:[p.name," (",p.rate,")",t.jsx("br",{}),p.price]},R))}),t.jsx("td",{style:e.td,children:r.discount?n(r.discount):"-"}),t.jsx("td",{style:e.td,children:n(typeof r.price=="string"&&r.price.startsWith("<")?r.price:Number(r.price)*Number(r.quantity))})]},i)}),t.jsxs("tr",{children:[t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:l("Total")}),t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:typeof((T=a[0])==null?void 0:T.quantity)=="string"&&((B=a[0])!=null&&B.quantity.startsWith("<"))?d(($=a[0])==null?void 0:$.quantity):a.reduce((r,i)=>r+Number(i.quantity),0)}),t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:n(typeof((q=a[0])==null?void 0:q.price)=="string"&&((H=a[0])!=null&&H.price.startsWith("<"))?(S=a[0])==null?void 0:S.price:a.reduce((r,i)=>r+Number(i.price),0))}),t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:n(s.total_tax||0)}),t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:n(s.total_discount||0)}),t.jsx("td",{style:{...e.td,borderBottom:`1px solid ${x}`},children:n(s.sub_total||0)})]}),t.jsx("tr",{children:t.jsx("td",{colSpan:6,style:{border:"none",padding:"0"},children:t.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:t.jsxs("tbody",{children:[s.total_discount>0&&t.jsxs("tr",{children:[t.jsxs("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right"},children:[l("Discount"),":"]}),t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right",width:"146px"},children:n(s.total_discount)})]}),Object.entries(W||{}).map(([r,i])=>t.jsxs("tr",{children:[t.jsxs("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right"},children:[r,":"]}),t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right",width:"146px"},children:n(i)})]},r)),t.jsxs("tr",{children:[t.jsxs("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right"},children:[l("Paid"),":"]}),t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right",width:"146px"},children:n(g)})]}),t.jsxs("tr",{children:[t.jsxs("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right"},children:[l("Due"),":"]}),t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right",width:"146px"},children:n(P)})]}),t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right"},children:t.jsxs("strong",{children:[l("Total"),":"]})}),t.jsx("td",{style:{padding:"0.75rem 0 0 0",textAlign:"right",width:"146px"},children:t.jsx("strong",{children:n(s.total_amount||0)})})]})]})})})})]})})]})]})})}export{K as default};
