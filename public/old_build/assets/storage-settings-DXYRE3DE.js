import{r as w,j as e}from"./ui-C-VW1P-5.js";import{u as R,ak as _,B as x,a6 as E,S as T,t as u,L as c,I as t,a7 as B}from"./app-BQKKzqf3.js";import{T as M,a as W,b,c as j}from"./tabs-9Vil1K0K.js";import{C as D}from"./checkbox-mSB0gHip.js";import{H as I}from"./hard-drive-CBRsIzd1.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";import"./index-IS-ASe-l.js";function J({settings:r={}}){const{t:l}=R(),y={"3dmf":"3dmf","3dm":"3dm",avi:"avi",ai:"ai",bin:"bin",bmp:"bmp",cab:"cab",c:"c","c++":"c++",class:"class",css:"css",csv:"csv",cdr:"cdr",doc:"doc",dot:"dot",docx:"docx",dwg:"dwg",eps:"eps",exe:"exe",gif:"gif",gz:"gz",gtar:"gtar",flv:"flv",fh4:"fh4",fh5:"fh5",fhc:"fhc",help:"help",hlp:"hlp",html:"html",htm:"htm",ico:"ico",imap:"imap",inf:"inf",jpe:"jpe",jpeg:"jpeg",jpg:"jpg",js:"js",java:"java",latex:"latex",log:"log",m3u:"m3u",midi:"midi",mid:"mid",mov:"mov",mp4:"mp4",mp3:"mp3",mpeg:"mpeg",mpg:"mpg",mp2:"mp2",ogg:"ogg",phtml:"phtml",php:"php",pdf:"pdf",pgp:"pgp",png:"png",pps:"pps",ppt:"ppt",ppz:"ppz",pot:"pot",ps:"ps",qt:"qt",qd3d:"qd3d",qd3:"qd3",qxd:"qxd",rar:"rar",ra:"ra",ram:"ram",rm:"rm",rtf:"rtf",spr:"spr",sprite:"sprite",stream:"stream",swf:"swf",svg:"svg",sgml:"sgml",sgm:"sgm",tar:"tar",tiff:"tiff",tif:"tif",tgz:"tgz",tex:"tex",txt:"txt",vob:"vob",wav:"wav",wrl:"wrl",xla:"xla",xls:"xls",xlc:"xlc",xml:"xml",zip:"zip",json:"json",webp:"webp"},[a,m]=w.useState({storageType:r.storage_type||"local",allowedFileTypes:r.storage_file_types||"jpg,png,webp,gif",maxUploadSize:r.storage_max_upload_size||"2048",awsAccessKeyId:r.aws_access_key_id||"",awsSecretAccessKey:r.aws_secret_access_key||"",awsDefaultRegion:r.aws_default_region||"us-east-1",awsBucket:r.aws_bucket||"",awsUrl:r.aws_url||"",awsEndpoint:r.aws_endpoint||"",wasabiAccessKey:r.wasabi_access_key||"",wasabiSecretKey:r.wasabi_secret_key||"",wasabiRegion:r.wasabi_region||"us-east-1",wasabiBucket:r.wasabi_bucket||"",wasabiUrl:r.wasabi_url||"",wasabiRoot:r.wasabi_root||""}),[h,S]=w.useState(""),o=(s,i)=>{m(d=>({...d,[s]:i}))},N=(s,i)=>{const d=a.allowedFileTypes.split(",").filter(p=>p.trim());let n;i?n=[...d,s]:n=d.filter(p=>p!==s),m(p=>({...p,allowedFileTypes:n.join(",")}))},A=()=>{const s=Object.keys(y);m(i=>({...i,allowedFileTypes:s.join(",")}))},K=()=>{m(s=>({...s,allowedFileTypes:""}))},U=w.useMemo(()=>Object.keys(y).filter(s=>s.toLowerCase().includes(h.toLowerCase())),[h]),F=s=>{s.preventDefault();const i={storage_type:a.storageType,allowedFileTypes:a.allowedFileTypes,maxUploadSize:a.maxUploadSize};a.storageType==="aws_s3"&&(i.awsAccessKeyId=a.awsAccessKeyId,i.awsSecretAccessKey=a.awsSecretAccessKey,i.awsDefaultRegion=a.awsDefaultRegion,i.awsBucket=a.awsBucket,i.awsUrl=a.awsUrl,i.awsEndpoint=a.awsEndpoint),a.storageType==="wasabi"&&(i.wasabiAccessKey=a.wasabiAccessKey,i.wasabiSecretKey=a.wasabiSecretKey,i.wasabiRegion=a.wasabiRegion,i.wasabiBucket=a.wasabiBucket,i.wasabiUrl=a.wasabiUrl,i.wasabiRoot=a.wasabiRoot),T.post(route("settings.storage.update"),i,{preserveScroll:!0,onSuccess:d=>{var v,f;const n=(v=d.props.flash)==null?void 0:v.success,p=(f=d.props.flash)==null?void 0:f.error;n?u.success(n):p&&u.error(p)},onError:d=>{const n=d.error||Object.values(d).join(", ")||l("Failed to update storage settings");u.error(n)}})},g=()=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:l("Allowed File Types")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(t,{placeholder:l("Search file types..."),value:h,onChange:s=>S(s.target.value),className:"pl-10"})]}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:A,children:l("Select All")}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:K,children:l("Unselect All")})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 p-4 border rounded-md max-h-48 overflow-y-auto",children:U.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:s,checked:a.allowedFileTypes.split(",").includes(s),onCheckedChange:i=>N(s,i)}),e.jsx(c,{htmlFor:s,className:"text-sm font-normal",children:s})]},s))})]})]}),k=()=>e.jsxs("div",{className:"space-y-6",children:[g(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"maxUploadSize",children:l("Max Upload Size (KB)")}),e.jsx(t,{id:"maxUploadSize",type:"number",value:a.maxUploadSize,onChange:s=>o("maxUploadSize",s.target.value),placeholder:"2048"})]})]}),z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsAccessKeyId",children:l("AWS Access Key ID")}),e.jsx(t,{id:"awsAccessKeyId",value:a.awsAccessKeyId,onChange:s=>o("awsAccessKeyId",s.target.value),placeholder:"AKIAIOSFODNN7EXAMPLE"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsSecretAccessKey",children:l("AWS Secret Access Key")}),e.jsx(t,{id:"awsSecretAccessKey",type:"password",value:a.awsSecretAccessKey,onChange:s=>o("awsSecretAccessKey",s.target.value),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsDefaultRegion",children:l("AWS Default Region")}),e.jsx(t,{id:"awsDefaultRegion",value:a.awsDefaultRegion,onChange:s=>o("awsDefaultRegion",s.target.value),placeholder:"us-east-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsBucket",children:l("AWS Bucket")}),e.jsx(t,{id:"awsBucket",value:a.awsBucket,onChange:s=>o("awsBucket",s.target.value),placeholder:"my-bucket-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsUrl",children:l("AWS URL")}),e.jsx(t,{id:"awsUrl",value:a.awsUrl,onChange:s=>o("awsUrl",s.target.value),placeholder:"https://s3.amazonaws.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsEndpoint",children:l("AWS Endpoint")}),e.jsx(t,{id:"awsEndpoint",value:a.awsEndpoint,onChange:s=>o("awsEndpoint",s.target.value),placeholder:"https://s3.us-east-1.amazonaws.com"})]})]}),e.jsxs("div",{className:"space-y-6",children:[g(),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"awsMaxUploadSize",children:l("Max Upload Size (KB)")}),e.jsx(t,{id:"awsMaxUploadSize",type:"number",value:a.maxUploadSize,onChange:s=>o("maxUploadSize",s.target.value),placeholder:"2048"})]})})]})]}),C=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiAccessKey",children:l("Wasabi Access Key")}),e.jsx(t,{id:"wasabiAccessKey",value:a.wasabiAccessKey,onChange:s=>o("wasabiAccessKey",s.target.value),placeholder:"AKIAIOSFODNN7EXAMPLE"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiSecretKey",children:l("Wasabi Secret Key")}),e.jsx(t,{id:"wasabiSecretKey",type:"password",value:a.wasabiSecretKey,onChange:s=>o("wasabiSecretKey",s.target.value),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiRegion",children:l("Wasabi Region")}),e.jsx(t,{id:"wasabiRegion",value:a.wasabiRegion,onChange:s=>o("wasabiRegion",s.target.value),placeholder:"us-east-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiBucket",children:l("Wasabi Bucket")}),e.jsx(t,{id:"wasabiBucket",value:a.wasabiBucket,onChange:s=>o("wasabiBucket",s.target.value),placeholder:"my-wasabi-bucket"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiUrl",children:l("Wasabi URL")}),e.jsx(t,{id:"wasabiUrl",value:a.wasabiUrl,onChange:s=>o("wasabiUrl",s.target.value),placeholder:"https://s3.wasabisys.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiRoot",children:l("Wasabi Root")}),e.jsx(t,{id:"wasabiRoot",value:a.wasabiRoot,onChange:s=>o("wasabiRoot",s.target.value),placeholder:"/"})]})]}),e.jsxs("div",{className:"space-y-6",children:[g(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"wasabiMaxUploadSize",children:l("Max Upload Size (KB)")}),e.jsx(t,{id:"wasabiMaxUploadSize",type:"number",value:a.maxUploadSize,onChange:s=>o("maxUploadSize",s.target.value),placeholder:"2048"})]})]})]});return e.jsx(_,{title:l("Storage Settings"),description:l("Configure file storage settings for your application"),action:e.jsxs(x,{type:"submit",form:"storage-settings-form",size:"sm",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),l("Save Changes")]}),children:e.jsx("form",{id:"storage-settings-form",onSubmit:F,children:e.jsxs(M,{value:a.storageType,className:"w-full",onValueChange:s=>m(i=>({...i,storageType:s})),children:[e.jsxs(W,{className:"grid w-full grid-cols-3",children:[e.jsxs(b,{value:"local",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),l("Local Storage")]}),e.jsxs(b,{value:"aws_s3",className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚òÅÔ∏è"}),l("AWS S3")]}),e.jsxs(b,{value:"wasabi",className:"flex items-center gap-2",children:[e.jsx("span",{children:"üóÑÔ∏è"}),l("Wasabi")]})]}),e.jsxs(j,{value:"local",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:l("Local Storage Settings")}),k()]}),e.jsxs(j,{value:"aws_s3",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:l("AWS S3 Storage Settings")}),z()]}),e.jsxs(j,{value:"wasabi",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:l("Wasabi Storage Settings")}),C()]})]})})})}export{J as default};
