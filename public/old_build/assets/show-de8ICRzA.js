import{r as u,j as e}from"./ui-C-VW1P-5.js";import{P as pe}from"./page-template-CDM26U5Q.js";import{u as fe,K as Ne,C as i,c as d,a as o,b as x,F as be,$ as N,B as m,T as le,I as ne,S as w,d as ve,X as we}from"./app-BQKKzqf3.js";import{C as ie}from"./CrudDeleteModal-Bjo4FQXD.js";import{D as ye}from"./dollar-sign-BO1aYhXH.js";import{U as de}from"./user-B-NTs7Zv.js";import{B as me}from"./building-DYqVTalU.js";import{C as L}from"./calendar-BZ7v_rN9.js";import{M as Ce}from"./mail-DI9tSiFs.js";import{P as Se}from"./phone-B9JuG5Em.js";import{G as _e}from"./globe-BSt65iB3.js";import{M as ke}from"./map-pin-BDUdmeW2.js";import{E as De}from"./eye-off-Dy-fpfrJ.js";import{S as Me}from"./send-Ci4mpdkr.js";import{S as Le}from"./square-pen-DbvvCy40.js";import{A as ze}from"./arrow-left-CYc20UlY.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./users-CrY8npWB.js";import"./package-BHhWwbAI.js";import"./trending-up-BUQ_r1Kz.js";import"./use-favicon-D-Hpb8YY.js";import"./utils-DCj7OOX3.js";function us(){var $,V,E,H,P,R,O,W,F,G,q,J,K,X,Y,Q;const{t:s}=fe(),{lead:a,streamItems:g,auth:l,relatedAccounts:j,relatedContacts:p,meetings:n}=Ne().props;a.comments;const z=(($=l==null?void 0:l.user)==null?void 0:$.type)==="company",[y,ce]=u.useState(!0),[oe,C]=u.useState(!1),[xe,S]=u.useState(!1),[he,ue]=u.useState(null),[b,A]=u.useState(""),[ge,_]=u.useState(null),[T,I]=u.useState(""),je=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Leads"),href:route("leads.index")},{title:a.name}],U=t=>e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ${t==="active"?"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":"bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20"}`,children:s(t==="active"?"Active":"Inactive")}),B=t=>{var r;return((r=window.appSettings)==null?void 0:r.formatCurrency(Number(t||0)))||`$${Number(t||0).toFixed(2)}`};return e.jsxs(pe,{title:a.name,breadcrumbs:je,actions:[{label:s("Back to Leads"),icon:e.jsx(ze,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>window.history.back()}],children:[e.jsxs("div",{className:"mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:a.name}),e.jsx("p",{className:"text-sm mt-2",children:a.company||s("No company provided")})]}),e.jsxs("div",{className:"text-right",children:[U(a.status),a.is_converted&&e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-600/20 ml-2",children:s("Converted")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{className:"border-l-4 border-l-green-500",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:s("Lead Value")}),e.jsx("h3",{className:"text-xl font-bold text-green-600 truncate",children:B(a.value)})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 ml-3",children:e.jsx(ye,{className:"h-4 w-4 text-green-600"})})]})})}),e.jsx(i,{className:"border-l-4 border-l-blue-500",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:s("Status")}),e.jsx("h3",{className:"text-lg font-bold text-blue-600 truncate leading-tight",children:((V=a.lead_status)==null?void 0:V.name)||s("-")})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 ml-3",children:e.jsx(de,{className:"h-4 w-4 text-blue-600"})})]})})}),e.jsx(i,{className:"border-l-4 border-l-orange-500",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:s("Source")}),e.jsx("h3",{className:"text-lg font-bold text-orange-600 truncate leading-tight",children:((E=a.lead_source)==null?void 0:E.name)||s("-")})]}),e.jsx("div",{className:"rounded-full bg-orange-100 p-3 ml-3",children:e.jsx(me,{className:"h-4 w-4 text-orange-600"})})]})})}),e.jsx(i,{className:"border-l-4 border-l-purple-500",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:s("Created")}),e.jsx("h3",{className:"text-lg font-bold text-purple-600 truncate leading-tight",children:((H=window.appSettings)==null?void 0:H.formatDateTime(a.created_at,!1))||new Date(a.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 ml-3",children:e.jsx(L,{className:"h-4 w-4 text-purple-600"})})]})})})]}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:s("Lead Summary")})}),e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Lead Name")}),e.jsx("p",{className:"text-sm mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Status")}),e.jsx("div",{className:"mt-1",children:U(a.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Lead Status")}),e.jsx("p",{className:"text-sm mt-1",children:((P=a.lead_status)==null?void 0:P.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Source")}),e.jsx("p",{className:"text-sm mt-1",children:((R=a.lead_source)==null?void 0:R.name)||s("-")})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Assigned To")}),e.jsx("p",{className:"text-sm mt-1",children:((O=a.assigned_user)==null?void 0:O.name)||s("Unassigned")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created By")}),e.jsx("p",{className:"text-sm mt-1",children:((W=a.creator)==null?void 0:W.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Created At")}),e.jsx("p",{className:"text-sm mt-1",children:((F=window.appSettings)==null?void 0:F.formatDateTime(a.created_at,!1))||new Date(a.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Updated At")}),e.jsx("p",{className:"text-sm mt-1",children:((G=window.appSettings)==null?void 0:G.formatDateTime(a.updated_at,!1))||new Date(a.updated_at).toLocaleDateString()})]})]})]})})]}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsxs(x,{className:"flex items-center text-lg font-semibold",children:[e.jsx(de,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Contact & Address Information")]})}),e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Name")}),e.jsx("p",{className:"text-sm mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Email")}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("p",{className:"text-sm",children:a.email||s("-")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Phone")}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Se,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("p",{className:"text-sm",children:a.phone||s("-")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Company")}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(me,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("p",{className:"text-sm",children:a.company||s("-")})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Website")}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(_e,{className:"h-4 w-4 text-muted-foreground mr-2"}),a.website?e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:a.website}):e.jsx("p",{className:"text-sm",children:s("-")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Position")}),e.jsx("p",{className:"text-sm mt-1",children:a.position||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Address")}),e.jsxs("div",{className:"flex items-start mt-1",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground mr-2 mt-0.5"}),e.jsx("p",{className:"text-sm whitespace-pre-line",children:a.address||s("-")})]})]})]})]})})]}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsxs(x,{className:"flex items-center text-lg font-semibold",children:[e.jsx(be,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Additional Information")]})}),e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Industry")}),e.jsx("p",{className:"text-sm mt-1",children:((q=a.account_industry)==null?void 0:q.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Lead Value")}),e.jsx("p",{className:"text-sm mt-1",children:B(a.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Campaign")}),e.jsx("p",{className:"text-sm mt-1",children:((J=a.campaign)==null?void 0:J.name)||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Account Name")}),e.jsx("p",{className:"text-sm mt-1",children:a.account_name||s("-")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Conversion Status")}),e.jsx("div",{className:"mt-1",children:a.is_converted?e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20",children:s("Yes")}):e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20",children:s("No")})})]})]}),a.notes&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s("Notes")}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:a.notes})})]})]})]}),a.campaign&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:s("Related Campaign")})}),e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-gray-700",children:a.campaign.name}),e.jsx("p",{className:"text-sm text-gray-600",children:((K=a.campaign.campaign_type)==null?void 0:K.name)||s("Campaign")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s("Budget"),": ",((X=window.appSettings)==null?void 0:X.formatCurrency(Number(a.campaign.budget||0)))||`$${Number(a.campaign.budget||0).toFixed(2)}`]})]}),e.jsx(N,{href:route("campaigns.show",a.campaign.id),children:e.jsx(m,{variant:"outline",size:"sm",className:"bg-white",children:s("View Campaign")})})]})})]}),(j==null?void 0:j.length)>0&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsxs(x,{className:"text-lg font-semibold",children:[s("Related Accounts")," (",j.length,")"]})}),e.jsx(d,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:j.map(t=>{var r;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-gray-700",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:((r=t.account_type)==null?void 0:r.name)||s("Account")}),e.jsx("p",{className:"text-sm text-gray-500",children:t.email||s("No email")})]}),e.jsx(N,{href:route("accounts.show",t.id),children:e.jsx(m,{variant:"outline",size:"sm",className:"bg-white",children:s("View Account")})})]},t.id)})})})]}),(p==null?void 0:p.length)>0&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsxs(x,{className:"text-lg font-semibold",children:[s("Related Contacts")," (",p.length,")"]})}),e.jsx(d,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:p.map(t=>{var r;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-gray-700",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:((r=t.account)==null?void 0:r.name)||s("No account")}),e.jsx("p",{className:"text-sm text-gray-500",children:t.email||s("No email")})]}),e.jsx(N,{href:route("contacts.show",t.id),children:e.jsx(m,{variant:"outline",size:"sm",className:"bg-white",children:s("View Contact")})})]},t.id)})})})]}),(n==null?void 0:n.length)>0&&e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:s("Activities")})}),e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:[s("Meetings")," (",n.filter(t=>t.type!=="call").length,")"]})]}),e.jsxs("div",{className:"space-y-3",children:[n.filter(t=>t.type!=="call").slice(0,5).map(t=>{var r,c;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500",children:((r=window.appSettings)==null?void 0:r.formatDateTime(t.start_date,!1))||new Date(t.start_date).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-gray-500",children:((c=t.assigned_user)==null?void 0:c.name)||s("Unassigned")})]})]}),e.jsx(N,{href:route("meetings.show",t.id),children:e.jsx(m,{variant:"outline",size:"sm",children:s("View")})})]},t.id)}),n.filter(t=>t.type!=="call").length>5&&e.jsx("p",{className:"text-sm text-gray-500 text-center",children:s("+{{count}} more meetings",{count:n.filter(t=>t.type!=="call").length-5})}),n.filter(t=>t.type!=="call").length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:s("No meetings found")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:[s("Calls")," (",n.filter(t=>t.type==="call").length,")"]})]}),e.jsxs("div",{className:"space-y-3",children:[n.filter(t=>t.type==="call").slice(0,5).map(t=>{var r,c;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500",children:((r=window.appSettings)==null?void 0:r.formatDateTime(t.start_date,!1))||new Date(t.start_date).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-gray-500",children:((c=t.assigned_user)==null?void 0:c.name)||s("Unassigned")})]})]}),e.jsx(N,{href:route("calls.show",t.id),children:e.jsx(m,{variant:"outline",size:"sm",children:s("View")})})]},t.id)}),n.filter(t=>t.type==="call").length>5&&e.jsx("p",{className:"text-sm text-gray-500 text-center",children:s("+{{count}} more calls",{count:n.filter(t=>t.type==="call").length-5})}),n.filter(t=>t.type==="call").length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:s("No calls found")})]})]})]})})]}),e.jsxs(i,{className:"shadow-sm",children:[e.jsx(o,{className:"bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(x,{className:"flex items-center text-lg font-semibold",children:[e.jsx(L,{className:"h-5 w-5 mr-3 text-muted-foreground"}),s("Activity Stream")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ce(!y),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),s(y?"Hide":"Show")]}),g&&g.length>0&&z&&e.jsxs(m,{variant:"destructive",size:"sm",onClick:()=>S(!0),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),s("Delete Stream")]})]})]})}),y&&e.jsxs(d,{className:"p-0",children:[e.jsx("div",{className:"sticky top-0 bg-white z-10 p-6 pb-6 border-b mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((Y=l==null?void 0:l.user)==null?void 0:Y.avatar)||"/images/avatar/default.png",alt:((Q=l==null?void 0:l.user)==null?void 0:Q.name)||"User",className:"w-full h-full object-cover",onError:t=>{var c;const r=t.target;r.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((c=l==null?void 0:l.user)==null?void 0:c.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),e.jsx("div",{className:"flex-1",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),b.trim()&&w.post(route("leads.comments.store",a.id),{comment:b},{preserveScroll:!0,onSuccess:()=>A("")})},children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{placeholder:s("Add a comment..."),value:b,onChange:t=>A(t.target.value),className:"flex-1"}),e.jsx(m,{type:"submit",size:"sm",disabled:!b.trim(),children:e.jsx(Me,{className:"h-4 w-4"})})]})})})]})}),e.jsx("div",{className:"p-6 pt-0 max-h-96 overflow-y-auto",children:g&&g.length>0?e.jsx("div",{className:"space-y-2",children:g.map((t,r)=>{var Z,ee,se,te,ae;const c=h=>{var re;const k=new Date(h),f=Math.floor((new Date().getTime()-k.getTime())/(1e3*60));if(f<1)return s("Just now");if(f<60)return s("{{count}} {{unit}} ago",{count:f,unit:s(f===1?"minute":"minutes")});const v=Math.floor(f/60);if(v<24)return s("{{count}} {{unit}} ago",{count:v,unit:s(v===1?"hour":"hours")});const M=Math.floor(v/24);return M<7?s("{{count}} {{unit}} ago",{count:M,unit:s(M===1?"day":"days")}):((re=window.appSettings)==null?void 0:re.formatDateTime(h,!1))||new Date(h).toLocaleDateString()};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:((Z=t.user)==null?void 0:Z.avatar)||"/images/avatar/default.png",alt:((ee=t.user)==null?void 0:ee.name)||"User",className:"w-full h-full object-cover",onError:h=>{var D;const k=h.target;k.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(((D=t.user)==null?void 0:D.name)||"User")}&background=e5e7eb&color=374151&size=32`}})}),r<g.length-1&&e.jsx("div",{className:"w-px h-8 bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:((se=t.user)==null?void 0:se.name)||s("System")}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:c(t.created_at)})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",dangerouslySetInnerHTML:{__html:t.title.replace(new RegExp(`^(${((te=t.user)==null?void 0:te.name)||s("System")})`,"g"),'<span class="font-bold text-base">$1</span>')}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20",children:t.activity_type.charAt(0).toUpperCase()+t.activity_type.slice(1)}),z&&e.jsx(m,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{ue(t),C(!0)},children:e.jsx(le,{className:"h-3 w-3"})})]})]}),t.description&&e.jsx("div",{className:"mb-2",children:t.field_changed==="status"&&(t.description==="Active"||t.description==="Inactive")?e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ${t.description==="Active"?"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":"bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20"}`,children:t.description}):t.field_changed==="lead_status_id"?e.jsx("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:t.description}}):t.activity_type==="comment"?e.jsx("div",{children:ge===t.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:T,onChange:h=>I(h.target.value),className:"flex-1"}),e.jsx(m,{size:"sm",onClick:()=>{w.put(route("leads.comments.update-activity",{lead:a.id,activity:t.id}),{comment:T},{preserveScroll:!0}),_(null)},children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>_(null),children:e.jsx(we,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:t.description}),t.user_id===((ae=l==null?void 0:l.user)==null?void 0:ae.id)&&e.jsx(m,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:()=>{_(t.id),I(t.description)},children:e.jsx(Le,{className:"h-3 w-3"})})]})}):t.field_changed==="name"||t.field_changed==="assigned_to"||t.description.includes("into")?e.jsx("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"text-sm text-gray-600",children:t.description})})]})]})]},t.id||r)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(L,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm",children:s("No activities found")})]})})]})]})]}),e.jsx(ie,{isOpen:oe,onClose:()=>C(!1),onConfirm:()=>{w.delete(route("leads.delete-activity",{lead:a.id,activity:he.id}),{preserveScroll:!0}),C(!1)},itemName:s("this activity"),entityName:s("activity")}),e.jsx(ie,{isOpen:xe,onClose:()=>S(!1),onConfirm:()=>{w.delete(route("leads.delete-activities",a.id),{preserveScroll:!0}),S(!1)},itemName:s("all activities for {{name}}",{name:a.name}),entityName:s("activities")})]})}export{us as default};
