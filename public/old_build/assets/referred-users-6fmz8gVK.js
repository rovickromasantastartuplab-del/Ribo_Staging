import{j as e}from"./ui-C-VW1P-5.js";import{P as j}from"./page-template-CDM26U5Q.js";import{u as g,K as N,$ as v,B as y,C as n,c as d,a as b,b as w,p as h,S as C}from"./app-BQKKzqf3.js";import{P as U}from"./pagination-mhOv5uX0.js";import{A as k}from"./arrow-left-CYc20UlY.js";import{U as o}from"./users-CrY8npWB.js";import{D as P}from"./dollar-sign-BO1aYhXH.js";import{C as R}from"./calendar-BZ7v_rN9.js";import{f as S}from"./utils-DCj7OOX3.js";import"./vendor-CxtKjBZA.js";import"./textarea-BvlD1v8z.js";import"./select-ivmaqUw7.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";import"./react-country-flag.esm-B_SRkH7q.js";import"./language-BbwPiY59.js";import"./loader-circle-DlS76Sc1.js";import"./copy-D-hAzd4M.js";import"./language-switcher-BX314FqS.js";import"./switch-T0u5R7d_.js";import"./refresh-cw-BnxOCyDc.js";import"./globe-BSt65iB3.js";import"./settings-G3vQs6CU.js";import"./chevron-right-C7M1oeKV.js";import"./credit-card-CmRw-oUn.js";import"./mail-DI9tSiFs.js";import"./package-BHhWwbAI.js";import"./phone-B9JuG5Em.js";import"./trending-up-BUQ_r1Kz.js";import"./user-B-NTs7Zv.js";import"./use-favicon-D-Hpb8YY.js";function ne(){const{t:r}=g(),{props:p}=N(),{referredUsers:a,userType:x,currencySymbol:l}=p,f=s=>S(new Date(s),{addSuffix:!0}),m=s=>{var t;return((t=s.referrals)==null?void 0:t.reduce((i,c)=>i+(Number(c.amount)||0),0))||0},u=s=>{var i;if(!s.plan)return null;const t=(i=s.plan_orders)==null?void 0:i[0];if(t){const c=t.billing_cycle==="yearly";return{name:s.plan.name,price:t.final_price,cycle:c?"year":"month"}}return{name:s.plan.name,price:s.plan.price,cycle:"month"}};return e.jsx(j,{title:r("Referred Users"),url:"/referral/referred-users",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v,{href:route("referral.index"),children:e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),r("Back to Referral Dashboard")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:r("Referred Users")}),e.jsx("p",{className:"text-muted-foreground",children:r(x==="superadmin"?"All users who registered using referral codes":"Users who registered using your referral code")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Total Referred Users")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:a.total})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(o,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Users with Plans")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:a.data.filter(s=>s.plan).length})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(o,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Total Commission Earned")}),e.jsxs("h3",{className:"mt-2 text-2xl font-bold",children:[l,(a.data.reduce((s,t)=>s+m(t),0)||0).toFixed(2)]})]}),e.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900",children:e.jsx(P,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})})]})})})]}),e.jsxs(n,{children:[e.jsx(b,{children:e.jsx(w,{children:r("Referred Users List")})}),e.jsx(d,{children:a.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(o,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:r("No referred users yet")}),e.jsx("p",{className:"text-muted-foreground",children:r(x==="superadmin"?"No users have registered using referral codes yet.":"Share your referral link to start earning commissions.")})]}):e.jsx("div",{className:"space-y-4",children:a.data.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(R,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r("Registered")," ",f(s.created_at)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-right",children:(()=>{const t=u(s);return t?e.jsxs("div",{children:[e.jsx(h,{variant:"default",className:"mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l,t.price,"/",r(t.cycle)]})]}):e.jsx(h,{variant:"secondary",children:r("No Plan")})})()}),m(s)>0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["+",l,m(s)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("Commission")})]})]})]}),s.referrals&&s.referrals.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:r("Commission History")}),e.jsx("div",{className:"space-y-1",children:s.referrals.map(t=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.commission_percentage,"% commission"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",l,t.amount]})]},t.id))})]})]},s.id))})})]}),a.last_page>1&&e.jsx(U,{from:a.from,to:a.to,total:a.total,links:a.links,currentPage:a.current_page,lastPage:a.last_page,entityName:r("users"),onPageChange:s=>{C.visit(s,{preserveState:!0,preserveScroll:!0})}})]})})}export{ne as default};
