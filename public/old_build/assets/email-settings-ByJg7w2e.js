import{r as j,j as e}from"./ui-C-VW1P-5.js";import{u as V,K as z,ak as B,C,c as w,L as n,I as c,aa as O,s as q,v as H,w as K,B as T,a6 as W,t as r,S as E}from"./app-BQKKzqf3.js";import{S as F,a as M,b,c as A,d as u}from"./select-ivmaqUw7.js";import{A as G,a as J}from"./alert-Bt8OE1Tt.js";import{M as _}from"./mail-DI9tSiFs.js";import{S as N}from"./server-VPjmlBKw.js";import{C as Q}from"./circle-alert-Ba7f7jIF.js";import{U as P}from"./user-B-NTs7Zv.js";import{L}from"./lock-DLCREvz4.js";import{S as D}from"./send-Ci4mpdkr.js";import"./vendor-CxtKjBZA.js";import"./utils-DCj7OOX3.js";import"./index-IS-ASe-l.js";import"./chevron-up-5kET5X99.js";function ce(){const{t:a}=V(),{settings:o={}}=z().props,[m,I]=j.useState({provider:o.email_provider||"smtp",driver:o.email_driver||"smtp",host:o.email_host||"smtp.example.com",port:o.email_port||"587",username:o.email_username||"user@example.com",password:o.email_password?"••••••••••••":"",encryption:o.email_encryption||"tls",fromAddress:o.email_from_address||"noreply@example.com",fromName:o.email_from_name||"WorkDo System"}),[x,k]=j.useState(""),[S,f]=j.useState(!1),[v,d]=j.useState(null),i=(s,t)=>{I(l=>({...l,[s]:t}))},R=s=>{s.preventDefault(),r.loading(a("Saving email settings...")),E.post(route("settings.email.update"),m,{preserveScroll:!0,onSuccess:t=>{var h,g;r.dismiss();const l=(h=t.props.flash)==null?void 0:h.success,p=(g=t.props.flash)==null?void 0:g.error;l?r.success(l):p?r.error(p):r.success(a("Email settings saved successfully"))},onError:t=>{r.dismiss();const l=t.error||Object.values(t).join(", ")||a("Failed to save email settings");r.error(l)}})},U=s=>{s.preventDefault(),x&&(f(!0),d(null),r.loading(a("Sending test email...")),E.post(route("settings.email.test"),{email:x},{preserveScroll:!0,onSuccess:t=>{var h,g;f(!1),r.dismiss();const l=(h=t.props.flash)==null?void 0:h.success,p=(g=t.props.flash)==null?void 0:g.error;if(l)r.success(l),d({success:!0,message:l});else if(p)r.error(p),d({success:!1,message:p});else{const y=a("Test email sent successfully to {{email}}",{email:x});r.success(y),d({success:!0,message:y})}setTimeout(()=>{d(null)},5e3)},onError:t=>{f(!1),r.dismiss();const l=t.error||Object.values(t).join(", ")||a("Failed to send test email");r.error(l),d({success:!1,message:l}),setTimeout(()=>{d(null)},5e3)}}))};return e.jsx(B,{title:a("Email Settings"),description:a("Configure email server settings for system notifications and communications"),action:e.jsxs(T,{type:"submit",form:"email-settings-form",size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("form",{id:"email-settings-form",onSubmit:R,children:e.jsx(C,{children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"provider",className:"font-medium",children:a("Email Provider")})]}),e.jsxs(F,{value:m.provider,onValueChange:s=>{i("provider",s),s==="smtp"?i("driver","smtp"):s==="mailgun"?i("driver","mailgun"):s==="ses"&&i("driver","ses")},children:[e.jsx(M,{children:e.jsx(b,{placeholder:"Select provider"})}),e.jsxs(A,{children:[e.jsx(u,{value:"smtp",children:"SMTP"}),e.jsx(u,{value:"mailgun",children:"Mailgun"}),e.jsx(u,{value:"ses",children:"Amazon SES"}),e.jsx(u,{value:"sendmail",children:"Sendmail"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"driver",className:"font-medium",children:a("Mail Driver")})]}),e.jsx(c,{id:"driver",value:m.driver,onChange:s=>i("driver",s.target.value),placeholder:"smtp"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"host",className:"font-medium",children:a("SMTP Host")})]}),e.jsx(c,{id:"host",value:m.host,onChange:s=>i("host",s.target.value),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"port",className:"font-medium",children:a("SMTP Port")}),e.jsx(O,{children:e.jsxs(q,{children:[e.jsx(H,{asChild:!0,children:e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(K,{children:e.jsx("p",{children:a("Common ports: 25, 465, 587, 2525")})})]})})]}),e.jsx(c,{id:"port",value:m.port,onChange:s=>i("port",s.target.value),placeholder:"587"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"username",className:"font-medium",children:a("SMTP Username")})]}),e.jsx(c,{id:"username",value:m.username,onChange:s=>i("username",s.target.value),placeholder:"user@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"password",className:"font-medium",children:a("SMTP Password")})]}),e.jsx(c,{id:"password",type:"password",value:m.password,onChange:s=>i("password",s.target.value),placeholder:"••••••••••••"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"encryption",className:"font-medium",children:a("Mail Encryption")})]}),e.jsxs(F,{value:m.encryption,onValueChange:s=>i("encryption",s),children:[e.jsx(M,{children:e.jsx(b,{placeholder:"Select encryption"})}),e.jsxs(A,{children:[e.jsx(u,{value:"tls",children:"TLS"}),e.jsx(u,{value:"ssl",children:"SSL"}),e.jsx(u,{value:"none",children:"None"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromAddress",className:"font-medium",children:a("From Address")})]}),e.jsx(c,{id:"fromAddress",value:m.fromAddress,onChange:s=>i("fromAddress",s.target.value),placeholder:"noreply@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromName",className:"font-medium",children:a("From Name")})]}),e.jsx(c,{id:"fromName",value:m.fromName,onChange:s=>i("fromName",s.target.value),placeholder:"System"})]})]})})})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(C,{children:e.jsx(w,{className:"pt-6",children:e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:a("Test Email Configuration")})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"testEmail",className:"font-medium",children:a("Send Test To")}),e.jsx(c,{id:"testEmail",type:"email",value:x,onChange:s=>k(s.target.value),placeholder:"test@example.com",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("Enter an email address to send a test message")})]}),v&&e.jsx(G,{variant:v.success?"success":"destructive",className:"py-2",children:e.jsx(J,{children:v.message})}),e.jsx(T,{type:"submit",className:"w-full",disabled:S||!x,children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"◌"}),a("Sending...")]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),a("Send Test Email")]})})]})})})})]})})}export{ce as default};
